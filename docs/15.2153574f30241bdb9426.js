(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"5za1":function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var i=n("1G5W"),a=n("lJxs"),s=n("SxV6"),c=n("pLZG");class o{constructor(e,t,n,i,a,s,c){this.id=Math.random(),this.max=e,this.first=t,this.origin=n,this.target=i,this.type=a,this.unit=s,this.cataTarget=c}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.CommandListRequest"}}class r{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.GetCommandEditTimesRequest"}}class b{constructor(e){this.time=e}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.SimpleTimerRequest"}}class l{constructor(e,t,n){this.id=Math.random(),this.plan=e,this.cataTarget=t,this.ms=n}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.ImportWorkbenchRequest"}}class m{constructor(e,t,n,i,a,s,c){this.source=e,this.target=t,this.slowestUnit=n,this.commandType=i.name,this.arrival=a,this.template=s,this.troops=c}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.AddCommandRequest"}}class u{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.DeleteCommandRequest"}}class d{constructor(e,t){this.id=e,this.source=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandSourceRequest"}}class p{constructor(e,t){this.id=e,this.target=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandTargetRequest"}}class h{constructor(e,t){this.id=e,this.slowestUnit=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditSlowestUnitRequest"}}class g{constructor(e,t){this.id=e,this.type=t.name}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandTypeRequest"}}class f{constructor(e,t){this.id=e,this.arrivalTime=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandArrivalTimeRequest"}}class v{constructor(e,t){this.id=e,this.sendTime=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandSendTimeRequest"}}class T{constructor(e,t,n){this.id=e,this.template=t,this.troops=n}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandTroopsRequest"}}class w{getName(){return"GetStandardTroopTemplateRequest"}}class k{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.unitengine.ws.packet.incoming.GetStandardTroopTemplateRequest"}}class U{constructor(e,t){this.name=e,this.troops=t}getName(){return"io.robertengel.dsbot.unitengine.ws.packet.incoming.AddStandardTroopTemplateRequest"}}class C{constructor(e,t,n){this.id=e,this.name=t,this.troops=n}getName(){return"io.robertengel.dsbot.unitengine.ws.packet.incoming.EditStandardTroopTemplateRequest"}}class O{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.unitengine.ws.packet.incoming.DeleteStandardTroopTemplateRequest"}}class L{constructor(e,t,n,i,a){this.origin=e,this.target=t,this.type=n,this.unit=i,this.cataTarget=a}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.WorkbenchExportRequest"}}class R{getName(){return"GetTimerLogicRequest"}}class S{constructor(e){this.timerLogic=e}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.SetTimerLogicRequest"}}class D{constructor(e,t,n,i,a){this.village=e,this.troops=t,this.second=n,this.msStart=i,this.msEnd=a}getName(){return"io.robertengel.dsbot.feature.tabber.ws.packet.incoming.CancelTabberRequest"}}class P{getName(){return"GetPlannedCancelTabsRequest"}}class y{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.feature.tabber.ws.packet.incoming.CancelPlannedTabRequest"}}class N{constructor(e,t){this.id=e,this.timerLogic=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandTimerRequest"}}class B{constructor(e,t,n,i,a,s,c){this.sources=e,this.target=t,this.slowestUnit=n,this.commandType=i.name,this.arrival=a,this.template=s,this.troops=c}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.MultiAddCommandRequest"}}class I{constructor(e,t,n){this.ids=e,this.plus=t,this.unit=n}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandTimeAddRequest"}}class E{constructor(e,t,n){this.ids=e,this.min=t,this.max=n}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandMillisRandomRequest"}}class j{constructor(e,t){this.ids=e,this.ms=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandMillisSetRequest"}}class M{constructor(e,t){this.ids=e,this.timerLogic=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandTimerRequest"}}class ${constructor(e,t,n){this.ids=e,this.template=t,this.troops=n}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandTroopsRequest"}}class J{constructor(e,t){this.ids=e,this.type=t.name}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandTypeRequest"}}class x{constructor(e,t){this.ids=e,this.slowestUnit=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandUnitRequest"}}class q{getName(){return"CommandListUsedTypesRequest"}}var F=n("fXoL"),A=n("7nMs");let H=(()=>{class e{constructor(e){this.websocket=e}multiEditEvents(e){return this.websocket.observable("MultiEditCommandResponse").pipe(Object(i.a)(e))}addMillis(e,t,n){this.websocket.sendData(new I(e,t,n))}randomizeMillis(e,t,n){this.websocket.sendData(new E(e,t,n))}setMillis(e,t){this.websocket.sendData(new j(e,t))}multiEditTimer(e,t){this.websocket.sendData(new M(e,t))}multiEditTroops(e,t,n){this.websocket.sendData(new $(e,t,n))}multiEditType(e,t){this.websocket.sendData(new J(e,t))}multiEditUnit(e,t){this.websocket.sendData(new x(e,t))}setOverviewRemove(e){localStorage.setItem("tw.interface.command.overview.remove",String(e))}shouldOverviewRemove(){return"true"===localStorage.getItem("tw.interface.command.overview.remove")}cancelTab(e,t,n,i,a){this.websocket.sendData(new D(e,t,n,i,a))}getCancelTabs(){return this.websocket.observable("ListPlannedCancelTabsResponse",new P)}cancelPlannedCancelTab(e){this.websocket.sendData(new y(e))}addedPlansEvents(){return this.websocket.observable("AddedPlannedTabPacket")}cancelPlansEvents(){return this.websocket.observable("CanceledPlannedTabPacket").pipe(Object(a.a)(e=>e.id))}getTimerLogic(){return this.websocket.observable("TimerLogicResponse",new R)}setTimerLogic(e){this.websocket.sendData(new S(e))}importWorkbenchStart(){return this.websocket.observable("ImportWorkbenchStartEvent").pipe(Object(a.a)(e=>e.id))}importWorkbenchProgress(){return this.websocket.observable("ImportWorkbenchProgressEvent")}importWorkbenchFinish(){return this.websocket.observable("ImportWorkbenchFinishEvent")}getTroopTemplates(){return this.websocket.observable("StandardTroopTemplateListResponse",new w).pipe(Object(s.a)(),Object(a.a)(e=>e.templates))}getTroopTemplate(e){return this.websocket.observable("StandardTroopTemplateResponse",new k(e)).pipe(Object(c.a)(t=>t.id===e),Object(s.a)())}addTroopTemplate(e,t){return this.websocket.observable("StandardTroopTemplateResponse",new U(e,t)).pipe(Object(s.a)())}editTroopTemplate(e,t,n){return this.websocket.observable("StandardTroopTemplateResponse",new C(e,t,n)).pipe(Object(c.a)(t=>t.id===e),Object(s.a)())}deleteTroopTemplate(e){this.websocket.sendData(new O(e))}exportWorkbench(e,t,n,i,c){return this.websocket.observable("WorkbenchExportResponse",new L(e,t,n,i,c)).pipe(Object(s.a)(),Object(a.a)(e=>e.export))}addCommandEvents(){return this.websocket.observable("AddCommandEvent")}multiAddCommandEvents(){return this.websocket.observable("MultiAddCommandEvent")}editCommandsEvents(){return this.websocket.observable("EditCommandEvent")}removeCommandEvents(){return this.websocket.observable("RemoveCommandEvent").pipe(Object(a.a)(e=>e.id))}simpleTimer(e){this.websocket.sendData(new b(e))}importWorkbench(e,t,n){const i=new l(e,t,n);return this.websocket.sendData(i),i.id}getCommandTypes(){return this.websocket.observable("CommandListTypesResponse",new q).pipe(Object(s.a)())}getCommandList(e,t,n,i,a,r,b){const l=new o(e,t,n,i,a,r,b);return this.websocket.observable("CommandListResponse",l).pipe(Object(c.a)(e=>e.id===l.id),Object(s.a)())}getEditTimes(e){const t=new r(e);return this.websocket.observable("CommandEditTimesResponse",t).pipe(Object(c.a)(t=>t.id===e),Object(s.a)())}addCommand(e,t,n,i,a,s,c){this.websocket.sendData(new m(e,t,n,i,a,s,c))}addCommands(e,t,n,i,a,s,c){this.websocket.sendData(new B(e,t,n,i,a,s,c))}removeCommand(e){this.websocket.sendData(new u(e))}editSource(e,t){this.websocket.sendData(new d(e,t))}editTarget(e,t){this.websocket.sendData(new p(e,t))}editSlowestUnit(e,t){this.websocket.sendData(new h(e,t))}editCommandType(e,t){this.websocket.sendData(new g(e,t))}editArrival(e,t){this.websocket.sendData(new f(e,t))}editTimer(e,t){this.websocket.sendData(new N(e,t))}editSendTime(e,t){this.websocket.sendData(new v(e,t))}editTroops(e,t,n){this.websocket.sendData(new T(e,t,n))}}return e.\u0275fac=function(t){return new(t||e)(F.cc(A.a))},e.\u0275prov=F.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},sIr3:function(e,t,n){"use strict";n.r(t),n.d(t,"IncsModule",(function(){return Je}));var i=n("ofXK"),a=n("tyNb"),s=n("XNiG"),c=n("1G5W"),o=n("fXoL"),r=n("fer1"),b=n("M9ds");const l=function(e){return[e]};function m(e,t){if(1&e){const e=o.Vb();o.Ub(0,"span",3),o.fc("click",(function(){o.Ac(e);const n=t.$implicit;return o.jc().activeLink=n})),o.Lc(1),o.Tb()}if(2&e){const e=t.$implicit,n=o.jc();o.pc("active",n.activeLink===e)("routerLink",o.tc(3,l,e.link)),o.Bb(1),o.Nc(" ",e.title," ")}}let u=(()=>{class e{constructor(e,t){this.router=e,this.inc=t,this.links=[{title:"Home",link:"/incs"},{title:"Eigentruppen tabben",link:"/incs/cancel"}],this.activeLink=this.links[0],this.unsub$=new s.b}heatmap(e){this.inc.heatmap(e)}ngOnInit(){this.setActive(),this.router.events.pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.setActive()})}setActive(){for(const e of this.links)this.router.isActive(e.link,!1)&&(this.activeLink=e)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(a.c),o.Ob(r.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-incs"]],decls:7,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"click"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(e,t){1&e&&(o.Ub(0,"nav",0),o.Jc(1,m,2,5,"span",1),o.Ub(2,"span",2),o.fc("click",(function(){return t.heatmap("INCOMING")})),o.Lc(3," Heatmap Eintreffend "),o.Tb(),o.Ub(4,"span",2),o.fc("click",(function(){return t.heatmap("OUTGOING")})),o.Lc(5," Heatmap Ausgehend "),o.Tb(),o.Tb(),o.Pb(6,"router-outlet")),2&e&&(o.Bb(1),o.pc("ngForOf",t.links))},directives:[b.b,i.l,b.a,a.g,a.d],styles:[""]}),e})();var d=n("l5mm"),p=n("lJxs"),h=n("UXun"),g=n("Kj3r"),f=n("3Pt+"),v=n("7nMs"),T=n("0MNC"),w=n("PDjf"),k=n("5QHs"),U=n("Q2Ze"),C=n("ZTz/"),O=n("jTwa"),L=n("FKr1"),R=n("pu8Q"),S=n("OaSA"),D=n("irRR"),P=n("DSdR");function y(e,t){1&e&&o.Pb(0,"app-unit-render",8),2&e&&o.pc("value",t.$implicit)}function N(e,t){if(1&e&&(o.Ub(0,"mat-option",9),o.Pb(1,"app-unit-render",9),o.Tb()),2&e){const e=t.$implicit;o.pc("value",e),o.Bb(1),o.pc("value",e)}}function B(e,t){if(1&e&&(o.Ub(0,"mat-form-field",4),o.Ub(1,"mat-label"),o.Lc(2,"Einheit"),o.Tb(),o.Ub(3,"mat-select",5),o.Ub(4,"mat-select-trigger"),o.Jc(5,y,1,1,"app-unit-render",6),o.Tb(),o.Jc(6,N,2,2,"mat-option",7),o.Tb(),o.Tb()),2&e){const e=o.jc();o.Bb(3),o.pc("formControl",e.unitsForm),o.Bb(2),o.pc("ngForOf",e.unitsForm.value),o.Bb(1),o.pc("ngForOf",e.units)}}function I(e,t){1&e&&(o.Ub(0,"div",10),o.Ub(1,"div",11),o.Pb(2,"span"),o.Pb(3,"mat-spinner"),o.Pb(4,"span"),o.Tb(),o.Tb())}function E(e,t){1&e&&(o.Ub(0,"mat-header-cell"),o.Lc(1,"Name"),o.Tb())}function j(e,t){if(1&e&&(o.Ub(0,"mat-cell"),o.Ub(1,"span",24),o.Lc(2,"Name:"),o.Tb(),o.Ub(3,"a",25),o.Lc(4),o.Tb(),o.Tb()),2&e){const e=t.$implicit;o.Bb(3),o.pc("routerLink","/incs/"+e.id),o.Bb(1),o.Mc(e.name)}}function M(e,t){1&e&&o.Pb(0,"app-unit-render",8),2&e&&o.pc("value",t.$implicit)}function $(e,t){if(1&e&&(o.Ub(0,"mat-option",9),o.Pb(1,"app-unit-render",9),o.Tb()),2&e){const e=t.$implicit;o.pc("value",e),o.Bb(1),o.pc("value",e)}}function J(e,t){if(1&e&&(o.Ub(0,"mat-header-cell"),o.Ub(1,"mat-form-field",4),o.Ub(2,"mat-label"),o.Lc(3,"Einheit"),o.Tb(),o.Ub(4,"mat-select",5),o.Ub(5,"mat-select-trigger"),o.Jc(6,M,1,1,"app-unit-render",6),o.Tb(),o.Jc(7,$,2,2,"mat-option",7),o.Tb(),o.Tb(),o.Tb()),2&e){const e=o.jc(2);o.Bb(4),o.pc("formControl",e.unitsForm),o.Bb(2),o.pc("ngForOf",e.unitsForm.value),o.Bb(1),o.pc("ngForOf",e.units)}}function x(e,t){if(1&e&&(o.Ub(0,"mat-cell"),o.Ub(1,"span",24),o.Lc(2,"Einheit:"),o.Tb(),o.Pb(3,"app-unit-render",9),o.Tb()),2&e){const e=t.$implicit;o.Bb(3),o.pc("value",e.slowestUnit)}}function q(e,t){1&e&&(o.Ub(0,"mat-header-cell"),o.Lc(1,"Ziel"),o.Tb())}function F(e,t){if(1&e&&(o.Ub(0,"mat-cell"),o.Ub(1,"span",24),o.Lc(2,"Ziel:"),o.Tb(),o.Pb(3,"app-village-render",9),o.Tb()),2&e){const e=t.$implicit;o.Bb(3),o.pc("value",e.target)}}function A(e,t){1&e&&(o.Ub(0,"mat-header-cell"),o.Lc(1,"Herkunft"),o.Tb())}function H(e,t){if(1&e&&(o.Ub(0,"mat-cell"),o.Ub(1,"span",24),o.Lc(2,"Herkunft:"),o.Tb(),o.Pb(3,"app-village-render",9),o.Tb()),2&e){const e=t.$implicit;o.Bb(3),o.pc("value",e.origin)}}function z(e,t){1&e&&(o.Ub(0,"mat-header-cell"),o.Lc(1,"Spieler"),o.Tb())}function W(e,t){if(1&e&&(o.Ub(0,"mat-cell"),o.Ub(1,"span",24),o.Lc(2,"Spieler:"),o.Tb(),o.Lc(3),o.Tb()),2&e){const e=t.$implicit;o.Bb(3),o.Nc(" ",e.player.name," ")}}function G(e,t){1&e&&(o.Ub(0,"mat-header-cell"),o.Lc(1,"Ankunft"),o.Tb())}function V(e,t){if(1&e&&(o.Ub(0,"mat-cell"),o.Ub(1,"span",24),o.Lc(2,"Ankunft:"),o.Tb(),o.Lc(3),o.Ub(4,"small"),o.Lc(5),o.Tb(),o.Tb()),2&e){const e=t.$implicit;o.Bb(3),o.Nc(" ",e.arrival.display,""),o.Bb(2),o.Nc(":",e.arrival.ms,"")}}function Y(e,t){1&e&&(o.Ub(0,"mat-header-cell"),o.Lc(1,"Verbleibend"),o.Tb())}function _(e,t){if(1&e&&(o.Ub(0,"mat-cell"),o.Ub(1,"span",24),o.Lc(2,"Verbleibend:"),o.Tb(),o.Ub(3,"span"),o.Lc(4),o.kc(5,"hms"),o.Tb(),o.Tb()),2&e){const e=t.$implicit;o.Bb(3),o.Gb("red",e.remaining<300),o.Bb(1),o.Mc(o.lc(5,3,1e3*e.remaining))}}function Z(e,t){1&e&&o.Pb(0,"mat-header-row")}function K(e,t){1&e&&o.Pb(0,"mat-row")}function X(e,t){if(1&e&&(o.Ub(0,"mat-table",12),o.Sb(1,13),o.Jc(2,E,2,0,"mat-header-cell",14),o.Jc(3,j,5,2,"mat-cell",15),o.Rb(),o.Sb(4,16),o.Jc(5,J,8,3,"mat-header-cell",14),o.Jc(6,x,4,1,"mat-cell",15),o.Rb(),o.Sb(7,17),o.Jc(8,q,2,0,"mat-header-cell",14),o.Jc(9,F,4,1,"mat-cell",15),o.Rb(),o.Sb(10,18),o.Jc(11,A,2,0,"mat-header-cell",14),o.Jc(12,H,4,1,"mat-cell",15),o.Rb(),o.Sb(13,19),o.Jc(14,z,2,0,"mat-header-cell",14),o.Jc(15,W,4,1,"mat-cell",15),o.Rb(),o.Sb(16,20),o.Jc(17,G,2,0,"mat-header-cell",14),o.Jc(18,V,6,2,"mat-cell",15),o.Rb(),o.Sb(19,21),o.Jc(20,Y,2,0,"mat-header-cell",14),o.Jc(21,_,6,5,"mat-cell",15),o.Rb(),o.Jc(22,Z,1,0,"mat-header-row",22),o.Jc(23,K,1,0,"mat-row",23),o.Tb()),2&e){const e=o.jc();o.pc("dataSource",e.incs),o.Bb(22),o.pc("matHeaderRowDef",e.displayedColumns),o.Bb(1),o.pc("matRowDefColumns",e.displayedColumns)}}const Q=function(){return[10,50,100,250]};let ee=(()=>{class e{constructor(e,t,n){this.web=e,this.incService=t,this.breakpointObserver=n,this.unsub$=new s.b,this.incs=[],this.size=10,this.unitsForm=new f.e([]),this.cancelled=!1,this.displayedColumns=["name","slowestUnit","target","origin","player","arrival","remaining"],this.isHandset$=this.breakpointObserver.observe("(max-width: 900px)").pipe(Object(p.a)(e=>e.matches),Object(h.a)()),this.loading=!1}ngOnInit(){this.web.info().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.units=e.units}),this.loading=!0,this.incService.getIncList(0,10,!1).subscribe(e=>{this.incs=e.incs,this.count=e.count,this.loading=!1}),Object(d.a)(1e3).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.incs.forEach((e,t,n)=>{n[t].remaining>0&&(n[t].remaining-=1)})}),this.unitsForm.valueChanges.pipe(Object(c.a)(this.unsub$),Object(g.a)(1e3)).subscribe(e=>{this.loading=!0,this.incService.getIncList(0,this.size,this.cancelled,e).subscribe(e=>{this.incs=e.incs,this.count=e.count,this.loading=!1})})}pageUpdate(e){this.size=e.pageSize,this.loading=!0,this.incService.getIncList(e.pageIndex*e.pageSize,e.pageSize,this.cancelled,this.unitsForm.value).subscribe(e=>{this.incs=e.incs,this.count=e.count,this.loading=!1})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(v.a),o.Ob(r.a),o.Ob(T.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-incs-overview"]],decls:6,vars:9,consts:[["appearance","fill",4,"ngIf"],["class","row",4,"ngIf"],["class","w-100",3,"dataSource",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],["appearance","fill"],["multiple","",3,"formControl"],["class","p-1",3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],[1,"p-1",3,"value"],[3,"value"],[1,"row"],[1,"col-md-12","flex-between"],[1,"w-100",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","slowestUnit"],["matColumnDef","target"],["matColumnDef","origin"],["matColumnDef","player"],["matColumnDef","arrival"],["matColumnDef","remaining"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"mobile-label"],[3,"routerLink"]],template:function(e,t){1&e&&(o.Ub(0,"mat-card"),o.Jc(1,B,7,3,"mat-form-field",0),o.kc(2,"async"),o.Jc(3,I,5,0,"div",1),o.Jc(4,X,24,3,"mat-table",2),o.Ub(5,"mat-paginator",3),o.fc("page",(function(e){return t.pageUpdate(e)})),o.Tb(),o.Tb()),2&e&&(o.Bb(1),o.pc("ngIf",!0===o.lc(2,6,t.isHandset$)),o.Bb(2),o.pc("ngIf",t.loading),o.Bb(1),o.pc("ngIf",!t.loading),o.Bb(1),o.pc("length",t.count)("pageSize",10)("pageSizeOptions",o.sc(8,Q)))},directives:[w.a,i.m,k.a,U.b,U.f,C.a,f.o,f.f,C.c,i.l,O.a,L.n,R.b,S.j,S.c,S.e,S.b,S.g,S.i,S.d,S.a,a.e,D.a,S.f,S.h],pipes:[i.b,P.a],styles:["a[_ngcontent-%COMP%]{color:inherit}.red[_ngcontent-%COMP%]{color:red}.mat-header-cell[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.mat-cell[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mobile-label[_ngcontent-%COMP%]{display:none}@media (max-width:900px){.mobile-label[_ngcontent-%COMP%]{width:80px;display:inline-block;font-weight:700}mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{flex-direction:column;align-items:start;padding:8px 24px}}"]}),e})();var te=n("bTqV");function ne(e,t){1&e&&(o.Ub(0,"div",2),o.Ub(1,"div",3),o.Pb(2,"span"),o.Pb(3,"mat-spinner"),o.Pb(4,"span"),o.Tb(),o.Tb())}function ie(e,t){1&e&&(o.Sb(0),o.Lc(1," Konnte keinen Inc mit dieser ID finden. "),o.Rb())}function ae(e,t){if(1&e&&(o.Ub(0,"mat-option",9),o.Pb(1,"app-unit-render",9),o.Tb()),2&e){const e=t.$implicit;o.pc("value",e),o.Bb(1),o.pc("value",e)}}const se=function(){return{type:"SUPPORT"}},ce=function(e,t,n){return["/planner/command",e,t,n]},oe=function(e,t){return{village:e,time:t}},re=function(e){return["/incs/cancel",e]},be=function(){return{type:"ATTACK"}};function le(e,t){if(1&e&&(o.Ub(0,"mat-card-content"),o.Ub(1,"div",2),o.Ub(2,"div",4),o.Ub(3,"mat-card",5),o.Ub(4,"div",6),o.Ub(5,"div",7),o.Lc(6),o.Tb(),o.Ub(7,"div",7),o.Ub(8,"mat-select",8),o.Ub(9,"mat-select-trigger"),o.Pb(10,"app-unit-render",9),o.Tb(),o.Jc(11,ae,2,2,"mat-option",10),o.Tb(),o.Tb(),o.Ub(12,"div",11),o.Lc(13," Ziel: "),o.Pb(14,"app-village-render",9),o.Tb(),o.Ub(15,"div",11),o.Lc(16," Herkunft: "),o.Pb(17,"app-village-render",9),o.Tb(),o.Ub(18,"div",7),o.Lc(19),o.Tb(),o.Ub(20,"div",11),o.Lc(21),o.Ub(22,"small"),o.Lc(23),o.Tb(),o.Tb(),o.Ub(24,"div",11),o.Lc(25),o.Tb(),o.Ub(26,"div",7),o.Lc(27),o.kc(28,"hms"),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(29,"div",12),o.Ub(30,"div",2),o.Ub(31,"div",13),o.Ub(32,"button",14),o.Lc(33," DEFF planen. "),o.Tb(),o.Tb(),o.Tb(),o.Ub(34,"div",2),o.Ub(35,"div",13),o.Ub(36,"button",15),o.Lc(37," Eigendeff tabben. "),o.Tb(),o.Tb(),o.Tb(),o.Ub(38,"div",2),o.Ub(39,"div",13),o.Ub(40,"button",16),o.Lc(41," Cleaner planen. "),o.Tb(),o.Tb(),o.Tb(),o.Ub(42,"div",2),o.Ub(43,"div",13),o.Ub(44,"button",16),o.Lc(45," Retime planen. "),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&e){const e=o.jc();o.Bb(6),o.Nc(" ",e.inc.name," "),o.Bb(2),o.pc("formControl",e.unitForm),o.Bb(2),o.pc("value",e.unitForm.value),o.Bb(1),o.pc("ngForOf",e.units),o.Bb(3),o.pc("value",e.inc.target),o.Bb(3),o.pc("value",e.inc.origin),o.Bb(2),o.Nc(" Spieler: ",e.inc.player.name," "),o.Bb(2),o.Nc(" Ankunft: ",e.inc.arrival.display,""),o.Bb(2),o.Nc(":",e.inc.arrival.ms,""),o.Bb(2),o.Nc(" R\xfcckkehr: ",e.inc.return.display," "),o.Bb(2),o.Nc(" Verbleibend: ",o.lc(28,15,1e3*e.inc.remaining)," "),o.Bb(5),o.pc("routerLink",o.vc(18,ce,e.inc.target.id,e.inc.arrival.timestamp,o.sc(17,se))),o.Bb(4),o.pc("routerLink",o.tc(25,re,o.uc(22,oe,e.inc.target.id,e.inc.arrival.timestamp))),o.Bb(4),o.pc("routerLink",o.vc(28,ce,e.inc.target.id,e.inc.arrival.timestamp,o.sc(27,be))),o.Bb(4),o.pc("routerLink",o.vc(33,ce,e.inc.origin.id,e.inc.return.timestamp,o.sc(32,be)))}}let me=(()=>{class e{constructor(e,t,n){this.route=e,this.incService=t,this.web=n,this.unsub$=new s.b,this.routeChange$=new s.b,this.unitForm=new f.e,this.units=[],this.loading=!1}ngOnInit(){this.web.info().subscribe(e=>{this.units=e.units}),this.route.paramMap.subscribe(e=>{this.routeChange$.next(),this.loading=!0,this.incService.getInc(parseInt(e.get("id"),10)).subscribe(e=>{this.inc=e,this.unitForm.setValue(this.inc.slowestUnit),this.loading=!1}),this.incService.incUpdates(parseInt(e.get("id"),10)).pipe(Object(c.a)(this.routeChange$)).subscribe(e=>{this.inc=e,this.unitForm.setValue(this.inc.slowestUnit)})}),Object(d.a)(1e3).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.inc&&this.inc.remaining--}),this.unitForm.valueChanges.pipe(Object(g.a)(500)).subscribe(e=>{this.inc&&e!==this.inc.slowestUnit&&this.incService.updateSlowest(this.inc.id,e)})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete(),this.routeChange$.next(),this.routeChange$.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(a.a),o.Ob(r.a),o.Ob(v.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-incs-details"]],decls:4,vars:3,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col-md-12","flex-between"],[1,"col-xl-9"],[1,"mat-elevation-z6","h-100"],[1,"row","align-items-center"],[1,"col-xl-1"],[3,"formControl"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-xl-2"],[1,"col-xl-3"],[1,"col-md-12"],["mat-raised-button","","color","accent",1,"w-100","mat-elevation-z6",3,"routerLink"],["mat-raised-button","","color","accent",1,"w-100","mat-elevation-z6","mt-2",3,"routerLink"],["mat-raised-button","","color","warn",1,"w-100","mat-elevation-z6","mt-2",3,"routerLink"]],template:function(e,t){1&e&&(o.Ub(0,"mat-card"),o.Jc(1,ne,5,0,"div",0),o.Jc(2,ie,2,0,"ng-container",1),o.Jc(3,le,46,37,"mat-card-content",1),o.Tb()),2&e&&(o.Bb(1),o.pc("ngIf",t.loading),o.Bb(1),o.pc("ngIf",!t.inc&&!t.loading),o.Bb(1),o.pc("ngIf",t.inc))},directives:[w.a,i.m,R.b,w.c,C.a,f.o,f.f,C.c,O.a,i.l,D.a,te.a,a.d,L.n],pipes:[P.a],styles:[""]}),e})();var ue=n("wd/R"),de=n("PqYM"),pe=n("5za1"),he=n("YWTT"),ge=n("7Ixi"),fe=n("e6WT"),ve=n("TN/R"),Te=n("38Pe");let we=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.commandService=t,this.route=n,this.villageService=i,this.form=this.fb.group({village:[null],troops:{},date:ue(),time:ue().format("HH:mm:ss"),start:0,end:999})}ngOnInit(){this.route.paramMap.subscribe(e=>{e.has("village")&&this.villageService.byId(parseInt(e.get("village"),10)).subscribe(e=>{this.form.patchValue({village:e})}),e.has("time")&&this.form.patchValue({date:ue(parseInt(e.get("time"),10)),time:ue(parseInt(e.get("time"),10)).format("HH:mm:ss")})})}submit(e){if(this.form.disable(),Object(de.a)(1500).subscribe(()=>{this.form.enable()}),null===e.troops)return;const t=ue(e.date.format("DD.MM.YYYY")+" "+e.time,"DD.MM.YYYY HH:mm:ss");this.commandService.cancelTab(e.village.id,e.troops,t.valueOf(),e.start,e.end)}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(f.d),o.Ob(pe.a),o.Ob(a.a),o.Ob(he.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-incs-cancel-tab-schedule"]],decls:36,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"col"],["label","Dorf","formControlName","village"],["matInput","","placeholder","Pick Date","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","maxlength","8","formControlName","time"],["type","number","matInput","","min","0","max","999","formControlName","start"],["type","number","matInput","","min","0","max","999","formControlName","end"],["formControlName","troops",1,"full-width",3,"hideCataTarget"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(e,t){if(1&e&&(o.Ub(0,"mat-card"),o.Ub(1,"form",0),o.fc("ngSubmit",(function(){return t.submit(t.form.value)})),o.Ub(2,"div",1),o.Ub(3,"div",2),o.Pb(4,"app-village-input",3),o.Tb(),o.Tb(),o.Ub(5,"div",1),o.Ub(6,"div",2),o.Ub(7,"mat-form-field"),o.Ub(8,"mat-label"),o.Lc(9,"Ankunft"),o.Tb(),o.Pb(10,"input",4),o.Pb(11,"mat-datepicker-toggle",5),o.Pb(12,"mat-datepicker",null,6),o.Tb(),o.Tb(),o.Ub(14,"div",2),o.Ub(15,"mat-form-field"),o.Ub(16,"mat-label"),o.Lc(17,"Ankunftszeit"),o.Tb(),o.Pb(18,"input",7),o.Tb(),o.Tb(),o.Ub(19,"div",2),o.Ub(20,"mat-form-field"),o.Ub(21,"mat-label"),o.Lc(22,"Min MS"),o.Tb(),o.Pb(23,"input",8),o.Tb(),o.Tb(),o.Ub(24,"div",2),o.Ub(25,"mat-form-field"),o.Ub(26,"mat-label"),o.Lc(27,"Max MS"),o.Tb(),o.Pb(28,"input",9),o.Tb(),o.Tb(),o.Tb(),o.Ub(29,"div",1),o.Ub(30,"div",2),o.Pb(31,"app-units-input",10),o.Tb(),o.Tb(),o.Ub(32,"div",1),o.Ub(33,"div",2),o.Ub(34,"button",11),o.Lc(35," Hinzuf\xfcgen "),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&e){const e=o.xc(13);o.Bb(1),o.pc("formGroup",t.form),o.Bb(9),o.pc("matDatepicker",e),o.Bb(1),o.pc("for",e),o.Bb(20),o.pc("hideCataTarget",!0),o.Bb(3),o.pc("disabled",!t.form.valid||t.form.disabled)}},directives:[w.a,f.x,f.p,f.i,ge.a,f.o,f.g,U.b,U.f,fe.b,f.c,ve.b,ve.d,U.g,ve.a,f.k,f.s,Te.a,te.a],styles:[""]}),e})();var ke=n("NFeN");function Ue(e,t){1&e&&(o.Ub(0,"th",10),o.Lc(1," Dorf"),o.Tb())}function Ce(e,t){if(1&e&&(o.Ub(0,"td",11),o.Pb(1,"app-village-render",12),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.pc("value",e.village)}}function Oe(e,t){1&e&&(o.Ub(0,"th",10),o.Lc(1," Zeit"),o.Tb())}function Le(e,t){if(1&e&&(o.Ub(0,"td",11),o.Lc(1),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.Nc(" ",e.time.display," ")}}function Re(e,t){1&e&&(o.Ub(0,"th",10),o.Lc(1," MS Interval"),o.Tb())}function Se(e,t){if(1&e&&(o.Ub(0,"td",11),o.Lc(1),o.Tb()),2&e){const e=t.$implicit;o.Bb(1),o.Oc(" ",e.startMs,"-",e.endMs," ")}}function De(e,t){1&e&&o.Pb(0,"th",10)}function Pe(e,t){if(1&e){const e=o.Vb();o.Ub(0,"td",11),o.Ub(1,"button",13),o.fc("click",(function(){o.Ac(e);const n=t.$implicit;return o.jc(2).cancel(n.id)})),o.Ub(2,"mat-icon"),o.Lc(3,"delete"),o.Tb(),o.Tb(),o.Tb()}}function ye(e,t){1&e&&o.Pb(0,"tr",14)}function Ne(e,t){1&e&&o.Pb(0,"tr",15)}function Be(e,t){if(1&e&&(o.Ub(0,"mat-card"),o.Ub(1,"table",1),o.Sb(2,2),o.Jc(3,Ue,2,0,"th",3),o.Jc(4,Ce,2,1,"td",4),o.Rb(),o.Sb(5,5),o.Jc(6,Oe,2,0,"th",3),o.Jc(7,Le,2,1,"td",4),o.Rb(),o.Sb(8,6),o.Jc(9,Re,2,0,"th",3),o.Jc(10,Se,2,2,"td",4),o.Rb(),o.Sb(11,7),o.Jc(12,De,1,0,"th",3),o.Jc(13,Pe,4,0,"td",4),o.Rb(),o.Jc(14,ye,1,0,"tr",8),o.Jc(15,Ne,1,0,"tr",9),o.Tb(),o.Tb()),2&e){const e=o.jc();o.Bb(1),o.pc("dataSource",e.plans),o.Bb(13),o.pc("matHeaderRowDef",e.displayedColumns),o.Bb(1),o.pc("matRowDefColumns",e.displayedColumns)}}let Ie=(()=>{class e{constructor(e){this.command=e,this.unsub$=new s.b,this.displayedColumns=["village","time","ms","cancel"]}ngOnInit(){this.command.getCancelTabs().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.plans=e}),this.command.cancelPlansEvents().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.plans=this.plans.filter(t=>t.id!==e)}),this.command.addedPlansEvents().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.plans=[...this.plans,e]})}cancel(e){this.command.cancelPlannedCancelTab(e)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(o.Ob(pe.a))},e.\u0275cmp=o.Ib({type:e,selectors:[["app-incs-cancel-tab-list"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","village"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","time"],["matColumnDef","ms"],["matColumnDef","cancel"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&o.Jc(0,Be,16,3,"mat-card",0),2&e&&o.pc("ngIf",t.plans.length>0)},directives:[i.m,w.a,S.j,S.c,S.e,S.b,S.g,S.i,S.d,S.a,D.a,te.a,ke.a,S.f,S.h],styles:[""]}),e})();const Ee=[{path:"",component:u,children:[{path:"cancel",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.Ib({type:e,selectors:[["app-incs-cancel-tab"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-xl-9"],[1,"col-xl-3"]],template:function(e,t){1&e&&(o.Ub(0,"div",0),o.Ub(1,"div",1),o.Pb(2,"app-incs-cancel-tab-schedule"),o.Tb(),o.Ub(3,"div",2),o.Pb(4,"app-incs-cancel-tab-list"),o.Tb(),o.Tb())},directives:[we,Ie],styles:[""]}),e})()},{path:":id",component:me},{path:"",pathMatch:"full",component:ee}]}];let je=(()=>{class e{}return e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({factory:function(t){return new(t||e)},imports:[[a.f.forChild(Ee)],a.f]}),e})();var Me=n("BLWB"),$e=n("1yaQ");let Je=(()=>{class e{}return e.\u0275mod=o.Mb({type:e}),e.\u0275inj=o.Lb({factory:function(t){return new(t||e)},providers:[{provide:L.f,useValue:"de-DE"}],imports:[[i.c,je,b.c,w.f,Me.a,S.l,te.b,ke.b,k.b,U.d,C.b,f.t,R.a,ve.c,$e.a,fe.c]]}),e})()}}]);