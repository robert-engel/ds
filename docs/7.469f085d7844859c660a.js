(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"38Pe":function(t,e,i){"use strict";i.d(e,"a",(function(){return B}));var a=i("fXoL"),n=i("3Pt+"),s=i("0MNC"),o=i("lJxs"),c=i("UXun"),r=i("ZTz/"),l=i("7nMs"),d=i("ofXK"),b=i("Q2Ze"),u=i("e6WT"),m=i("bTqV"),p=i("FKr1");function f(t,e){if(1&t&&a.Pb(0,"img",8),2&t){const t=a.jc().$implicit,e=a.jc();a.pc("src",e.imagebase+"unit/unit_"+t+".png",a.Bc)}}const h=function(t){return{"col-xl-12":t}};function g(t,e){if(1&t){const t=a.Vb();a.Ub(0,"span",0),a.kc(1,"async"),a.Ub(2,"mat-form-field",3),a.Ub(3,"mat-label"),a.Kc(4),a.kc(5,"titlecase"),a.Tb(),a.Ub(6,"input",4,5),a.fc("change",(function(){a.zc(t);const i=e.$implicit,n=a.xc(7);return a.jc().input(n.value,i)})),a.Tb(),a.Ub(8,"button",6),a.fc("click",(function(){a.zc(t);const i=e.$implicit,n=a.xc(7);return a.jc().input("alle",i),n.value="alle"})),a.Ic(9,f,1,1,"img",7),a.Tb(),a.Tb(),a.Tb()}if(2&t){const t=e.$implicit,i=a.jc();a.pc("ngClass",a.tc(8,h,i.forceVertical||!0===a.lc(1,4,i.isHandset$))),a.Bb(4),a.Lc(a.lc(5,6,t)),a.Bb(2),a.pc("id","troop_input_"+t),a.Bb(3),a.pc("ngIf",i.imagebase)}}function v(t,e){if(1&t&&a.Pb(0,"img",18),2&t){const t=a.jc(3);a.pc("src",t.imagebase+"buildings/"+t.formControl.value.cataTarget+".png",a.Bc)}}function T(t,e){if(1&t&&(a.Ub(0,"mat-select-trigger"),a.Ub(1,"div",16),a.Ub(2,"span"),a.Kc(3),a.kc(4,"titlecase"),a.Tb(),a.Ic(5,v,1,1,"img",17),a.Tb(),a.Tb()),2&t){const t=a.jc(2);a.Bb(3),a.Lc(a.lc(4,2,t.formControl.value.cataTarget)),a.Bb(2),a.pc("ngIf",t.imagebase)}}function _(t,e){if(1&t&&a.Pb(0,"img",18),2&t){const t=a.jc().$implicit,e=a.jc(2);a.pc("src",e.imagebase+"buildings/"+t+".png",a.Bc)}}function C(t,e){if(1&t&&(a.Ub(0,"mat-option",19),a.Ub(1,"div",16),a.Ub(2,"span"),a.Kc(3),a.kc(4,"titlecase"),a.Tb(),a.Ic(5,_,1,1,"img",17),a.Tb(),a.Tb()),2&t){const t=e.$implicit,i=a.jc(2);a.pc("value",t),a.Bb(3),a.Lc(a.lc(4,3,t)),a.Bb(2),a.pc("ngIf",i.imagebase)}}function w(t,e){if(1&t){const t=a.Vb();a.Ub(0,"div",9),a.Ub(1,"div",10),a.Ub(2,"mat-form-field"),a.Ub(3,"mat-label"),a.Kc(4,"Katapult Ziel"),a.Tb(),a.Ub(5,"mat-select",11,12),a.fc("valueChange",(function(){a.zc(t);const e=a.xc(6);return a.jc().input(e.value,"cataTarget")})),a.Ic(7,T,6,4,"mat-select-trigger",13),a.Ub(8,"mat-option",14),a.Kc(9,"Default"),a.Tb(),a.Ic(10,C,6,5,"mat-option",15),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&t){const t=a.jc();a.Bb(7),a.pc("ngIf","///DEFAULT///"!==t.formControl.value.cataTarget),a.Bb(3),a.pc("ngForOf",t.buildings)}}const U=function(t,e){return{spread:t,row:e}};let B=(()=>{class t{constructor(t,e){this.breakpointObserver=t,this.web=e,this.forceVertical=!1,this.hideCataTarget=!1,this.units=[],this.buildings=[],this.formControl=new n.e({cataTarget:"///DEFAULT///"}),this.isHandset$=this.breakpointObserver.observe("(max-width: 839.99px) and (orientation: portrait), (max-width: 1279.99px) and (orientation: landscape)").pipe(Object(o.a)(t=>t.matches),Object(c.a)()),this.propagateChange=t=>{}}ngOnInit(){console.log(s.b.Handset),this.web.infoObservable.subscribe(t=>{this.units=t.units,this.imagebase=t.imageBase,this.buildings=t.buildings}),this.units.forEach(t=>{const e={};e[t]="0",this.formControl.patchValue(e)}),this.formControl.valueChanges.subscribe(t=>{this.propagateChange(t)})}input(t,e){const i={};i[e]=t,this.formControl.setValue(Object.assign(Object.assign({},this.formControl.value),i))}get cata(){return this.formControl.value.catapult&&"0"!==this.formControl.value.catapult}writeValue(t){null==t&&(t={cataTarget:"///DEFAULT///"}),this.formControl.setValue(t),setTimeout(()=>{void 0!==this.select&&(this.select.value=t.cataTarget),this.units.forEach(e=>{const i=document.getElementById("troop_input_"+e);null!==i&&t.hasOwnProperty(e)&&(i.value=t[e])})},10)}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){}setDisabledState(t){t?this.formControl.disable():this.formControl.enable()}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(s.a),a.Ob(l.a))},t.\u0275cmp=a.Ib({type:t,selectors:[["app-units-input"]],viewQuery:function(t,e){var i;1&t&&a.Pc(r.a,!0),2&t&&a.wc(i=a.gc())&&(e.select=i.first)},inputs:{forceVertical:"forceVertical",hideCataTarget:"hideCataTarget"},features:[a.Ab([{provide:n.l,multi:!0,useExisting:Object(a.V)(()=>t)}])],decls:5,vars:10,consts:[[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"full-width"],["matInput","","type","text",3,"id","change"],["t",""],["mat-button","","matSuffix","","mat-icon-button","",3,"click"],["class","img-fluid",3,"src",4,"ngIf"],[1,"img-fluid",3,"src"],[1,"row"],[1,"col-12"],[3,"valueChange"],["select",""],[4,"ngIf"],["value","///DEFAULT///"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-between"],["matSuffix","","class","img-fluid",3,"src",4,"ngIf"],["matSuffix","",1,"img-fluid",3,"src"],[3,"value"]],template:function(t,e){1&t&&(a.Ub(0,"div",0),a.kc(1,"async"),a.kc(2,"async"),a.Ic(3,g,10,10,"span",1),a.Tb(),a.Ic(4,w,11,2,"div",2)),2&t&&(a.pc("ngClass",a.uc(7,U,!(e.forceVertical||!0===a.lc(1,3,e.isHandset$)),e.forceVertical||!0===a.lc(2,5,e.isHandset$))),a.Bb(3),a.pc("ngForOf",e.units),a.Bb(1),a.pc("ngIf",e.cata&&!e.hideCataTarget))},directives:[d.l,d.m,d.n,b.b,b.f,u.b,m.a,b.g,r.a,p.l,r.c],pipes:[d.b,d.w],styles:[".full-width[_ngcontent-%COMP%]{width:99%}.less-pad[_ngcontent-%COMP%]{padding-right:3px}div.spread[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}div.spread[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:table-cell;text-align:center}"]}),t})()},yPrK:function(t,e,i){"use strict";i.r(e),i.d(e,"SettingsModule",(function(){return V}));var a=i("ofXK"),n=i("tyNb"),s=i("fXoL");let o=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Ib({type:t,selectors:[["app-settings"]],decls:1,vars:0,template:function(t,e){1&t&&s.Pb(0,"router-outlet")},directives:[n.f],encapsulation:2}),t})();var c=i("OaSA"),r=i("3Pt+"),l=i("5za1"),d=i("PDjf"),b=i("Q2Ze"),u=i("e6WT"),m=i("FKr1"),p=i("u47x"),f=i("8LU1"),h=i("R1ws");let g=0;class v{}const T=Object(m.x)(v);let _=(()=>{class t extends T{constructor(t,e,i,a,n){super(),this._ngZone=t,this._elementRef=e,this._ariaDescriber=i,this._renderer=a,this._animationMode=n,this._hasContent=!1,this._color="primary",this._overlap=!0,this.position="above after",this.size="medium",this._id=g++}get color(){return this._color}set color(t){this._setColor(t),this._color=t}get overlap(){return this._overlap}set overlap(t){this._overlap=Object(f.c)(t)}get description(){return this._description}set description(t){if(t!==this._description){const e=this._badgeElement;this._updateHostAriaDescription(t,this._description),this._description=t,e&&(t?e.setAttribute("aria-label",t):e.removeAttribute("aria-label"))}}get hidden(){return this._hidden}set hidden(t){this._hidden=Object(f.c)(t)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}ngOnChanges(t){const e=t.content;if(e){const t=e.currentValue;this._hasContent=null!=t&&(""+t).trim().length>0,this._updateTextContent()}}ngOnDestroy(){const t=this._badgeElement;t&&(this.description&&this._ariaDescriber.removeDescription(t,this.description),this._renderer.destroyNode&&this._renderer.destroyNode(t))}getBadgeElement(){return this._badgeElement}_updateTextContent(){return this._badgeElement?this._badgeElement.textContent=this._stringifyContent():this._badgeElement=this._createBadgeElement(),this._badgeElement}_createBadgeElement(){const t=this._renderer.createElement("span"),e="mat-badge-active",i="mat-badge-content";return this._clearExistingBadges(i),t.setAttribute("id","mat-badge-content-"+this._id),t.classList.add(i),t.textContent=this._stringifyContent(),"NoopAnimations"===this._animationMode&&t.classList.add("_mat-animation-noopable"),this.description&&t.setAttribute("aria-label",this.description),this._elementRef.nativeElement.appendChild(t),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{t.classList.add(e)})}):t.classList.add(e),t}_updateHostAriaDescription(t,e){const i=this._updateTextContent();e&&this._ariaDescriber.removeDescription(i,e),t&&this._ariaDescriber.describe(i,t)}_setColor(t){if(t!==this._color){const e=this._elementRef.nativeElement.classList;this._color&&e.remove("mat-badge-"+this._color),t&&e.add("mat-badge-"+t)}}_clearExistingBadges(t){const e=this._elementRef.nativeElement;let i=e.children.length;for(;i--;){const a=e.children[i];a.classList.contains(t)&&e.removeChild(a)}}_stringifyContent(){const t=this.content;return null==t?"":""+t}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(s.B),s.Ob(s.l),s.Ob(p.c),s.Ob(s.G),s.Ob(h.a,8))},t.\u0275dir=s.Jb({type:t,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(t,e){2&t&&s.Gb("mat-badge-overlap",e.overlap)("mat-badge-above",e.isAbove())("mat-badge-below",!e.isAbove())("mat-badge-before",!e.isAfter())("mat-badge-after",e.isAfter())("mat-badge-small","small"===e.size)("mat-badge-medium","medium"===e.size)("mat-badge-large","large"===e.size)("mat-badge-hidden",e.hidden||!e._hasContent)("mat-badge-disabled",e.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],position:["matBadgePosition","position"],size:["matBadgeSize","size"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],description:["matBadgeDescription","description"],hidden:["matBadgeHidden","hidden"],content:["matBadge","content"]},features:[s.yb,s.zb]}),t})(),C=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[p.a,m.i],m.i]}),t})();var w=i("38Pe"),U=i("bTqV"),B=i("k2HR");function O(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",22),s.fc("click",(function(){s.zc(t);const e=s.jc();return e.edit(e.form.value)})),s.Kc(1," Bearbeiten. "),s.Tb()}if(2&t){const t=s.jc();s.pc("disabled",!t.form.valid)}}function y(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",23),s.fc("click",(function(){return s.zc(t),s.jc().delete()})),s.Kc(1," L\xf6schen. "),s.Tb()}}function I(t,e){1&t&&(s.Ub(0,"th",24),s.Kc(1," Name"),s.Tb())}function x(t,e){if(1&t&&(s.Ub(0,"td",25),s.Kc(1),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.Mc(" ",t.name," ")}}function D(t,e){1&t&&(s.Ub(0,"th",24),s.Kc(1," Einheiten"),s.Tb())}function j(t,e){if(1&t&&(s.Ub(0,"td",25),s.Pb(1,"app-units-render",26),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.pc("value",t.troops)}}function E(t,e){1&t&&s.Pb(0,"tr",27)}function k(t,e){if(1&t){const t=s.Vb();s.Ub(0,"tr",28),s.fc("click",(function(){s.zc(t);const i=e.$implicit;return s.jc().select(i)})),s.Tb()}}const A=[{path:"",component:o,children:[{path:"troops",component:(()=>{class t{constructor(t,e){this.command=t,this.fb=e,this.dataSource=new c.k,this.columnsToDisplay=["name","troops"],this.form=this.fb.group({name:["",r.u.required],troops:[{},r.u.required]})}ngOnInit(){this.command.getTroopTemplates().subscribe(t=>{this.dataSource.data=t})}add(t){this.command.addTroopTemplate(t.name,t.troops).subscribe(t=>{this.dataSource.data=[...this.dataSource.data,t]})}edit(t){this.command.editTroopTemplate(this.selected.id,t.name,t.troops).subscribe(t=>{this.dataSource.data=this.dataSource.data.filter((t,e,i)=>t.id!==this.selected.id),this.dataSource.data=[...this.dataSource.data,t]})}delete(){this.command.deleteTroopTemplate(this.selected.id),this.dataSource.data=this.dataSource.data.filter((t,e,i)=>t.id!==this.selected.id),this.selected=void 0}select(t){this.selected=t,this.form.setValue({name:t.name,troops:t.troops})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(l.a),s.Ob(r.d))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-troop-template"]],decls:33,vars:7,consts:[[1,"row"],[1,"col-md-7"],[3,"formGroup"],[1,"form-group","row"],["for","name",1,"label","col-sm-3","col-form-label"],[1,"col-sm-9"],[1,"example-full-width"],["id","name","matInput","","placeholder","Name","formControlName","name","matBadge","i",1,"example-full-width"],["for","troops",1,"label","col-sm-3","col-form-label"],["forceVertical","true","id","troops","formControlName","troops"],[1,"offset-sm-3","col-sm-9"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","info",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","danger",3,"click",4,"ngIf"],[1,"col-md-5",2,"max-height","650px"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","troops"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","style","cursor: pointer",3,"click",4,"matRowDef","matRowDefColumns"],["mat-raised-button","","color","info",3,"disabled","click"],["mat-raised-button","","color","danger",3,"click"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["mat-header-row",""],["mat-row","",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card"),s.Ub(3,"mat-card-content"),s.Ub(4,"form",2),s.Ub(5,"div",3),s.Ub(6,"label",4),s.Kc(7,"Name"),s.Tb(),s.Ub(8,"div",5),s.Ub(9,"mat-form-field",6),s.Pb(10,"input",7),s.Tb(),s.Tb(),s.Tb(),s.Ub(11,"div",3),s.Ub(12,"label",8),s.Kc(13,"Einheiten"),s.Tb(),s.Ub(14,"div",5),s.Pb(15,"app-units-input",9),s.Tb(),s.Tb(),s.Ub(16,"div",3),s.Ub(17,"div",10),s.Ub(18,"button",11),s.fc("click",(function(){return e.add(e.form.value)})),s.Kc(19," Hinzuf\xfcgen. "),s.Tb(),s.Ic(20,O,2,1,"button",12),s.Ic(21,y,2,0,"button",13),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(22,"div",14),s.Ub(23,"mat-card"),s.Ub(24,"table",15),s.Sb(25,16),s.Ic(26,I,2,0,"th",17),s.Ic(27,x,2,1,"td",18),s.Rb(),s.Sb(28,19),s.Ic(29,D,2,0,"th",17),s.Ic(30,j,2,1,"td",18),s.Rb(),s.Ic(31,E,1,0,"tr",20),s.Ic(32,k,1,0,"tr",21),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.Bb(4),s.pc("formGroup",e.form),s.Bb(14),s.pc("disabled",!e.form.valid),s.Bb(2),s.pc("ngIf",e.selected),s.Bb(1),s.pc("ngIf",e.selected),s.Bb(3),s.pc("dataSource",e.dataSource),s.Bb(7),s.pc("matHeaderRowDef",e.columnsToDisplay),s.Bb(1),s.pc("matRowDefColumns",e.columnsToDisplay))},directives:[d.a,d.b,r.w,r.o,r.h,b.b,u.b,r.c,r.n,r.g,_,w.a,U.a,a.n,c.j,c.c,c.e,c.b,c.g,c.i,c.d,c.a,B.a,c.f,c.h],styles:["button[_ngcontent-%COMP%] + button[_ngcontent-%COMP%]{margin-left:10px}"]}),t})()}]}];let P=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[n.e.forChild(A)],n.e]}),t})();var S=i("BLWB");let V=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[a.c,P,U.b,S.a,d.d,c.l,r.s,b.d,u.c,C]]}),t})()}}]);