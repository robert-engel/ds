(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{ij7s:function(e,t,i){"use strict";i.r(t),i.d(t,"AutoDefenderModule",(function(){return B}));var n=i("ofXK"),s=i("tyNb"),c=i("XNiG"),o=i("1G5W"),r=i("fXoL"),a=i("M9ds"),b=i("PDjf");const u=function(e){return[e]};function l(e,t){if(1&e){const e=r.Vb();r.Ub(0,"span",2),r.fc("click",(function(){r.Ac(e);const i=t.$implicit;return r.jc().activeLink=i})),r.Lc(1),r.Tb()}if(2&e){const e=t.$implicit,i=r.jc();r.pc("active",i.activeLink===e)("routerLink",r.tc(3,u,e.link)),r.Bb(1),r.Nc(" ",e.title," ")}}let f=(()=>{class e{constructor(e){this.router=e,this.links=[{title:"Home",link:"/defender"}],this.activeLink=this.links[0],this.unsub$=new c.b}ngOnInit(){this.setActive(),this.router.events.pipe(Object(o.a)(this.unsub$)).subscribe(e=>{this.setActive()})}setActive(){for(const e of this.links)this.router.isActive(e.link,!1)&&(this.activeLink=e)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Ob(s.c))},e.\u0275cmp=r.Ib({type:e,selectors:[["app-auto-defender"]],decls:4,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(e,t){1&e&&(r.Ub(0,"nav",0),r.Jc(1,l,2,5,"span",1),r.Tb(),r.Ub(2,"mat-card"),r.Pb(3,"router-outlet"),r.Tb()),2&e&&(r.Bb(1),r.pc("ngForOf",t.links))},directives:[a.b,n.l,b.a,s.g,a.a,s.d],encapsulation:2}),e})();var d=i("3Pt+");class h{getName(){return"GetAutoDefenderConfigRequest"}}var p=i("SxV6");class m{getName(){return"GetAutoDefenderSubFeaturesRequest"}}class g{constructor(e,t){this.feature=e.id,this.enabled=t}getName(){return"io.robertengel.dsbot.feature.autodefender.ws.packet.incoming.EnableAutoDefenderFeatureRequest"}}class v{constructor(e,t,i){this.feature=e.id,this.size=t,this.amount=i}getName(){return"io.robertengel.dsbot.feature.autodefender.ws.packet.incoming.SetAutoDefenderDefenseRequest"}}var k=i("7nMs");let w=(()=>{class e{constructor(e){this.web=e}getConfig(e){return this.web.observable("AutoDefenderConfigResponse",new h).pipe(Object(o.a)(e))}getFeatures(){return this.web.observable("AutoDefenderSubFeatureResponse",new m).pipe(Object(p.a)())}setEnabled(e,t){this.web.sendData(new g(e,t))}setDefense(e,t,i){this.web.sendData(new v(e,t,i))}}return e.\u0275fac=function(t){return new(t||e)(r.cc(k.a))},e.\u0275prov=r.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var T=i("jMqV"),O=i("o4Yh"),U=i("TIdL"),D=i("pMoy"),L=i("bTqV");const j=function(){return["axe","light","ram","catapult","snob"]};function N(e,t){if(1&e){const e=r.Vb();r.Ub(0,"mat-expansion-panel"),r.Ub(1,"mat-expansion-panel-header"),r.Lc(2),r.kc(3,"titlecase"),r.Tb(),r.Ub(4,"div"),r.Ub(5,"form",6),r.Ub(6,"div",7),r.Ub(7,"div",8),r.Pb(8,"app-units-holder-input",9),r.Tb(),r.Ub(9,"div",8),r.Ub(10,"mat-checkbox",10),r.Lc(11,"Selbe Verteidigung mit anderen Truppen erlauben. "),r.Tb(),r.Tb(),r.Ub(12,"div",8),r.Ub(13,"button",11),r.fc("click",(function(){r.Ac(e);const i=t.$implicit,n=r.jc().$implicit,s=r.jc(2);return s.setDefense(n,i,s.block[n.id][i].value)})),r.Lc(14," Speichern "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()}if(2&e){const e=t.$implicit,i=r.jc().$implicit,n=r.jc(2);r.Bb(2),r.Nc(" ",r.lc(3,4,e)," "),r.Bb(3),r.pc("formGroup",n.block[i.id][e]),r.Bb(3),r.pc("excludeUnits",r.sc(6,j)),r.Bb(5),r.pc("disabled",n.block[i.id][e].disabled)}}function $(e,t){if(1&e&&(r.Ub(0,"mat-card",2),r.Ub(1,"mat-card-title"),r.Ub(2,"div",3),r.Ub(3,"span"),r.Lc(4),r.Tb(),r.Pb(5,"mat-slide-toggle",4),r.Tb(),r.Tb(),r.Ub(6,"mat-card-subtitle"),r.Lc(7),r.Tb(),r.Ub(8,"mat-card-content"),r.Ub(9,"mat-accordion"),r.Jc(10,N,15,7,"mat-expansion-panel",5),r.Tb(),r.Tb(),r.Tb()),2&e){const e=t.$implicit,i=r.jc(2);r.Bb(4),r.Mc(e.name),r.Bb(1),r.pc("formControl",i.enabled[e.id]),r.Bb(2),r.Mc(e.description),r.Bb(3),r.pc("ngForOf",i.sizes)}}function A(e,t){if(1&e&&(r.Sb(0),r.Jc(1,$,11,4,"mat-card",1),r.Rb()),2&e){const e=r.jc();r.Bb(1),r.pc("ngForOf",e.features)}}const F=[{path:"",component:f,children:[{path:"",pathMatch:"full",component:(()=>{class e{constructor(e,t){this.service=e,this.fb=t,this.unsub$=new c.b,this.features=[],this.sizes=["UNKNOWN","GREEN","ORANGE","RED"],this.enabled={},this.block={}}ngOnInit(){this.service.getFeatures().subscribe(e=>{this.features=e,this.service.getConfig(this.unsub$).subscribe(e=>{this.config?(this.config=e,this.update()):(this.config=e,this.initialize())})})}initialize(){for(const e of this.features){this.enabled[e.id]=new d.e(this.config.enabled[e.id]),this.enabled[e.id].valueChanges.subscribe(t=>{this.service.setEnabled(e,t)}),this.block[e.id]={};for(const t of this.sizes)this.block[e.id][t]=this.fb.group({units:this.config.block[e.id][t].units,allowOther:this.config.block[e.id][t].allowOther})}}update(){for(const e of this.features){this.enabled[e.id].setValue(this.config.enabled[e.id],{emitEvent:!1});for(const t of this.sizes)this.block[e.id][t].setValue({units:this.config.block[e.id][t].units,allowOther:this.config.block[e.id][t].allowOther})}}setDefense(e,t,i){this.block[e.id][t].disable(),this.service.setDefense(e,t,i),setTimeout(()=>{this.block[e.id][t].enable()},500)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Ob(w),r.Ob(d.d))},e.\u0275cmp=r.Ib({type:e,selectors:[["app-auto-defender-overview"]],decls:1,vars:1,consts:[[4,"ngIf"],["class","mat-elevation-z6",4,"ngFor","ngForOf"],[1,"mat-elevation-z6"],[1,"w-100","flex-between"],[3,"formControl"],[4,"ngFor","ngForOf"],[3,"formGroup"],[1,"row"],[1,"col-xl-12"],["formControlName","units",3,"excludeUnits"],["formControlName","allowOther"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&r.Jc(0,A,2,1,"ng-container",0),2&e&&r.pc("ngIf",t.config)},directives:[n.m,n.l,b.a,b.h,T.a,d.o,d.f,b.g,b.c,O.a,O.c,O.d,d.x,d.p,d.i,U.a,d.g,D.a,L.a],pipes:[n.v],styles:[""]}),e})()}]}];let x=(()=>{class e{}return e.\u0275mod=r.Mb({type:e}),e.\u0275inj=r.Lb({factory:function(t){return new(t||e)},imports:[[s.f.forChild(F)],s.f]}),e})();var y=i("BLWB");let B=(()=>{class e{}return e.\u0275mod=r.Mb({type:e}),e.\u0275inj=r.Lb({factory:function(t){return new(t||e)},imports:[[n.c,x,b.f,a.c,T.b,O.b,y.a,D.b,d.t,L.b]]}),e})()}}]);