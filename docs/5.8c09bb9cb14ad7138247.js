(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"38Pe":function(t,e,i){"use strict";i.d(e,"a",(function(){return j}));var n=i("fXoL"),c=i("3Pt+"),a=i("lJxs"),s=i("UXun"),l=i("ZTz/"),o=i("DNTf"),r=i("0MNC"),u=i("7nMs"),b=i("ofXK"),f=i("Q2Ze"),p=i("e6WT"),g=i("bTqV"),h=i("FKr1");function m(t,e){if(1&t&&n.Pb(0,"img",8),2&t){const t=n.jc().$implicit,e=n.jc();n.pc("src",e.imagebase+"unit/unit_"+t+".png",n.Cc)}}const d=function(t,e){return{"col-xl-12":t,pad:e}};function v(t,e){if(1&t){const t=n.Vb();n.Ub(0,"span",0),n.kc(1,"async"),n.kc(2,"async"),n.Ub(3,"mat-form-field",3),n.Ub(4,"mat-label"),n.Lc(5),n.kc(6,"titlecase"),n.Tb(),n.Ub(7,"input",4,5),n.fc("change",(function(){n.Ac(t);const i=e.$implicit,c=n.xc(8);return n.jc().input(c.value,i)})),n.Tb(),n.Ub(9,"button",6),n.fc("click",(function(i){n.Ac(t);const c=e.$implicit,a=n.xc(8),s=n.jc();return i.preventDefault(),s.input("alle",c),a.value="alle"})),n.Jc(10,m,1,1,"img",7),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=e.$implicit,i=n.jc();n.pc("ngClass",n.uc(10,d,i.forceVertical||!0===n.lc(1,4,i.isHandset$),!(i.forceVertical||!0===n.lc(2,6,i.isHandset$)))),n.Bb(5),n.Mc(n.lc(6,8,t)),n.Bb(2),n.pc("id","troop_input_"+t),n.Bb(3),n.pc("ngIf",i.imagebase)}}function C(t,e){if(1&t&&n.Pb(0,"img",18),2&t){const t=n.jc(3);n.pc("src",t.imagebase+"buildings/"+t.formControl.value.cataTarget+".png",n.Cc)}}function w(t,e){if(1&t&&(n.Ub(0,"mat-select-trigger"),n.Ub(1,"div",16),n.Ub(2,"span"),n.Lc(3),n.kc(4,"titlecase"),n.Tb(),n.Jc(5,C,1,1,"img",17),n.Tb(),n.Tb()),2&t){const t=n.jc(2);n.Bb(3),n.Mc(n.lc(4,2,t.formControl.value.cataTarget)),n.Bb(2),n.pc("ngIf",t.imagebase)}}function T(t,e){if(1&t&&n.Pb(0,"img",18),2&t){const t=n.jc().$implicit,e=n.jc(2);n.pc("src",e.imagebase+"buildings/"+t+".png",n.Cc)}}function O(t,e){if(1&t&&(n.Ub(0,"mat-option",19),n.Ub(1,"div",16),n.Ub(2,"span"),n.Lc(3),n.kc(4,"titlecase"),n.Tb(),n.Jc(5,T,1,1,"img",17),n.Tb(),n.Tb()),2&t){const t=e.$implicit,i=n.jc(2);n.pc("value",t),n.Bb(3),n.Mc(n.lc(4,3,t)),n.Bb(2),n.pc("ngIf",i.imagebase)}}function U(t,e){if(1&t){const t=n.Vb();n.Ub(0,"div",9),n.Ub(1,"div",10),n.Ub(2,"mat-form-field"),n.Ub(3,"mat-label"),n.Lc(4,"Katapult Ziel"),n.Tb(),n.Ub(5,"mat-select",11,12),n.fc("valueChange",(function(){n.Ac(t);const e=n.xc(6);return n.jc().input(e.value,"cataTarget")})),n.Jc(7,w,6,4,"mat-select-trigger",13),n.Ub(8,"mat-option",14),n.Lc(9,"Default"),n.Tb(),n.Jc(10,O,6,5,"mat-option",15),n.Tb(),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.jc();n.Bb(7),n.pc("ngIf","///DEFAULT///"!==t.formControl.value.cataTarget),n.Bb(3),n.pc("ngForOf",t.buildings)}}const y=function(t,e){return{spread:t,row:e}};let j=(()=>{class t{constructor(t,e){this.breakpointObserver=t,this.web=e,this.forceVertical=!1,this.hideCataTarget=!1,this.excludeUnits=[],this.units=[],this.buildings=[],this.formControl=new c.e({cataTarget:"///DEFAULT///"}),this.isHandset$=this.breakpointObserver.observe(o.a).pipe(Object(a.a)(t=>t.matches),Object(s.a)()),this.propagateChange=t=>{}}ngOnInit(){this.web.infoObservable.subscribe(t=>{this.units=t.units,this.units=this.units.filter(t=>!this.excludeUnits.includes(t)),this.imagebase=t.imageBase,this.buildings=t.buildings}),this.units.forEach(t=>{const e={};e[t]="0",this.formControl.patchValue(e)}),this.formControl.valueChanges.subscribe(t=>{this.propagateChange(t)})}input(t,e){const i={};i[e]=t,this.formControl.setValue(Object.assign(Object.assign({},this.formControl.value),i))}get cata(){return this.formControl.value.catapult&&"0"!==this.formControl.value.catapult}writeValue(t){null==t&&(t={cataTarget:"///DEFAULT///"}),this.formControl.setValue(t),setTimeout(()=>{void 0!==this.select&&(this.select.value=t.cataTarget),this.units.forEach(e=>{const i=document.getElementById("troop_input_"+e);null!==i&&t.hasOwnProperty(e)&&(i.value=t[e])})},10)}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){}setDisabledState(t){t?this.formControl.disable():this.formControl.enable()}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(r.a),n.Ob(u.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-units-input"]],viewQuery:function(t,e){var i;1&t&&n.Rc(l.a,!0),2&t&&n.wc(i=n.gc())&&(e.select=i.first)},inputs:{forceVertical:"forceVertical",hideCataTarget:"hideCataTarget",excludeUnits:"excludeUnits"},features:[n.Ab([{provide:c.m,multi:!0,useExisting:Object(n.V)(()=>t)}])],decls:5,vars:10,consts:[[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"full-width"],["matInput","","type","text",3,"id","change"],["t",""],["mat-button","","matSuffix","","mat-icon-button","",3,"click"],["class","img-fluid",3,"src",4,"ngIf"],[1,"img-fluid",3,"src"],[1,"row"],[1,"col-12"],[3,"valueChange"],["select",""],[4,"ngIf"],["value","///DEFAULT///"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-between"],["matSuffix","","class","img-fluid",3,"src",4,"ngIf"],["matSuffix","",1,"img-fluid",3,"src"],[3,"value"]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.kc(1,"async"),n.kc(2,"async"),n.Jc(3,v,11,13,"span",1),n.Tb(),n.Jc(4,U,11,2,"div",2)),2&t&&(n.pc("ngClass",n.uc(7,y,!(e.forceVertical||!0===n.lc(1,3,e.isHandset$)),e.forceVertical||!0===n.lc(2,5,e.isHandset$))),n.Bb(3),n.pc("ngForOf",e.units),n.Bb(1),n.pc("ngIf",e.cata&&!e.hideCataTarget))},directives:[b.k,b.l,b.m,f.b,f.f,p.b,g.a,f.g,l.a,h.n,l.c],pipes:[b.b,b.v],styles:[".full-width[_ngcontent-%COMP%]{width:99%}.pad[_ngcontent-%COMP%]{padding-left:6px;padding-right:6px}div.spread[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}div.spread[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:table-cell;text-align:center}"]}),t})()},"7Ixi":function(t,e,i){"use strict";i.d(e,"a",(function(){return v}));var n=i("fXoL"),c=i("3Pt+"),a=i("LRne"),s=i("Kj3r"),l=i("eIep"),o=i("YWTT"),r=i("Q2Ze"),u=i("e6WT"),b=i("vrAh"),f=i("ofXK"),p=i("bTqV"),g=i("NFeN"),h=i("FKr1");function m(t,e){if(1&t){const t=n.Vb();n.Ub(0,"button",6),n.fc("click",(function(){return n.Ac(t),n.jc().formControl.reset()})),n.Ub(1,"mat-icon"),n.Lc(2,"close"),n.Tb(),n.Tb()}}function d(t,e){if(1&t&&(n.Ub(0,"mat-option",7),n.Ub(1,"span"),n.Lc(2),n.Tb(),n.Ub(3,"small"),n.Lc(4),n.Tb(),n.Tb()),2&t){const t=e.$implicit;n.pc("value",t),n.Bb(2),n.Mc(t.search),n.Bb(2),n.Nc(" | Punkte: ",t.points,"")}}let v=(()=>{class t{constructor(t){this.villageService=t,this.label="Dorf",this.showClear=!1,this.onlyOwn=!1,this.formControl=new c.e("",t=>null==t.value||!t.value.id||"number"!=typeof t.value.id||t.value.id<0?{source:!0}:null),this.propagateChange=t=>{}}ngOnInit(){this.formControl.valueChanges.subscribe(t=>{this.propagateChange(t)})}writeValue(t){this.formControl.setValue(t)}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){}setDisabledState(t){t?this.formControl.disable():this.formControl.enable()}displayFn(t){return t?t.search:""}ngAfterViewInit(){this.villages$=this.formControl.valueChanges.pipe(Object(s.a)(300),Object(l.a)(t=>"string"==typeof t?this.villageService.searchVillages(t,this.onlyOwn):"object"==typeof t&&null!==t?this.villageService.searchVillages(t.search,this.onlyOwn):Object(a.a)(void 0)))}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(o.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-village-input"]],inputs:{label:"label",showClear:"showClear",onlyOwn:"onlyOwn"},features:[n.Ab([{provide:c.m,multi:!0,useExisting:Object(n.V)(()=>t)},{provide:c.l,useValue:t=>null==t.value||!t.value.id||"number"!=typeof t.value.id||t.value.id<0?{source:!0}:null,multi:!0}])],decls:7,vars:8,consts:[[1,"full-width"],["autocomplete","off","autocapitalize","off","spellcheck","false","matInput","",1,"full-width",3,"placeholder","matAutocomplete","formControl"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["panelWidth","450px",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"]],template:function(t,e){if(1&t&&(n.Ub(0,"mat-form-field",0),n.Pb(1,"input",1),n.Jc(2,m,3,0,"button",2),n.Tb(),n.Ub(3,"mat-autocomplete",3,4),n.Jc(5,d,5,3,"mat-option",5),n.kc(6,"async"),n.Tb()),2&t){const t=n.xc(4);n.Bb(1),n.pc("placeholder",e.label)("matAutocomplete",t)("formControl",e.formControl),n.Bb(1),n.pc("ngIf",e.showClear&&e.formControl.value),n.Bb(1),n.pc("displayWith",e.displayFn),n.Bb(2),n.pc("ngForOf",n.lc(6,6,e.villages$))}},directives:[r.b,u.b,b.c,c.c,c.o,c.f,f.m,b.a,f.l,p.a,r.g,g.a,h.n],pipes:[f.b],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]}),t})()},DNTf:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));const n="(max-width: 1100.99px)"},YWTT:function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));class n{constructor(t,e){this.id=Math.random(),this.query=t,this.onlyOwn=e}getName(){return"io.robertengel.dsbot.feature.village.ws.packet.incoming.VillageSearchRequest"}}var c=i("pLZG"),a=i("SxV6"),s=i("lJxs");class l{constructor(t){this.id=t}getName(){return"io.robertengel.dsbot.feature.village.ws.packet.incoming.GetVillageByIdRequest"}}class o{constructor(t){this.id=Math.random(),this.paste=t}getName(){return"io.robertengel.dsbot.feature.village.ws.packet.incoming.VillageCoordPasteRequest"}}var r=i("fXoL"),u=i("7nMs");let b=(()=>{class t{constructor(t){this.web=t}searchVillages(t,e=!1){const i=new n(t,e);return this.web.observable("VillageSearchResponse",i).pipe(Object(c.a)(t=>t.id===i.id),Object(a.a)(),Object(s.a)(t=>t.villages))}coordPaste(t){const e=new o(t);return this.web.observable("VillageSearchResponse",e).pipe(Object(c.a)(t=>t.id===e.id),Object(a.a)(),Object(s.a)(t=>t.villages))}byId(t){return this.web.observable("VillageResponse",new l(t)).pipe(Object(c.a)(e=>e.id===t),Object(a.a)())}}return t.\u0275fac=function(e){return new(e||t)(r.cc(u.a))},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},hC39:function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i("fXoL"),c=i("7nMs"),a=i("ofXK"),s=i("f44v");function l(t,e){if(1&t&&n.Pb(0,"img",3),2&t){const t=n.jc(2).$implicit,e=n.jc(2);n.pc("src",e.imagebase+"unit/unit_"+t+".png",n.Cc)}}function o(t,e){if(1&t&&(n.Ub(0,"mat-chip"),n.Lc(1),n.Jc(2,l,1,1,"img",2),n.Tb()),2&t){const t=n.jc().$implicit,e=n.jc(2);n.Bb(1),n.Nc(" ",e.value[t]," "),n.Bb(1),n.pc("ngIf",e.imagebase)}}function r(t,e){if(1&t&&(n.Sb(0),n.Jc(1,o,3,2,"mat-chip",0),n.Rb()),2&t){const t=e.$implicit,i=n.jc(2);n.Bb(1),n.pc("ngIf","0"!==i.value[t]&&0!==i.value[t])}}function u(t,e){if(1&t&&(n.Ub(0,"mat-chip-list"),n.Jc(1,r,2,1,"ng-container",1),n.Tb()),2&t){const t=n.jc();n.Bb(1),n.pc("ngForOf",t.units)}}let b=(()=>{class t{constructor(t){this.web=t,this.excludeUnits=[]}ngOnInit(){this.web.infoObservable.subscribe(t=>{this.units=t.units,this.units=this.units.filter(t=>!this.excludeUnits.includes(t)),this.imagebase=t.imageBase})}get empty(){for(const t of this.units)if("0"!==this.value[t]&&0!==this.value[t])return!1;return!0}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(c.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-units-render-min"]],inputs:{value:"value",excludeUnits:"excludeUnits"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["class","img-fluid ml-1",3,"src",4,"ngIf"],[1,"img-fluid","ml-1",3,"src"]],template:function(t,e){1&t&&n.Jc(0,u,2,1,"mat-chip-list",0),2&t&&n.pc("ngIf",!e.empty)},directives:[a.m,s.b,a.l,s.a],styles:[""]}),t})()},irRR:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("fXoL"),c=i("7nMs"),a=i("ofXK");function s(t,e){if(1&t){const t=n.Vb();n.Ub(0,"a",2),n.fc("click",(function(e){return n.Ac(t),e.stopPropagation()})),n.Lc(1),n.Pb(2,"br"),n.Tb()}if(2&t){const t=n.jc(2);n.pc("href",t.link,n.Cc),n.Bb(1),n.Pc(" ",t.value.name," (",t.value.x,"|",t.value.y,")")}}function l(t,e){if(1&t&&(n.Ub(0,"span"),n.Lc(1),n.Pb(2,"br"),n.Tb()),2&t){const t=n.jc(2);n.Bb(1),n.Pc(" ",t.value.name," (",t.value.x,"|",t.value.y,")")}}function o(t,e){if(1&t&&(n.Sb(0),n.Jc(1,s,3,4,"a",1),n.Jc(2,l,3,3,"span",0),n.Ub(3,"small"),n.Lc(4),n.kc(5,"number"),n.Tb(),n.Rb()),2&t){const t=n.jc();n.Bb(1),n.pc("ngIf",t.link),n.Bb(1),n.pc("ngIf",!t.link),n.Bb(2),n.Nc("Punkte: ",n.mc(5,3,t.value.points,"1.0","de"),"")}}let r=(()=>{class t{constructor(t){this.web=t}ngOnInit(){this.web.info().subscribe(t=>{this.world=t.world})}get link(){return this.world&&this.value?"https://"+this.world+".die-staemme.de/game.php?screen=info_village&id="+this.value.id:void 0}navigateTo(t){this.world&&this.value&&(t.stopPropagation(),window.open("https://"+this.world+".die-staemme.de/game.php?screen=info_village&id="+this.value.id,"_blank"))}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(c.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-village-render"]],inputs:{value:"value"},decls:1,vars:1,consts:[[4,"ngIf"],["target","_blank",3,"href","click",4,"ngIf"],["target","_blank",3,"href","click"]],template:function(t,e){1&t&&n.Jc(0,o,6,7,"ng-container",0),2&t&&n.pc("ngIf",e.value)},directives:[a.m],pipes:[a.e],styles:[".link[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]{color:inherit}"]}),t})()}}]);