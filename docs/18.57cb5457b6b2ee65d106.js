(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{MjV7:function(t,e,i){"use strict";i.r(e),i.d(e,"FarmModule",(function(){return $t}));var a=i("ofXK"),n=i("tyNb"),r=i("XNiG"),s=i("1G5W"),o=i("fXoL"),b=i("M9ds");const l=function(t){return[t]};function c(t,e){if(1&t){const t=o.Vb();o.Ub(0,"span",2),o.fc("click",(function(){o.Ac(t);const i=e.$implicit;return o.jc().activeLink=i})),o.Lc(1),o.Tb()}if(2&t){const t=e.$implicit,i=o.jc();o.pc("active",i.activeLink===t)("routerLink",o.tc(3,l,t.link)),o.Bb(1),o.Nc(" ",t.title," ")}}let m=(()=>{class t{constructor(t){this.router=t,this.links=[{title:"Assistent",link:"/farm"},{title:"Routen",link:"/farm/routes"}],this.activeLink=this.links[0],this.unsub$=new r.b}ngOnInit(){this.setActive(),this.router.events.pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.setActive()})}setActive(){for(const t of this.links)this.router.isActive(t.link,!1)&&(this.activeLink=t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(n.c))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-farm"]],decls:3,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(t,e){1&t&&(o.Ub(0,"nav",0),o.Jc(1,c,2,5,"span",1),o.Tb(),o.Pb(2,"router-outlet")),2&t&&(o.Bb(1),o.pc("ngForOf",e.links))},directives:[b.b,a.l,n.g,b.a,n.d],styles:[""]}),t})();var u=i("iELJ"),d=i("3Pt+"),f=i("dXaO"),p=i("Q2Ze"),h=i("ZTz/"),v=i("FKr1"),g=i("mPVK"),T=i("NFeN"),U=i("ZFy/"),w=i("TIdL"),C=i("bTqV");let k=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.fb=e,this.farm=i,this.form=this.fb.group({farmGroup:"A",units:{},timerInterval:30,maxDistance:20}),this.nonFarmUnits=["militia","ram","catapult","snob"]}ngOnInit(){}submit(t){this.form.disable(),this.farm.addEntity(t.farmGroup,t.units,t.timerInterval,t.maxDistance).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(u.g),o.Ob(d.d),o.Ob(f.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-farm-task-add"]],decls:38,vars:3,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"w-100"],["formControlName","farmGroup"],["value","A"],["value","B"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],["for","maxDistance"],["id","maxDistance","formControlName","maxDistance","min","1","max","100","thumbLabel","true",1,"w-100"],["matTooltip","Leer lassen um Gruppe nicht zu \xe4ndern."],["formControlName","units",3,"excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(o.Ub(0,"div",0),o.Ub(1,"div",1),o.Ub(2,"form",2),o.fc("ngSubmit",(function(){return e.submit(e.form.value)})),o.Ub(3,"div",3),o.Ub(4,"div",1),o.Ub(5,"mat-form-field",4),o.Ub(6,"mat-label"),o.Lc(7,"Gruppe"),o.Tb(),o.Ub(8,"mat-select",5),o.Ub(9,"mat-option",6),o.Lc(10,"A"),o.Tb(),o.Ub(11,"mat-option",7),o.Lc(12,"B"),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(13,"div",3),o.Ub(14,"div",8),o.Ub(15,"label",9),o.Lc(16,"Interval (Minuten)"),o.Tb(),o.Tb(),o.Ub(17,"div",10),o.Pb(18,"mat-slider",11),o.Tb(),o.Tb(),o.Ub(19,"div",3),o.Ub(20,"div",8),o.Ub(21,"label",12),o.Lc(22,"Max Entfernung"),o.Tb(),o.Tb(),o.Ub(23,"div",10),o.Pb(24,"mat-slider",13),o.Tb(),o.Tb(),o.Ub(25,"div",3),o.Ub(26,"div",8),o.Ub(27,"label",12),o.Lc(28,"Einheiten "),o.Ub(29,"mat-icon",14),o.Lc(30,"info"),o.Tb(),o.Tb(),o.Tb(),o.Ub(31,"div",10),o.Pb(32,"app-units-holder-input",15),o.Tb(),o.Tb(),o.Ub(33,"div",3),o.Ub(34,"div",16),o.Pb(35,"span"),o.Ub(36,"button",17),o.Lc(37," Hinzuf\xfcgen "),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&t&&(o.Bb(2),o.pc("formGroup",e.form),o.Bb(30),o.pc("excludeUnits",e.nonFarmUnits),o.Bb(4),o.pc("disabled",!e.form.valid||e.form.disabled))},directives:[d.x,d.p,d.i,p.b,p.f,h.a,d.o,d.g,v.n,g.a,T.a,U.a,w.a,C.a],styles:[""]}),t})();var x=i("7Ixi"),L=i("e6WT"),D=i("OaSA"),R=i("irRR");function I(t,e){1&t&&(o.Ub(0,"th",33),o.Lc(1,"Dorf"),o.Tb())}function y(t,e){if(1&t&&(o.Ub(0,"td",34),o.Pb(1,"app-village-render",35),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.pc("value",t)}}function P(t,e){1&t&&o.Pb(0,"th",33)}function B(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",34),o.Ub(1,"button",36),o.fc("click",(function(){o.Ac(t);const i=e.$implicit;return o.jc(2).removeVillage(i.id)})),o.Ub(2,"mat-icon"),o.Lc(3,"delete"),o.Tb(),o.Tb(),o.Tb()}}function O(t,e){1&t&&o.Pb(0,"tr",37)}function S(t,e){1&t&&o.Pb(0,"tr",38)}function J(t,e){if(1&t&&(o.Ub(0,"div",25),o.Ub(1,"table",26),o.Sb(2,27),o.Jc(3,I,2,0,"th",28),o.Jc(4,y,2,1,"td",29),o.Rb(),o.Sb(5,30),o.Jc(6,P,1,0,"th",28),o.Jc(7,B,4,0,"td",29),o.Rb(),o.Jc(8,O,1,0,"tr",31),o.Jc(9,S,1,0,"tr",32),o.Tb(),o.Tb()),2&t){const t=o.jc();o.Bb(1),o.pc("dataSource",t.data.villages),o.Bb(7),o.pc("matHeaderRowDef",t.displayedColumns),o.Bb(1),o.pc("matRowDefColumns",t.displayedColumns)}}let F=(()=>{class t{constructor(t,e,i,a){this.data=t,this.dialogRef=e,this.fb=i,this.farm=a,this.unsub$=new r.b,this.form=this.fb.group({farmGroup:"A",units:{},timerInterval:30,maxDistance:20}),this.villageForm=new d.e("",d.v.required),this.massVillageForm=new d.e("",d.v.required),this.nonFarmUnits=["militia","ram","catapult","snob"],this.displayedColumns=["village","delete"],this.form.setValue({farmGroup:t.farmGroup,units:t.units,timerInterval:t.timerInterval,maxDistance:t.maxDistance})}ngOnInit(){this.farm.villageAddEvent(this.unsub$).subscribe(t=>{t.id===this.data.id&&(this.data.villages=[...this.data.villages,...t.villages])}),this.farm.villageRemoveEvent(this.unsub$).subscribe(t=>{t.id===this.data.id&&(this.data.villages=this.data.villages.filter(e=>!t.villages.includes(e.id)))})}massAdd(){this.farm.massAddVillage(this.data.id,this.massVillageForm.value)}massRemove(){this.farm.massRemoveVillage(this.data.id,this.massVillageForm.value)}addVillage(){this.farm.addVillage(this.data.id,this.villageForm.value.id)}removeVillage(t){this.farm.removeVillage(this.data.id,t)}submit(t){this.form.disable(),this.farm.editEntity(this.data.id,t.farmGroup,t.units,t.timerInterval,t.maxDistance).subscribe(t=>{this.dialogRef.close(t)})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(u.a),o.Ob(u.g),o.Ob(d.d),o.Ob(f.a))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-farm-task-edit"]],decls:56,vars:10,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"w-100"],["formControlName","farmGroup"],["value","A"],["value","B"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],["for","maxDistance"],["id","maxDistance","formControlName","maxDistance","min","1","max","100","thumbLabel","true",1,"w-100"],["matTooltip","Leer lassen um Gruppe nicht zu \xe4ndern."],["formControlName","units",3,"excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"col-xl-6"],[1,"col-md-9"],[3,"formControl","onlyOwn"],["mat-raised-button","","color","primary",3,"disabled","click"],["placeholder","Massen Hinzuf\xfcgen/Entfernen","matInput","",3,"formControl"],["mat-raised-button","","color","primary",1,"mt-1",3,"disabled","click"],["class","col-xl-6 list",4,"ngIf"],[1,"col-xl-6","list"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","village"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["type","button","mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(o.Ub(0,"div",0),o.Ub(1,"div",1),o.Ub(2,"form",2),o.fc("ngSubmit",(function(){return e.submit(e.form.value)})),o.Ub(3,"div",3),o.Ub(4,"div",1),o.Ub(5,"mat-form-field",4),o.Ub(6,"mat-label"),o.Lc(7,"Gruppe"),o.Tb(),o.Ub(8,"mat-select",5),o.Ub(9,"mat-option",6),o.Lc(10,"A"),o.Tb(),o.Ub(11,"mat-option",7),o.Lc(12,"B"),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(13,"div",3),o.Ub(14,"div",8),o.Ub(15,"label",9),o.Lc(16,"Interval (Minuten)"),o.Tb(),o.Tb(),o.Ub(17,"div",10),o.Pb(18,"mat-slider",11),o.Tb(),o.Tb(),o.Ub(19,"div",3),o.Ub(20,"div",8),o.Ub(21,"label",12),o.Lc(22,"Max Entfernung"),o.Tb(),o.Tb(),o.Ub(23,"div",10),o.Pb(24,"mat-slider",13),o.Tb(),o.Tb(),o.Ub(25,"div",3),o.Ub(26,"div",8),o.Ub(27,"label",12),o.Lc(28,"Einheiten "),o.Ub(29,"mat-icon",14),o.Lc(30,"info"),o.Tb(),o.Tb(),o.Tb(),o.Ub(31,"div",10),o.Pb(32,"app-units-holder-input",15),o.Tb(),o.Tb(),o.Ub(33,"div",3),o.Ub(34,"div",16),o.Pb(35,"span"),o.Ub(36,"button",17),o.Lc(37," Bearbeiten "),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Ub(38,"div",0),o.Ub(39,"div",18),o.Ub(40,"div",0),o.Ub(41,"div",19),o.Pb(42,"app-village-input",20),o.Tb(),o.Ub(43,"div",8),o.Ub(44,"button",21),o.fc("click",(function(){return e.addVillage()})),o.Lc(45," Dorf hinzuf\xfcgen. "),o.Tb(),o.Tb(),o.Tb(),o.Ub(46,"div",0),o.Ub(47,"div",19),o.Pb(48,"textarea",22),o.Tb(),o.Ub(49,"div",8),o.Ub(50,"button",21),o.fc("click",(function(){return e.massAdd()})),o.Lc(51," D\xf6rfer hinzuf\xfcgen. "),o.Tb(),o.Pb(52,"br"),o.Ub(53,"button",23),o.fc("click",(function(){return e.massRemove()})),o.Lc(54," D\xf6rfer entfernen. "),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Jc(55,J,10,3,"div",24),o.Tb()),2&t&&(o.Bb(2),o.pc("formGroup",e.form),o.Bb(30),o.pc("excludeUnits",e.nonFarmUnits),o.Bb(4),o.pc("disabled",!e.form.valid||e.form.disabled),o.Bb(6),o.pc("formControl",e.villageForm)("onlyOwn",!0),o.Bb(2),o.pc("disabled",e.villageForm.disabled||e.villageForm.invalid),o.Bb(4),o.pc("formControl",e.massVillageForm),o.Bb(2),o.pc("disabled",e.massVillageForm.disabled||e.massVillageForm.invalid),o.Bb(3),o.pc("disabled",e.massVillageForm.disabled||e.massVillageForm.invalid),o.Bb(2),o.pc("ngIf",e.data.villages.length>0))},directives:[d.x,d.p,d.i,p.b,p.f,h.a,d.o,d.g,v.n,g.a,T.a,U.a,w.a,C.a,x.a,d.f,L.b,d.c,a.m,D.j,D.c,D.e,D.b,D.g,D.i,D.d,D.a,R.a,D.f,D.h],styles:[".list[_ngcontent-%COMP%]{overflow-y:scroll;max-height:50%}"]}),t})();var $=i("PDjf"),E=i("jMqV"),V=i("hC39");function j(t,e){1&t&&o.Pb(0,"th",19)}function A(t,e){if(1&t&&(o.Ub(0,"td",20),o.Pb(1,"mat-slide-toggle",3),o.Tb()),2&t){const t=e.$implicit,i=o.jc(2);o.Bb(1),o.pc("formControl",i.slides[t.id])}}function N(t,e){1&t&&(o.Ub(0,"th",19),o.Lc(1,"Interval"),o.Tb())}function M(t,e){if(1&t&&(o.Ub(0,"td",20),o.Lc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Nc(" ",t.timerInterval," Minuten ")}}function G(t,e){1&t&&(o.Ub(0,"th",19),o.Lc(1,"Max Entfernung"),o.Tb())}function H(t,e){if(1&t&&(o.Ub(0,"td",20),o.Lc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Nc(" ",t.maxDistance," Felder ")}}function q(t,e){1&t&&(o.Ub(0,"th",19),o.Lc(1,"D\xf6rfer"),o.Tb())}function z(t,e){if(1&t&&(o.Ub(0,"td",20),o.Lc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Nc(" ",t.villages.length," ")}}function Z(t,e){1&t&&(o.Ub(0,"th",19),o.Lc(1,"Einheiten"),o.Tb())}function K(t,e){if(1&t&&(o.Ub(0,"td",20),o.Lc(1),o.Pb(2,"app-units-render-min",21),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Nc(" Gruppe ",t.farmGroup,": "),o.Bb(1),o.pc("value",t.units)}}function _(t,e){if(1&t){const t=o.Vb();o.Ub(0,"th",19),o.Ub(1,"button",22),o.fc("click",(function(){return o.Ac(t),o.jc(2).add()})),o.Ub(2,"mat-icon"),o.Lc(3,"add"),o.Tb(),o.Tb(),o.Tb()}}function X(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",20),o.Ub(1,"button",23),o.fc("click",(function(){o.Ac(t);const i=e.$implicit;return o.jc(2).edit(i)})),o.Ub(2,"mat-icon"),o.Lc(3,"edit"),o.Tb(),o.Tb(),o.Ub(4,"button",24),o.fc("click",(function(){o.Ac(t);const i=e.$implicit;return o.jc(2).delete(i.id)})),o.Ub(5,"mat-icon"),o.Lc(6,"delete"),o.Tb(),o.Tb(),o.Tb()}}function W(t,e){1&t&&o.Pb(0,"tr",25)}function Q(t,e){1&t&&o.Pb(0,"tr",26)}function Y(t,e){if(1&t&&(o.Ub(0,"table",8),o.Sb(1,9),o.Jc(2,j,1,0,"th",10),o.Jc(3,A,2,1,"td",11),o.Rb(),o.Sb(4,12),o.Jc(5,N,2,0,"th",10),o.Jc(6,M,2,1,"td",11),o.Rb(),o.Sb(7,13),o.Jc(8,G,2,0,"th",10),o.Jc(9,H,2,1,"td",11),o.Rb(),o.Sb(10,14),o.Jc(11,q,2,0,"th",10),o.Jc(12,z,2,1,"td",11),o.Rb(),o.Sb(13,15),o.Jc(14,Z,2,0,"th",10),o.Jc(15,K,3,2,"td",11),o.Rb(),o.Sb(16,16),o.Jc(17,_,4,0,"th",10),o.Jc(18,X,7,0,"td",11),o.Rb(),o.Jc(19,W,1,0,"tr",17),o.Jc(20,Q,1,0,"tr",18),o.Tb()),2&t){const t=o.jc();o.pc("dataSource",t.tasks),o.Bb(19),o.pc("matHeaderRowDef",t.displayedColumns),o.Bb(1),o.pc("matRowDefColumns",t.displayedColumns)}}function tt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"div",0),o.Ub(1,"div",27),o.Pb(2,"span"),o.Ub(3,"span",28),o.Lc(4," Keine Tasks vorhanden."),o.Pb(5,"br"),o.Ub(6,"button",29),o.fc("click",(function(){return o.Ac(t),o.jc().add()})),o.Lc(7," Hinzuf\xfcgen. "),o.Tb(),o.Tb(),o.Pb(8,"span"),o.Tb(),o.Tb()}}let et=(()=>{class t{constructor(t,e){this.farm=t,this.dialog=e,this.unsub$=new r.b,this.slide=new d.e,this.max=new d.e,this.slides={},this.displayedColumns=["toggle","interval","maxDistance","villages","units","control"]}ngOnInit(){this.farm.list(this.unsub$).subscribe(t=>{this.tasks=t;for(const e of t)this.slides[e.id]=new d.e(e.enabled),this.slides[e.id].valueChanges.subscribe(t=>{this.farm.setTaskEnabled(e.id,t).subscribe()})}),this.farm.config(this.unsub$).subscribe(t=>{this.slide.setValue(t.enabled,{emitEvent:!1}),this.max.setValue(t.maxIncsPerVillage,{emitEvent:!1})}),this.slide.valueChanges.subscribe(t=>{this.farm.setEnabled(t)}),this.max.valueChanges.subscribe(t=>{this.farm.setMaxIncs(t)})}add(){this.dialog.open(k).afterClosed().subscribe(t=>{void 0!==t&&(this.tasks=[...this.tasks,t],this.slides[t.id]=new d.e(t.enabled),this.slides[t.id].valueChanges.subscribe(e=>{this.farm.setTaskEnabled(t.id,e).subscribe()}),this.dialog.open(F,{data:t}))})}delete(t){this.farm.deleteEntity(t).subscribe(t=>{this.tasks=this.tasks.filter(e=>e.id!==t)})}edit(t){this.dialog.open(F,{data:t}).afterClosed().subscribe(e=>{void 0!==e&&(this.tasks=this.tasks.map(i=>i.id===t.id?e:i))})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(f.a),o.Ob(u.b))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-farm-overview"]],decls:12,vars:4,consts:[[1,"row"],[1,"col-xl-12"],[1,"mb-3"],[3,"formControl"],[1,"ml-3"],["matInput","","type","number",3,"formControl"],["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["class","row",4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","toggle"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","interval"],["matColumnDef","maxDistance"],["matColumnDef","villages"],["matColumnDef","units"],["matColumnDef","control"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(o.Ub(0,"div",0),o.Ub(1,"div",1),o.Ub(2,"mat-card",2),o.Pb(3,"mat-slide-toggle",3),o.Ub(4,"mat-form-field",4),o.Ub(5,"mat-label"),o.Lc(6,"Max Angriffe"),o.Tb(),o.Pb(7,"input",5),o.Ub(8,"mat-hint"),o.Lc(9,"Maximale Anzahl an Angriffen pro Babarendorf."),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Jc(10,Y,21,3,"table",6),o.Jc(11,tt,9,0,"div",7)),2&t&&(o.Bb(3),o.pc("formControl",e.slide),o.Bb(4),o.pc("formControl",e.max),o.Bb(3),o.pc("ngIf",e.tasks&&e.tasks.length>0),o.Bb(1),o.pc("ngIf",e.tasks&&0===e.tasks.length))},directives:[$.a,E.a,d.o,d.f,p.b,p.f,L.b,d.s,d.c,p.e,a.m,D.j,D.c,D.e,D.b,D.g,D.i,D.d,D.a,V.a,C.a,T.a,U.a,D.f,D.h],styles:[".mat-column-control[_ngcontent-%COMP%]{width:10%}.mat-column-toggle[_ngcontent-%COMP%]{width:7%}"]}),t})();var it=i("SxV6"),at=i("pLZG"),nt=i("lJxs");class rt{getName(){return"ListFarmRouteRequest"}}class st{constructor(t,e,i,a){this.source=t,this.target=e,this.troops=i,this.timerInterval=a}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.AddFarmRouteRequest"}}class ot{constructor(t){this.id=t}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.DeleteFarmRouteRequest"}}class bt{constructor(t,e,i,a,n){this.id=t,this.source=e,this.target=i,this.troops=a,this.timerInterval=n}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.EditFarmRouteRequest"}}class lt{constructor(t,e){this.id=t,this.enabled=e}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.FarmRouteSetEnabledRequest"}}class ct{getName(){return"FarmRouteConfigRequest"}}class mt{constructor(t){this.autoDisable=t}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.SetFarmRouteAutoDisableRequest"}}var ut=i("7nMs");let dt=(()=>{class t{constructor(t){this.websocketService=t}config(t){return this.websocketService.observable("FarmRouteConfigResponse",new ct).pipe(Object(s.a)(t))}setAutoDisable(t){this.websocketService.sendData(new mt(t))}list(t){return this.websocketService.observable("ListFarmRouteResponse",new rt).pipe(Object(s.a)(t))}addEntity(t,e,i,a){return this.websocketService.observable("AddFarmRouteResponse",new st(t,e,i,a)).pipe(Object(it.a)())}deleteEntity(t){return this.websocketService.observable("DeleteFarmRouteResponse",new ot(t)).pipe(Object(at.a)(e=>e.id===t),Object(it.a)(),Object(nt.a)(t=>t.id))}editEntity(t,e,i,a,n){return this.websocketService.observable("EditFarmRouteResponse",new bt(t,e,i,a,n)).pipe(Object(it.a)())}setTaskEnabled(t,e){return this.websocketService.observable("FarmRouteSetEnabledResponse",new lt(t,e)).pipe(Object(at.a)(e=>e.id===t),Object(it.a)())}}return t.\u0275fac=function(e){return new(e||t)(o.cc(ut.a))},t.\u0275prov=o.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ft=i("38Pe");let pt=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.fb=e,this.farm=i,this.form=this.fb.group({source:[void 0,d.v.required],target:[void 0,d.v.required],troops:{},timerInterval:[30,d.v.min(1)]})}ngOnInit(){}submit(t){this.form.disable(),this.farm.addEntity(t.source.id,t.target.id,t.troops,t.timerInterval).subscribe(t=>{console.log("got route from service:"),console.log(t),this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(u.g),o.Ob(d.d),o.Ob(dt))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-farm-route-add"]],decls:26,vars:2,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["label","Herkunft","formControlName","source"],["label","Ziel","formControlName","target"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],[1,"col-sm-2"],["formControlName","troops"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(o.Ub(0,"div",0),o.Ub(1,"div",1),o.Ub(2,"form",2),o.fc("ngSubmit",(function(){return e.submit(e.form.value)})),o.Ub(3,"div",3),o.Ub(4,"div",1),o.Pb(5,"app-village-input",4),o.Tb(),o.Tb(),o.Ub(6,"div",3),o.Ub(7,"div",1),o.Pb(8,"app-village-input",5),o.Tb(),o.Tb(),o.Ub(9,"div",3),o.Ub(10,"div",6),o.Ub(11,"label",7),o.Lc(12,"Interval (Minuten)"),o.Tb(),o.Tb(),o.Ub(13,"div",8),o.Pb(14,"mat-slider",9),o.Tb(),o.Tb(),o.Ub(15,"div",3),o.Ub(16,"div",10),o.Ub(17,"label"),o.Lc(18," Einheiten "),o.Tb(),o.Tb(),o.Ub(19,"div",1),o.Pb(20,"app-units-input",11),o.Tb(),o.Tb(),o.Ub(21,"div",3),o.Ub(22,"div",12),o.Pb(23,"span"),o.Ub(24,"button",13),o.Lc(25," Hinzuf\xfcgen "),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&t&&(o.Bb(2),o.pc("formGroup",e.form),o.Bb(22),o.pc("disabled",!e.form.valid||e.form.disabled))},directives:[d.x,d.p,d.i,x.a,d.o,d.g,g.a,ft.a,C.a],styles:[""]}),t})(),ht=(()=>{class t{constructor(t,e,i,a){this.data=t,this.dialogRef=e,this.fb=i,this.farm=a,this.form=this.fb.group({source:[void 0,d.v.required],target:[void 0,d.v.required],troops:{},timerInterval:[30,d.v.min(1)]}),this.form.setValue({source:t.source,target:t.target,timerInterval:t.timerInterval,troops:t.troops})}ngOnInit(){}submit(t){this.form.disable(),this.farm.editEntity(this.data.id,t.source.id,t.target.id,t.troops,t.timerInterval).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(u.a),o.Ob(u.g),o.Ob(d.d),o.Ob(dt))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-farm-route-edit"]],decls:26,vars:2,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["label","Herkunft","formControlName","source"],["label","Ziel","formControlName","target"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],[1,"col-sm-2"],[1,"col-xl-10"],["formControlName","troops"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(o.Ub(0,"div",0),o.Ub(1,"div",1),o.Ub(2,"form",2),o.fc("ngSubmit",(function(){return e.submit(e.form.value)})),o.Ub(3,"div",3),o.Ub(4,"div",1),o.Pb(5,"app-village-input",4),o.Tb(),o.Tb(),o.Ub(6,"div",3),o.Ub(7,"div",1),o.Pb(8,"app-village-input",5),o.Tb(),o.Tb(),o.Ub(9,"div",3),o.Ub(10,"div",6),o.Ub(11,"label",7),o.Lc(12,"Interval (Minuten)"),o.Tb(),o.Tb(),o.Ub(13,"div",8),o.Pb(14,"mat-slider",9),o.Tb(),o.Tb(),o.Ub(15,"div",3),o.Ub(16,"div",10),o.Ub(17,"label"),o.Lc(18," Einheiten "),o.Tb(),o.Tb(),o.Ub(19,"div",11),o.Pb(20,"app-units-input",12),o.Tb(),o.Tb(),o.Ub(21,"div",3),o.Ub(22,"div",13),o.Pb(23,"span"),o.Ub(24,"button",14),o.Lc(25," Bearbeiten "),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb(),o.Tb()),2&t&&(o.Bb(2),o.pc("formGroup",e.form),o.Bb(22),o.pc("disabled",!e.form.valid||e.form.disabled))},directives:[d.x,d.p,d.i,x.a,d.o,d.g,g.a,ft.a,C.a],styles:[""]}),t})();function vt(t,e){1&t&&o.Pb(0,"th",17)}function gt(t,e){if(1&t&&(o.Ub(0,"td",18),o.Pb(1,"mat-slide-toggle",19),o.Tb()),2&t){const t=e.$implicit,i=o.jc(2);o.Bb(1),o.pc("formControl",i.slides[t.id])}}function Tt(t,e){1&t&&(o.Ub(0,"th",17),o.Lc(1,"Interval"),o.Tb())}function Ut(t,e){if(1&t&&(o.Ub(0,"td",18),o.Lc(1),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.Nc(" ",t.timerInterval," Minuten ")}}function wt(t,e){1&t&&(o.Ub(0,"th",17),o.Lc(1,"Herkunft"),o.Tb())}function Ct(t,e){if(1&t&&(o.Ub(0,"td",18),o.Pb(1,"app-village-render",20),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.pc("value",t.source)}}function kt(t,e){1&t&&(o.Ub(0,"th",17),o.Lc(1,"Ziel"),o.Tb())}function xt(t,e){if(1&t&&(o.Ub(0,"td",18),o.Pb(1,"app-village-render",20),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.pc("value",t.target)}}function Lt(t,e){1&t&&(o.Ub(0,"th",17),o.Lc(1,"Einheiten"),o.Tb())}function Dt(t,e){if(1&t&&(o.Ub(0,"td",18),o.Pb(1,"app-units-render-min",20),o.Tb()),2&t){const t=e.$implicit;o.Bb(1),o.pc("value",t.troops)}}function Rt(t,e){if(1&t){const t=o.Vb();o.Ub(0,"th",17),o.Ub(1,"button",21),o.fc("click",(function(){return o.Ac(t),o.jc(2).add()})),o.Ub(2,"mat-icon"),o.Lc(3,"add"),o.Tb(),o.Tb(),o.Tb()}}function It(t,e){if(1&t){const t=o.Vb();o.Ub(0,"td",18),o.Ub(1,"button",22),o.fc("click",(function(){o.Ac(t);const i=e.$implicit;return o.jc(2).edit(i)})),o.Ub(2,"mat-icon"),o.Lc(3,"edit"),o.Tb(),o.Tb(),o.Ub(4,"button",23),o.fc("click",(function(){o.Ac(t);const i=e.$implicit;return o.jc(2).delete(i.id)})),o.Ub(5,"mat-icon"),o.Lc(6,"delete"),o.Tb(),o.Tb(),o.Tb()}}function yt(t,e){1&t&&o.Pb(0,"tr",24)}function Pt(t,e){1&t&&o.Pb(0,"tr",25)}function Bt(t,e){if(1&t&&(o.Ub(0,"table",6),o.Sb(1,7),o.Jc(2,vt,1,0,"th",8),o.Jc(3,gt,2,1,"td",9),o.Rb(),o.Sb(4,10),o.Jc(5,Tt,2,0,"th",8),o.Jc(6,Ut,2,1,"td",9),o.Rb(),o.Sb(7,11),o.Jc(8,wt,2,0,"th",8),o.Jc(9,Ct,2,1,"td",9),o.Rb(),o.Sb(10,12),o.Jc(11,kt,2,0,"th",8),o.Jc(12,xt,2,1,"td",9),o.Rb(),o.Sb(13,13),o.Jc(14,Lt,2,0,"th",8),o.Jc(15,Dt,2,1,"td",9),o.Rb(),o.Sb(16,14),o.Jc(17,Rt,4,0,"th",8),o.Jc(18,It,7,0,"td",9),o.Rb(),o.Jc(19,yt,1,0,"tr",15),o.Jc(20,Pt,1,0,"tr",16),o.Tb()),2&t){const t=o.jc();o.pc("dataSource",t.routes),o.Bb(19),o.pc("matHeaderRowDef",t.displayedColumns),o.Bb(1),o.pc("matRowDefColumns",t.displayedColumns)}}function Ot(t,e){if(1&t){const t=o.Vb();o.Ub(0,"div",0),o.Ub(1,"div",26),o.Pb(2,"span"),o.Ub(3,"span",27),o.Lc(4," Keine Routen vorhanden."),o.Pb(5,"br"),o.Ub(6,"button",28),o.fc("click",(function(){return o.Ac(t),o.jc().add()})),o.Lc(7," Hinzuf\xfcgen. "),o.Tb(),o.Tb(),o.Pb(8,"span"),o.Tb(),o.Tb()}}const St=[{path:"",component:m,children:[{path:"routes",component:(()=>{class t{constructor(t,e){this.farm=t,this.dialog=e,this.unsub$=new r.b,this.slides={},this.autoDisableSlide=new d.e(!1),this.displayedColumns=["toggle","interval","source","target","units","control"]}ngOnInit(){this.farm.config(this.unsub$).subscribe(t=>{this.config=t,this.autoDisableSlide.setValue(t.autoDisable,{emitEvent:!1})}),this.autoDisableSlide.valueChanges.subscribe(t=>{this.farm.setAutoDisable(t)}),this.farm.list(this.unsub$).subscribe(t=>{this.routes=t;for(const e of t)this.slides[e.id]=new d.e(e.enabled),this.slides[e.id].valueChanges.subscribe(t=>{this.farm.setTaskEnabled(e.id,t).subscribe()})})}add(){this.dialog.open(pt).afterClosed().subscribe(t=>{void 0!==t&&(this.routes=[...this.routes,t],this.slides[t.id]=new d.e(t.enabled),this.slides[t.id].valueChanges.subscribe(e=>{this.farm.setTaskEnabled(t.id,e).subscribe()}))})}delete(t){this.farm.deleteEntity(t).subscribe(t=>{this.routes=this.routes.filter(e=>e.id!==t)})}edit(t){this.dialog.open(ht,{data:t}).afterClosed().subscribe(e=>{void 0!==e&&(this.routes=this.routes.map(i=>i.id===t.id?e:i))})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(dt),o.Ob(u.b))},t.\u0275cmp=o.Ib({type:t,selectors:[["app-farm-route"]],decls:6,vars:3,consts:[[1,"row"],[1,"col-xl-12"],[1,"mb-3"],["matTooltip","Routen auf D\xf6rfer mit rotem/gelbem Bericht deaktivieren.",3,"formControl"],["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["class","row",4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","toggle"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","interval"],["matColumnDef","source"],["matColumnDef","target"],["matColumnDef","units"],["matColumnDef","control"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"formControl"],[3,"value"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(o.Ub(0,"div",0),o.Ub(1,"div",1),o.Ub(2,"mat-card",2),o.Pb(3,"mat-slide-toggle",3),o.Tb(),o.Tb(),o.Tb(),o.Jc(4,Bt,21,3,"table",4),o.Jc(5,Ot,9,0,"div",5)),2&t&&(o.Bb(3),o.pc("formControl",e.autoDisableSlide),o.Bb(1),o.pc("ngIf",e.routes&&e.routes.length>0),o.Bb(1),o.pc("ngIf",e.routes&&0===e.routes.length))},directives:[$.a,E.a,U.a,d.o,d.f,a.m,D.j,D.c,D.e,D.b,D.g,D.i,D.d,D.a,R.a,V.a,C.a,T.a,D.f,D.h],styles:[".mat-column-control[_ngcontent-%COMP%]{width:10%}.mat-column-toggle[_ngcontent-%COMP%]{width:7%}"]}),t})()},{path:"",pathMatch:"full",component:et}]}];let Jt=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[n.f.forChild(St)],n.f]}),t})();var Ft=i("BLWB");let $t=(()=>{class t{}return t.\u0275mod=o.Mb({type:t}),t.\u0275inj=o.Lb({factory:function(e){return new(e||t)},imports:[[a.c,Jt,b.c,$.f,E.b,d.t,Ft.a,p.d,h.b,T.b,C.b,u.f,g.b,U.b,L.c,D.l]]}),t})()}}]);