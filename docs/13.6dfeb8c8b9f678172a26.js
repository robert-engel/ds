(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{sIr3:function(t,e,n){"use strict";n.r(e),n.d(e,"IncsModule",(function(){return mt}));var i=n("ofXK"),c=n("tyNb"),a=n("XNiG"),s=n("1G5W"),b=n("fXoL"),r=n("M9ds");const o=function(t){return[t]};function l(t,e){if(1&t){const t=b.Vb();b.Ub(0,"span",2),b.fc("click",(function(){b.Cc(t);const n=e.$implicit;return b.jc().activeLink=n})),b.Nc(1),b.Tb()}if(2&t){const t=e.$implicit,n=b.jc();b.pc("active",n.activeLink===t)("routerLink",b.tc(3,o,t.link)),b.Bb(1),b.Pc(" ",t.title," ")}}let u=(()=>{class t{constructor(t){this.router=t,this.links=[{title:"Home",link:"/incs"}],this.activeLink=this.links[0],this.unsub$=new a.b}ngOnInit(){this.setActive(),this.router.events.pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.setActive()})}setActive(){for(const t of this.links)this.router.isActive(t.link,!1)&&(this.activeLink=t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(c.b))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-incs"]],decls:3,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(t,e){1&t&&(b.Ub(0,"nav",0),b.Lc(1,l,2,5,"span",1),b.Tb(),b.Pb(2,"router-outlet")),2&t&&(b.Bb(1),b.pc("ngForOf",e.links))},directives:[r.b,i.l,c.f,r.a,c.c],styles:[""]}),t})();var p=n("l5mm"),m=n("lJxs"),d=n("UXun"),f=n("Kj3r"),h=n("3Pt+"),g=n("7nMs"),v=n("fer1"),U=n("0MNC"),T=n("PDjf"),w=n("5QHs"),O=n("Q2Ze"),L=n("ZTz/"),B=n("jTwa"),k=n("FKr1"),P=n("pu8Q"),C=n("OaSA"),N=n("irRR"),$=n("DSdR");function S(t,e){1&t&&b.Pb(0,"app-unit-render",8),2&t&&b.pc("value",e.$implicit)}function F(t,e){if(1&t&&(b.Ub(0,"mat-option",9),b.Pb(1,"app-unit-render",9),b.Tb()),2&t){const t=e.$implicit;b.pc("value",t),b.Bb(1),b.pc("value",t)}}function y(t,e){if(1&t&&(b.Ub(0,"mat-form-field",4),b.Ub(1,"mat-label"),b.Nc(2,"Einheit"),b.Tb(),b.Ub(3,"mat-select",5),b.Ub(4,"mat-select-trigger"),b.Lc(5,S,1,1,"app-unit-render",6),b.Tb(),b.Lc(6,F,2,2,"mat-option",7),b.Tb(),b.Tb()),2&t){const t=b.jc();b.Bb(3),b.pc("formControl",t.unitsForm),b.Bb(2),b.pc("ngForOf",t.unitsForm.value),b.Bb(1),b.pc("ngForOf",t.units)}}function I(t,e){1&t&&(b.Ub(0,"div",10),b.Ub(1,"div",11),b.Pb(2,"span"),b.Pb(3,"mat-spinner"),b.Pb(4,"span"),b.Tb(),b.Tb())}function j(t,e){1&t&&(b.Ub(0,"mat-header-cell"),b.Nc(1,"Name"),b.Tb())}function x(t,e){if(1&t&&(b.Ub(0,"mat-cell"),b.Ub(1,"span",24),b.Nc(2,"Name:"),b.Tb(),b.Ub(3,"a",25),b.Nc(4),b.Tb(),b.Tb()),2&t){const t=e.$implicit;b.Bb(3),b.pc("routerLink","/incs/"+t.id),b.Bb(1),b.Oc(t.name)}}function D(t,e){1&t&&b.Pb(0,"app-unit-render",8),2&t&&b.pc("value",e.$implicit)}function R(t,e){if(1&t&&(b.Ub(0,"mat-option",9),b.Pb(1,"app-unit-render",9),b.Tb()),2&t){const t=e.$implicit;b.pc("value",t),b.Bb(1),b.pc("value",t)}}function M(t,e){if(1&t&&(b.Ub(0,"mat-header-cell"),b.Ub(1,"mat-form-field",4),b.Ub(2,"mat-label"),b.Nc(3,"Einheit"),b.Tb(),b.Ub(4,"mat-select",5),b.Ub(5,"mat-select-trigger"),b.Lc(6,D,1,1,"app-unit-render",6),b.Tb(),b.Lc(7,R,2,2,"mat-option",7),b.Tb(),b.Tb(),b.Tb()),2&t){const t=b.jc(2);b.Bb(4),b.pc("formControl",t.unitsForm),b.Bb(2),b.pc("ngForOf",t.unitsForm.value),b.Bb(1),b.pc("ngForOf",t.units)}}function z(t,e){if(1&t&&(b.Ub(0,"mat-cell"),b.Ub(1,"span",24),b.Nc(2,"Einheit:"),b.Tb(),b.Pb(3,"app-unit-render",9),b.Tb()),2&t){const t=e.$implicit;b.Bb(3),b.pc("value",t.slowestUnit)}}function A(t,e){1&t&&(b.Ub(0,"mat-header-cell"),b.Nc(1,"Ziel"),b.Tb())}function H(t,e){if(1&t&&(b.Ub(0,"mat-cell"),b.Ub(1,"span",24),b.Nc(2,"Ziel:"),b.Tb(),b.Pb(3,"app-village-render",9),b.Tb()),2&t){const t=e.$implicit;b.Bb(3),b.pc("value",t.target)}}function _(t,e){1&t&&(b.Ub(0,"mat-header-cell"),b.Nc(1,"Herkunft"),b.Tb())}function V(t,e){if(1&t&&(b.Ub(0,"mat-cell"),b.Ub(1,"span",24),b.Nc(2,"Herkunft:"),b.Tb(),b.Pb(3,"app-village-render",9),b.Tb()),2&t){const t=e.$implicit;b.Bb(3),b.pc("value",t.origin)}}function E(t,e){1&t&&(b.Ub(0,"mat-header-cell"),b.Nc(1,"Spieler"),b.Tb())}function K(t,e){if(1&t&&(b.Ub(0,"mat-cell"),b.Ub(1,"span",24),b.Nc(2,"Spieler:"),b.Tb(),b.Nc(3),b.Tb()),2&t){const t=e.$implicit;b.Bb(3),b.Pc(" ",t.player.name," ")}}function Z(t,e){1&t&&(b.Ub(0,"mat-header-cell"),b.Nc(1,"Ankunft"),b.Tb())}function X(t,e){if(1&t&&(b.Ub(0,"mat-cell"),b.Ub(1,"span",24),b.Nc(2,"Ankunft:"),b.Tb(),b.Nc(3),b.Tb()),2&t){const t=e.$implicit;b.Bb(3),b.Pc(" ",t.arrival," ")}}function G(t,e){1&t&&(b.Ub(0,"mat-header-cell"),b.Nc(1,"Verbleibend"),b.Tb())}function J(t,e){if(1&t&&(b.Ub(0,"mat-cell"),b.Ub(1,"span",24),b.Nc(2,"Verbleibend:"),b.Tb(),b.Ub(3,"span"),b.Nc(4),b.kc(5,"hms"),b.Tb(),b.Tb()),2&t){const t=e.$implicit;b.Bb(3),b.Gb("red",t.remaining<300),b.Bb(1),b.Oc(b.lc(5,3,1e3*t.remaining))}}function Q(t,e){1&t&&b.Pb(0,"mat-header-row")}function W(t,e){1&t&&b.Pb(0,"mat-row")}function q(t,e){if(1&t&&(b.Ub(0,"mat-table",12),b.Sb(1,13),b.Lc(2,j,2,0,"mat-header-cell",14),b.Lc(3,x,5,2,"mat-cell",15),b.Rb(),b.Sb(4,16),b.Lc(5,M,8,3,"mat-header-cell",14),b.Lc(6,z,4,1,"mat-cell",15),b.Rb(),b.Sb(7,17),b.Lc(8,A,2,0,"mat-header-cell",14),b.Lc(9,H,4,1,"mat-cell",15),b.Rb(),b.Sb(10,18),b.Lc(11,_,2,0,"mat-header-cell",14),b.Lc(12,V,4,1,"mat-cell",15),b.Rb(),b.Sb(13,19),b.Lc(14,E,2,0,"mat-header-cell",14),b.Lc(15,K,4,1,"mat-cell",15),b.Rb(),b.Sb(16,20),b.Lc(17,Z,2,0,"mat-header-cell",14),b.Lc(18,X,4,1,"mat-cell",15),b.Rb(),b.Sb(19,21),b.Lc(20,G,2,0,"mat-header-cell",14),b.Lc(21,J,6,5,"mat-cell",15),b.Rb(),b.Lc(22,Q,1,0,"mat-header-row",22),b.Lc(23,W,1,0,"mat-row",23),b.Tb()),2&t){const t=b.jc();b.pc("dataSource",t.incs),b.Bb(22),b.pc("matHeaderRowDef",t.displayedColumns),b.Bb(1),b.pc("matRowDefColumns",t.displayedColumns)}}const Y=function(){return[10,50,100,250]};let tt=(()=>{class t{constructor(t,e,n){this.web=t,this.incService=e,this.breakpointObserver=n,this.unsub$=new a.b,this.incs=[],this.size=10,this.unitsForm=new h.e([]),this.cancelled=!1,this.displayedColumns=["name","slowestUnit","target","origin","player","arrival","remaining"],this.isHandset$=this.breakpointObserver.observe("(max-width: 900px)").pipe(Object(m.a)(t=>t.matches),Object(d.a)()),this.loading=!1}ngOnInit(){this.web.info().pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.units=t.units}),this.loading=!0,this.incService.getIncList(0,10,!1).subscribe(t=>{this.incs=t.incs,this.count=t.count,this.loading=!1}),Object(p.a)(1e3).pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.incs.forEach((t,e,n)=>{n[e].remaining>0&&(n[e].remaining-=1)})}),this.unitsForm.valueChanges.pipe(Object(s.a)(this.unsub$),Object(f.a)(1e3)).subscribe(t=>{this.loading=!0,this.incService.getIncList(0,this.size,this.cancelled,t).subscribe(t=>{this.incs=t.incs,this.count=t.count,this.loading=!1})})}pageUpdate(t){this.size=t.pageSize,this.loading=!0,this.incService.getIncList(t.pageIndex*t.pageSize,t.pageSize,this.cancelled,this.unitsForm.value).subscribe(t=>{this.incs=t.incs,this.count=t.count,this.loading=!1})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(g.a),b.Ob(v.a),b.Ob(U.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-incs-overview"]],decls:6,vars:9,consts:[["appearance","fill",4,"ngIf"],["class","row",4,"ngIf"],["class","w-100",3,"dataSource",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],["appearance","fill"],["multiple","",3,"formControl"],["class","p-1",3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],[1,"p-1",3,"value"],[3,"value"],[1,"row"],[1,"col-md-12","flex-between"],[1,"w-100",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","slowestUnit"],["matColumnDef","target"],["matColumnDef","origin"],["matColumnDef","player"],["matColumnDef","arrival"],["matColumnDef","remaining"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"mobile-label"],[3,"routerLink"]],template:function(t,e){1&t&&(b.Ub(0,"mat-card"),b.Lc(1,y,7,3,"mat-form-field",0),b.kc(2,"async"),b.Lc(3,I,5,0,"div",1),b.Lc(4,q,24,3,"mat-table",2),b.Ub(5,"mat-paginator",3),b.fc("page",(function(t){return e.pageUpdate(t)})),b.Tb(),b.Tb()),2&t&&(b.Bb(1),b.pc("ngIf",!0===b.lc(2,6,e.isHandset$)),b.Bb(2),b.pc("ngIf",e.loading),b.Bb(1),b.pc("ngIf",!e.loading),b.Bb(1),b.pc("length",e.count)("pageSize",10)("pageSizeOptions",b.sc(8,Y)))},directives:[T.a,i.m,w.a,O.b,O.f,L.a,h.o,h.f,L.c,i.l,B.a,k.l,P.b,C.j,C.c,C.e,C.b,C.g,C.i,C.d,C.a,c.d,N.a,C.f,C.h],pipes:[i.b,$.a],styles:["a[_ngcontent-%COMP%]{color:inherit}.red[_ngcontent-%COMP%]{color:red}.mat-header-cell[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.mat-cell[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mobile-label[_ngcontent-%COMP%]{display:none}@media (max-width:900px){.mobile-label[_ngcontent-%COMP%]{width:80px;display:inline-block;font-weight:700}mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{flex-direction:column;align-items:start;padding:8px 24px}}"]}),t})();var et=n("bTqV");function nt(t,e){1&t&&(b.Ub(0,"div",2),b.Ub(1,"div",3),b.Pb(2,"span"),b.Pb(3,"mat-spinner"),b.Pb(4,"span"),b.Tb(),b.Tb())}function it(t,e){1&t&&(b.Sb(0),b.Nc(1," Konnte keinen Inc mit dieser ID finden. "),b.Rb())}function ct(t,e){if(1&t&&(b.Ub(0,"mat-option",9),b.Pb(1,"app-unit-render",9),b.Tb()),2&t){const t=e.$implicit;b.pc("value",t),b.Bb(1),b.pc("value",t)}}const at=function(){return{type:"SUPPORT"}},st=function(t,e,n){return["/planner/command",t,e,n]},bt=function(){return{type:"ATTACK"}};function rt(t,e){if(1&t&&(b.Ub(0,"mat-card-content"),b.Ub(1,"div",2),b.Ub(2,"div",4),b.Ub(3,"mat-card",5),b.Ub(4,"div",6),b.Ub(5,"div",7),b.Nc(6),b.Tb(),b.Ub(7,"div",7),b.Ub(8,"mat-select",8),b.Ub(9,"mat-select-trigger"),b.Pb(10,"app-unit-render",9),b.Tb(),b.Lc(11,ct,2,2,"mat-option",10),b.Tb(),b.Tb(),b.Ub(12,"div",11),b.Nc(13," Ziel: "),b.Pb(14,"app-village-render",9),b.Tb(),b.Ub(15,"div",11),b.Nc(16," Herkunft: "),b.Pb(17,"app-village-render",9),b.Tb(),b.Ub(18,"div",7),b.Nc(19),b.Tb(),b.Ub(20,"div",11),b.Nc(21),b.Tb(),b.Ub(22,"div",11),b.Nc(23),b.Tb(),b.Ub(24,"div",7),b.Nc(25),b.kc(26,"hms"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(27,"div",12),b.Ub(28,"div",2),b.Ub(29,"div",13),b.Ub(30,"button",14),b.Nc(31," DEFF planen. "),b.Tb(),b.Tb(),b.Tb(),b.Ub(32,"div",2),b.Ub(33,"div",13),b.Ub(34,"button",15),b.Nc(35," Cleaner planen. "),b.Tb(),b.Tb(),b.Tb(),b.Ub(36,"div",2),b.Ub(37,"div",13),b.Ub(38,"button",15),b.Nc(39," Retime planen. "),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&t){const t=b.jc();b.Bb(6),b.Pc(" ",t.inc.name," "),b.Bb(2),b.pc("formControl",t.unitForm),b.Bb(2),b.pc("value",t.unitForm.value),b.Bb(1),b.pc("ngForOf",t.units),b.Bb(3),b.pc("value",t.inc.target),b.Bb(3),b.pc("value",t.inc.origin),b.Bb(2),b.Pc(" Spieler: ",t.inc.player.name," "),b.Bb(2),b.Pc(" Ankunft: ",t.inc.arrival," "),b.Bb(2),b.Pc(" R\xfcckkehr: ",t.inc.return," "),b.Bb(2),b.Pc(" Verbleibend: ",b.lc(26,13,1e3*t.inc.remaining)," "),b.Bb(5),b.pc("routerLink",b.vc(16,st,t.inc.target.id,t.inc.time,b.sc(15,at))),b.Bb(4),b.pc("routerLink",b.vc(21,st,t.inc.target.id,t.inc.time,b.sc(20,bt))),b.Bb(4),b.pc("routerLink",b.vc(26,st,t.inc.origin.id,t.inc.returnTime,b.sc(25,bt)))}}const ot=[{path:"",component:u,children:[{path:":id",component:(()=>{class t{constructor(t,e,n){this.route=t,this.incService=e,this.web=n,this.unsub$=new a.b,this.routeChange$=new a.b,this.unitForm=new h.e,this.units=[],this.loading=!1}ngOnInit(){this.web.info().subscribe(t=>{this.units=t.units}),this.route.paramMap.subscribe(t=>{this.routeChange$.next(),this.loading=!0,this.incService.getInc(parseInt(t.get("id"),10)).subscribe(t=>{this.inc=t,this.unitForm.setValue(this.inc.slowestUnit),this.loading=!1}),this.incService.incUpdates(parseInt(t.get("id"),10)).pipe(Object(s.a)(this.routeChange$)).subscribe(t=>{this.inc=t,this.unitForm.setValue(this.inc.slowestUnit)})}),Object(p.a)(1e3).pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.inc&&this.inc.remaining--}),this.unitForm.valueChanges.pipe(Object(f.a)(500)).subscribe(t=>{this.inc&&t!==this.inc.slowestUnit&&this.incService.updateSlowest(this.inc.id,t)})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete(),this.routeChange$.next(),this.routeChange$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(c.a),b.Ob(v.a),b.Ob(g.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-incs-details"]],decls:4,vars:3,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col-md-12","flex-between"],[1,"col-xl-9"],[1,"mat-elevation-z6","h-100"],[1,"row","align-items-center"],[1,"col-xl-1"],[3,"formControl"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-xl-2"],[1,"col-xl-3"],[1,"col-md-12"],["mat-raised-button","","color","accent",1,"w-100","mat-elevation-z6",3,"routerLink"],["mat-raised-button","","color","warn",1,"w-100","mat-elevation-z6","mt-2",3,"routerLink"]],template:function(t,e){1&t&&(b.Ub(0,"mat-card"),b.Lc(1,nt,5,0,"div",0),b.Lc(2,it,2,0,"ng-container",1),b.Lc(3,rt,40,30,"mat-card-content",1),b.Tb()),2&t&&(b.Bb(1),b.pc("ngIf",e.loading),b.Bb(1),b.pc("ngIf",!e.inc&&!e.loading),b.Bb(1),b.pc("ngIf",e.inc))},directives:[T.a,i.m,P.b,T.c,L.a,h.o,h.f,L.c,B.a,i.l,N.a,et.a,c.c,k.l],pipes:[$.a],styles:[""]}),t})()},{path:"",pathMatch:"full",component:tt}]}];let lt=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[c.e.forChild(ot)],c.e]}),t})();var ut=n("BLWB"),pt=n("NFeN");let mt=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[i.c,lt,r.c,T.f,ut.a,C.l,et.b,pt.b,w.b,O.d,L.b,h.t,P.a]]}),t})()}}]);