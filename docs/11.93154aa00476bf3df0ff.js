(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"38Pe":function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var a=i("fXoL"),s=i("3Pt+"),n=i("lJxs"),c=i("UXun"),l=i("ZTz/"),o=i("DNTf"),r=i("0MNC"),b=i("7nMs"),u=i("ofXK"),d=i("Q2Ze"),g=i("e6WT"),f=i("bTqV"),m=i("FKr1");function v(e,t){if(1&e&&a.Pb(0,"img",8),2&e){const e=a.jc().$implicit,t=a.jc();a.pc("src",t.imagebase+"unit/unit_"+e+".png",a.Cc)}}const p=function(e,t){return{"col-xl-12":e,pad:t}};function h(e,t){if(1&e){const e=a.Vb();a.Ub(0,"span",0),a.kc(1,"async"),a.kc(2,"async"),a.Ub(3,"mat-form-field",3),a.Ub(4,"mat-label"),a.Lc(5),a.kc(6,"titlecase"),a.Tb(),a.Ub(7,"input",4,5),a.fc("change",(function(){a.Ac(e);const i=t.$implicit,s=a.xc(8);return a.jc().input(s.value,i)})),a.Tb(),a.Ub(9,"button",6),a.fc("click",(function(){a.Ac(e);const i=t.$implicit,s=a.xc(8);return a.jc().input("alle",i),s.value="alle"})),a.Jc(10,v,1,1,"img",7),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=t.$implicit,i=a.jc();a.pc("ngClass",a.uc(10,p,i.forceVertical||!0===a.lc(1,4,i.isHandset$),!(i.forceVertical||!0===a.lc(2,6,i.isHandset$)))),a.Bb(5),a.Mc(a.lc(6,8,e)),a.Bb(2),a.pc("id","troop_input_"+e),a.Bb(3),a.pc("ngIf",i.imagebase)}}function T(e,t){if(1&e&&a.Pb(0,"img",18),2&e){const e=a.jc(3);a.pc("src",e.imagebase+"buildings/"+e.formControl.value.cataTarget+".png",a.Cc)}}function k(e,t){if(1&e&&(a.Ub(0,"mat-select-trigger"),a.Ub(1,"div",16),a.Ub(2,"span"),a.Lc(3),a.kc(4,"titlecase"),a.Tb(),a.Jc(5,T,1,1,"img",17),a.Tb(),a.Tb()),2&e){const e=a.jc(2);a.Bb(3),a.Mc(a.lc(4,2,e.formControl.value.cataTarget)),a.Bb(2),a.pc("ngIf",e.imagebase)}}function w(e,t){if(1&e&&a.Pb(0,"img",18),2&e){const e=a.jc().$implicit,t=a.jc(2);a.pc("src",t.imagebase+"buildings/"+e+".png",a.Cc)}}function U(e,t){if(1&e&&(a.Ub(0,"mat-option",19),a.Ub(1,"div",16),a.Ub(2,"span"),a.Lc(3),a.kc(4,"titlecase"),a.Tb(),a.Jc(5,w,1,1,"img",17),a.Tb(),a.Tb()),2&e){const e=t.$implicit,i=a.jc(2);a.pc("value",e),a.Bb(3),a.Mc(a.lc(4,3,e)),a.Bb(2),a.pc("ngIf",i.imagebase)}}function O(e,t){if(1&e){const e=a.Vb();a.Ub(0,"div",9),a.Ub(1,"div",10),a.Ub(2,"mat-form-field"),a.Ub(3,"mat-label"),a.Lc(4,"Katapult Ziel"),a.Tb(),a.Ub(5,"mat-select",11,12),a.fc("valueChange",(function(){a.Ac(e);const t=a.xc(6);return a.jc().input(t.value,"cataTarget")})),a.Jc(7,k,6,4,"mat-select-trigger",13),a.Ub(8,"mat-option",14),a.Lc(9,"Default"),a.Tb(),a.Jc(10,U,6,5,"mat-option",15),a.Tb(),a.Tb(),a.Tb(),a.Tb()}if(2&e){const e=a.jc();a.Bb(7),a.pc("ngIf","///DEFAULT///"!==e.formControl.value.cataTarget),a.Bb(3),a.pc("ngForOf",e.buildings)}}const C=function(e,t){return{spread:e,row:t}};let y=(()=>{class e{constructor(e,t){this.breakpointObserver=e,this.web=t,this.forceVertical=!1,this.hideCataTarget=!1,this.excludeUnits=[],this.units=[],this.buildings=[],this.formControl=new s.e({cataTarget:"///DEFAULT///"}),this.isHandset$=this.breakpointObserver.observe(o.a).pipe(Object(n.a)(e=>e.matches),Object(c.a)()),this.propagateChange=e=>{}}ngOnInit(){this.web.infoObservable.subscribe(e=>{this.units=e.units,this.units=this.units.filter(e=>!this.excludeUnits.includes(e)),this.imagebase=e.imageBase,this.buildings=e.buildings}),this.units.forEach(e=>{const t={};t[e]="0",this.formControl.patchValue(t)}),this.formControl.valueChanges.subscribe(e=>{this.propagateChange(e)})}input(e,t){const i={};i[t]=e,this.formControl.setValue(Object.assign(Object.assign({},this.formControl.value),i))}get cata(){return this.formControl.value.catapult&&"0"!==this.formControl.value.catapult}writeValue(e){null==e&&(e={cataTarget:"///DEFAULT///"}),this.formControl.setValue(e),setTimeout(()=>{void 0!==this.select&&(this.select.value=e.cataTarget),this.units.forEach(t=>{const i=document.getElementById("troop_input_"+t);null!==i&&e.hasOwnProperty(t)&&(i.value=e[t])})},10)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){e?this.formControl.disable():this.formControl.enable()}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(r.a),a.Ob(b.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-units-input"]],viewQuery:function(e,t){var i;1&e&&a.Rc(l.a,!0),2&e&&a.wc(i=a.gc())&&(t.select=i.first)},inputs:{forceVertical:"forceVertical",hideCataTarget:"hideCataTarget",excludeUnits:"excludeUnits"},features:[a.Ab([{provide:s.m,multi:!0,useExisting:Object(a.V)(()=>e)}])],decls:5,vars:10,consts:[[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"full-width"],["matInput","","type","text",3,"id","change"],["t",""],["mat-button","","matSuffix","","mat-icon-button","",3,"click"],["class","img-fluid",3,"src",4,"ngIf"],[1,"img-fluid",3,"src"],[1,"row"],[1,"col-12"],[3,"valueChange"],["select",""],[4,"ngIf"],["value","///DEFAULT///"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-between"],["matSuffix","","class","img-fluid",3,"src",4,"ngIf"],["matSuffix","",1,"img-fluid",3,"src"],[3,"value"]],template:function(e,t){1&e&&(a.Ub(0,"div",0),a.kc(1,"async"),a.kc(2,"async"),a.Jc(3,h,11,13,"span",1),a.Tb(),a.Jc(4,O,11,2,"div",2)),2&e&&(a.pc("ngClass",a.uc(7,C,!(t.forceVertical||!0===a.lc(1,3,t.isHandset$)),t.forceVertical||!0===a.lc(2,5,t.isHandset$))),a.Bb(3),a.pc("ngForOf",t.units),a.Bb(1),a.pc("ngIf",t.cata&&!t.hideCataTarget))},directives:[u.k,u.l,u.m,d.b,d.f,g.b,f.a,d.g,l.a,m.n,l.c],pipes:[u.b,u.v],styles:[".full-width[_ngcontent-%COMP%]{width:99%}.pad[_ngcontent-%COMP%]{padding-left:6px;padding-right:6px}div.spread[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}div.spread[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:table-cell;text-align:center}"]}),e})()},"7Ixi":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var a=i("fXoL"),s=i("3Pt+"),n=i("LRne"),c=i("Kj3r"),l=i("eIep"),o=i("YWTT"),r=i("Q2Ze"),b=i("e6WT"),u=i("vrAh"),d=i("ofXK"),g=i("bTqV"),f=i("NFeN"),m=i("FKr1");function v(e,t){if(1&e){const e=a.Vb();a.Ub(0,"button",6),a.fc("click",(function(){return a.Ac(e),a.jc().formControl.reset()})),a.Ub(1,"mat-icon"),a.Lc(2,"close"),a.Tb(),a.Tb()}}function p(e,t){if(1&e&&(a.Ub(0,"mat-option",7),a.Ub(1,"span"),a.Lc(2),a.Tb(),a.Ub(3,"small"),a.Lc(4),a.Tb(),a.Tb()),2&e){const e=t.$implicit;a.pc("value",e),a.Bb(2),a.Mc(e.search),a.Bb(2),a.Nc(" | Punkte: ",e.points,"")}}let h=(()=>{class e{constructor(e){this.villageService=e,this.label="Dorf",this.showClear=!1,this.onlyOwn=!1,this.formControl=new s.e("",e=>null==e.value||!e.value.id||"number"!=typeof e.value.id||e.value.id<0?{source:!0}:null),this.propagateChange=e=>{}}ngOnInit(){this.formControl.valueChanges.subscribe(e=>{this.propagateChange(e)})}writeValue(e){this.formControl.setValue(e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){}setDisabledState(e){e?this.formControl.disable():this.formControl.enable()}displayFn(e){return e?e.search:""}ngAfterViewInit(){this.villages$=this.formControl.valueChanges.pipe(Object(c.a)(300),Object(l.a)(e=>"string"==typeof e?this.villageService.searchVillages(e,this.onlyOwn):"object"==typeof e&&null!==e?this.villageService.searchVillages(e.search,this.onlyOwn):Object(n.a)(void 0)))}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(o.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-village-input"]],inputs:{label:"label",showClear:"showClear",onlyOwn:"onlyOwn"},features:[a.Ab([{provide:s.m,multi:!0,useExisting:Object(a.V)(()=>e)},{provide:s.l,useValue:e=>null==e.value||!e.value.id||"number"!=typeof e.value.id||e.value.id<0?{source:!0}:null,multi:!0}])],decls:7,vars:8,consts:[[1,"full-width"],["autocomplete","off","autocapitalize","off","spellcheck","false","matInput","",1,"full-width",3,"placeholder","matAutocomplete","formControl"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["panelWidth","450px",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"]],template:function(e,t){if(1&e&&(a.Ub(0,"mat-form-field",0),a.Pb(1,"input",1),a.Jc(2,v,3,0,"button",2),a.Tb(),a.Ub(3,"mat-autocomplete",3,4),a.Jc(5,p,5,3,"mat-option",5),a.kc(6,"async"),a.Tb()),2&e){const e=a.xc(4);a.Bb(1),a.pc("placeholder",t.label)("matAutocomplete",e)("formControl",t.formControl),a.Bb(1),a.pc("ngIf",t.showClear&&t.formControl.value),a.Bb(1),a.pc("displayWith",t.displayFn),a.Bb(2),a.pc("ngForOf",a.lc(6,6,t.villages$))}},directives:[r.b,b.b,u.c,s.c,s.o,s.f,d.m,u.a,d.l,g.a,r.g,f.a,m.n],pipes:[d.b],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]}),e})()},DNTf:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));const a="(max-width: 1100.99px)"},YWTT:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));class a{constructor(e,t){this.id=Math.random(),this.query=e,this.onlyOwn=t}getName(){return"io.robertengel.dsbot.feature.village.ws.packet.incoming.VillageSearchRequest"}}var s=i("pLZG"),n=i("SxV6"),c=i("lJxs");class l{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.feature.village.ws.packet.incoming.GetVillageByIdRequest"}}class o{constructor(e){this.id=Math.random(),this.paste=e}getName(){return"io.robertengel.dsbot.feature.village.ws.packet.incoming.VillageCoordPasteRequest"}}var r=i("fXoL"),b=i("7nMs");let u=(()=>{class e{constructor(e){this.web=e}searchVillages(e,t=!1){const i=new a(e,t);return this.web.observable("VillageSearchResponse",i).pipe(Object(s.a)(e=>e.id===i.id),Object(n.a)(),Object(c.a)(e=>e.villages))}coordPaste(e){const t=new o(e);return this.web.observable("VillageSearchResponse",t).pipe(Object(s.a)(e=>e.id===t.id),Object(n.a)(),Object(c.a)(e=>e.villages))}byId(e){return this.web.observable("VillageResponse",new l(e)).pipe(Object(s.a)(t=>t.id===e),Object(n.a)())}}return e.\u0275fac=function(t){return new(t||e)(r.cc(b.a))},e.\u0275prov=r.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},irRR:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var a=i("fXoL"),s=i("7nMs"),n=i("ofXK");function c(e,t){if(1&e){const e=a.Vb();a.Ub(0,"a",2),a.fc("click",(function(t){return a.Ac(e),t.stopPropagation()})),a.Lc(1),a.Pb(2,"br"),a.Tb()}if(2&e){const e=a.jc(2);a.pc("href",e.link,a.Cc),a.Bb(1),a.Pc(" ",e.value.name," (",e.value.x,"|",e.value.y,")")}}function l(e,t){if(1&e&&(a.Ub(0,"span"),a.Lc(1),a.Pb(2,"br"),a.Tb()),2&e){const e=a.jc(2);a.Bb(1),a.Pc(" ",e.value.name," (",e.value.x,"|",e.value.y,")")}}function o(e,t){if(1&e&&(a.Sb(0),a.Jc(1,c,3,4,"a",1),a.Jc(2,l,3,3,"span",0),a.Ub(3,"small"),a.Lc(4),a.kc(5,"number"),a.Tb(),a.Rb()),2&e){const e=a.jc();a.Bb(1),a.pc("ngIf",e.link),a.Bb(1),a.pc("ngIf",!e.link),a.Bb(2),a.Nc("Punkte: ",a.mc(5,3,e.value.points,"1.0","de"),"")}}let r=(()=>{class e{constructor(e){this.web=e}ngOnInit(){this.web.info().subscribe(e=>{this.world=e.world})}get link(){return this.world&&this.value?"https://"+this.world+".die-staemme.de/game.php?screen=info_village&id="+this.value.id:void 0}navigateTo(e){this.world&&this.value&&(e.stopPropagation(),window.open("https://"+this.world+".die-staemme.de/game.php?screen=info_village&id="+this.value.id,"_blank"))}}return e.\u0275fac=function(t){return new(t||e)(a.Ob(s.a))},e.\u0275cmp=a.Ib({type:e,selectors:[["app-village-render"]],inputs:{value:"value"},decls:1,vars:1,consts:[[4,"ngIf"],["target","_blank",3,"href","click",4,"ngIf"],["target","_blank",3,"href","click"]],template:function(e,t){1&e&&a.Jc(0,o,6,7,"ng-container",0),2&e&&a.pc("ngIf",t.value)},directives:[n.m],pipes:[n.e],styles:[".link[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]{color:inherit}"]}),e})()},qriC:function(e,t,i){"use strict";i.r(t),i.d(t,"ScavengeModule",(function(){return ie}));var a=i("ofXK"),s=i("tyNb"),n=i("XNiG"),c=i("1G5W"),l=i("fXoL"),o=i("M9ds"),r=i("PDjf");const b=function(e){return[e]};function u(e,t){if(1&e){const e=l.Vb();l.Ub(0,"span",2),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.jc().activeLink=i})),l.Lc(1),l.Tb()}if(2&e){const e=t.$implicit,i=l.jc();l.pc("active",i.activeLink===e)("routerLink",l.tc(3,b,e.link)),l.Bb(1),l.Nc(" ",e.title," ")}}let d=(()=>{class e{constructor(e){this.router=e,this.links=[{title:"Home",link:"/scavenge"}],this.activeLink=this.links[0],this.unsub$=new n.b}ngOnInit(){this.setActive(),this.router.events.pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.setActive()})}setActive(){for(const e of this.links)this.router.isActive(e.link,!1)&&(this.activeLink=e)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(s.c))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-scavenge"]],decls:4,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(e,t){1&e&&(l.Ub(0,"nav",0),l.Jc(1,u,2,5,"span",1),l.Tb(),l.Ub(2,"mat-card"),l.Pb(3,"router-outlet"),l.Tb()),2&e&&(l.Bb(1),l.pc("ngForOf",t.links))},directives:[o.b,a.l,r.a,s.g,o.a,s.d],styles:[""]}),e})();var g=i("3Pt+"),f=i("iELJ"),m=i("SxV6"),v=i("lJxs");class p{constructor(e){this.troops=e}getName(){return"io.robertengel.dsbot.feature.scavenge.ws.packet.incoming.ScavengeTaskAddRequest"}}class h{constructor(e,t){this.id=e,this.villages=t}getName(){return"io.robertengel.dsbot.feature.scavenge.ws.packet.incoming.ScavengeTaskMassVillageAddRequest"}}class T{constructor(e,t){this.id=e,this.villages=t}getName(){return"io.robertengel.dsbot.feature.scavenge.ws.packet.incoming.ScavengeTaskMassVillageRemoveRequest"}}class k{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.feature.scavenge.ws.packet.incoming.ScavengeTaskRemoveRequest"}}class w{constructor(e,t){this.id=e,this.village=t}getName(){return"io.robertengel.dsbot.feature.scavenge.ws.packet.incoming.ScavengeTaskVillageAddRequest"}}class U{constructor(e,t){this.id=e,this.village=t}getName(){return"io.robertengel.dsbot.feature.scavenge.ws.packet.incoming.ScavengeTaskVillageRemoveRequest"}}class O{constructor(e,t){this.id=e,this.troops=t}getName(){return"io.robertengel.dsbot.feature.scavenge.ws.packet.incoming.ScavengeTaskEditRequest"}}class C{getName(){return"ScavengeTasksListRequest"}}class y{constructor(e){this.enabled=e}getName(){return"io.robertengel.dsbot.feature.scavenge.ws.packet.incoming.ScavengeSetEnabledRequest"}}class x{getName(){return"ScavengeIsEnabledRequest"}}var V=i("7nMs");let j=(()=>{class e{constructor(e){this.web=e}listTasks(){return this.web.observable("ScavengeTasksResponse",new C).pipe(Object(m.a)())}setEnabled(e){this.web.sendData(new y(e))}enableEvent(e){return this.web.observable("ScavengeEnabledResponse",new x).pipe(Object(c.a)(e),Object(v.a)(e=>e.enabled))}taskAddedEvent(e){return this.web.observable("ScavengeTaskAddedEvent").pipe(Object(c.a)(e))}taskEditEvent(e){return this.web.observable("ScavengeTaskEditedEvent").pipe(Object(c.a)(e))}taskRemovedEvent(e){return this.web.observable("ScavengeTaskRemovedEvent").pipe(Object(c.a)(e),Object(v.a)(e=>e.id))}villageAddedEvent(e){return this.web.observable("ScavengeTaskVillageAddedEvent").pipe(Object(c.a)(e))}villageRemovedEvent(e){return this.web.observable("ScavengeTaskVillageRemovedEvent").pipe(Object(c.a)(e))}addTask(e){this.web.sendData(new p(e))}editTask(e,t){this.web.sendData(new O(e,t))}removeTask(e){this.web.sendData(new k(e))}addVillage(e,t){this.web.sendData(new w(e,t))}massAddVillage(e,t){this.web.sendData(new h(e,t))}removeVillage(e,t){this.web.sendData(new U(e,t))}massRemoveVillage(e,t){this.web.sendData(new T(e,t))}}return e.\u0275fac=function(t){return new(t||e)(l.cc(V.a))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var L=i("5eHb"),R=i("NFeN"),B=i("ZFy/"),I=i("38Pe"),E=i("bTqV"),P=i("7Ixi"),F=i("e6WT"),S=i("OaSA"),$=i("irRR");function A(e,t){1&e&&(l.Ub(0,"th",24),l.Lc(1,"Dorf"),l.Tb())}function D(e,t){if(1&e&&(l.Ub(0,"td",25),l.Pb(1,"app-village-render",26),l.Tb()),2&e){const e=t.$implicit;l.Bb(1),l.pc("value",e)}}function M(e,t){1&e&&l.Pb(0,"th",24)}function J(e,t){if(1&e){const e=l.Vb();l.Ub(0,"td",25),l.Ub(1,"button",27),l.fc("click",(function(){l.Ac(e);const i=t.$implicit;return l.jc(2).removeVillage(i.id)})),l.Ub(2,"mat-icon"),l.Lc(3,"delete"),l.Tb(),l.Tb(),l.Tb()}}function N(e,t){1&e&&l.Pb(0,"tr",28)}function q(e,t){1&e&&l.Pb(0,"tr",29)}function _(e,t){if(1&e&&(l.Ub(0,"div",16),l.Ub(1,"table",17),l.Sb(2,18),l.Jc(3,A,2,0,"th",19),l.Jc(4,D,2,1,"td",20),l.Rb(),l.Sb(5,21),l.Jc(6,M,1,0,"th",19),l.Jc(7,J,4,0,"td",20),l.Rb(),l.Jc(8,N,1,0,"tr",22),l.Jc(9,q,1,0,"tr",23),l.Tb(),l.Tb()),2&e){const e=l.jc();l.Bb(1),l.pc("dataSource",e.data.villages),l.Bb(7),l.pc("matHeaderRowDef",e.displayedColumns),l.Bb(1),l.pc("matRowDefColumns",e.displayedColumns)}}let H=(()=>{class e{constructor(e,t,i,a){this.data=e,this.dialogRef=t,this.scavenge=i,this.toastr=a,this.unsub$=new n.b,this.form=new g.e({},g.v.required),this.villageForm=new g.e("",g.v.required),this.massVillageForm=new g.e("",g.v.required),this.nonFarmUnits=["militia","ram","catapult","snob","spy"],this.displayedColumns=["village","delete"],this.form.setValue(e.troops)}ngOnInit(){this.scavenge.taskEditEvent(this.unsub$).subscribe(e=>{e.id===this.data.id&&(this.toastr.success("Erfolgreich bearbeitet.",void 0,{timeOut:7e3}),this.form.enable())}),this.scavenge.villageAddedEvent(this.unsub$).subscribe(e=>{e.id===this.data.id&&(this.data.villages=[...this.data.villages,...e.villages])}),this.scavenge.villageRemovedEvent(this.unsub$).subscribe(e=>{e.id===this.data.id&&(this.data.villages=this.data.villages.filter(t=>!e.villages.includes(t.id)))})}massAdd(){this.scavenge.massAddVillage(this.data.id,this.massVillageForm.value)}massRemove(){this.scavenge.massRemoveVillage(this.data.id,this.massVillageForm.value)}addVillage(){this.scavenge.addVillage(this.data.id,this.villageForm.value.id)}removeVillage(e){this.scavenge.removeVillage(this.data.id,e)}submit(e){this.form.disable(),this.scavenge.editTask(this.data.id,e)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(f.a),l.Ob(f.g),l.Ob(j),l.Ob(L.b))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-scavenge-task-edit"]],decls:33,vars:10,consts:[[1,"row"],[1,"col-xl-12"],[1,"form-group","row"],[1,"col-xl-3"],["matTooltip","Maximale Einheiten die \xfcber alle Raubz\xfcge verteilt werden."],[1,"col-xl-9"],[3,"formControl","excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],[1,"col-xl-6"],[1,"col-md-9"],[3,"formControl","onlyOwn"],["mat-raised-button","","color","primary",3,"disabled","click"],["placeholder","Massen Hinzuf\xfcgen/Entfernen","matInput","",3,"formControl"],["mat-raised-button","","color","primary",1,"mt-1",3,"disabled","click"],["class","col-xl-6 list",4,"ngIf"],[1,"col-xl-6","list"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","village"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["type","button","mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"label"),l.Lc(5,"Einheiten "),l.Ub(6,"mat-icon",4),l.Lc(7,"info "),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"div",5),l.Pb(9,"app-units-input",6),l.Tb(),l.Tb(),l.Ub(10,"div",2),l.Ub(11,"div",7),l.Pb(12,"span"),l.Ub(13,"button",8),l.fc("click",(function(){return t.submit(t.form.value)})),l.Lc(14," Bearbeiten "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(15,"div",0),l.Ub(16,"div",9),l.Ub(17,"div",0),l.Ub(18,"div",10),l.Pb(19,"app-village-input",11),l.Tb(),l.Ub(20,"div",3),l.Ub(21,"button",12),l.fc("click",(function(){return t.addVillage()})),l.Lc(22," Dorf hinzuf\xfcgen. "),l.Tb(),l.Tb(),l.Tb(),l.Ub(23,"div",0),l.Ub(24,"div",10),l.Pb(25,"textarea",13),l.Tb(),l.Ub(26,"div",3),l.Ub(27,"button",12),l.fc("click",(function(){return t.massAdd()})),l.Lc(28," D\xf6rfer hinzuf\xfcgen. "),l.Tb(),l.Pb(29,"br"),l.Ub(30,"button",14),l.fc("click",(function(){return t.massRemove()})),l.Lc(31," D\xf6rfer entfernen. "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Jc(32,_,10,3,"div",15),l.Tb()),2&e&&(l.Bb(9),l.pc("formControl",t.form)("excludeUnits",t.nonFarmUnits),l.Bb(4),l.pc("disabled",!t.form.valid||t.form.disabled),l.Bb(6),l.pc("formControl",t.villageForm)("onlyOwn",!0),l.Bb(2),l.pc("disabled",t.villageForm.disabled||t.villageForm.invalid),l.Bb(4),l.pc("formControl",t.massVillageForm),l.Bb(2),l.pc("disabled",t.massVillageForm.disabled||t.massVillageForm.invalid),l.Bb(3),l.pc("disabled",t.massVillageForm.disabled||t.massVillageForm.invalid),l.Bb(2),l.pc("ngIf",t.data.villages.length>0))},directives:[R.a,B.a,I.a,g.o,g.f,E.a,P.a,F.b,g.c,a.m,S.j,S.c,S.e,S.b,S.g,S.i,S.d,S.a,$.a,S.f,S.h],styles:[""]}),e})(),K=(()=>{class e{constructor(e,t){this.dialogRef=e,this.scavenge=t,this.form=new g.e({},g.v.required),this.nonFarmUnits=["militia","ram","catapult","snob","spy"]}ngOnInit(){}submit(e){this.form.disable(),this.scavenge.addTask(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(f.g),l.Ob(j))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-scavenge-task-add"]],decls:15,vars:3,consts:[[1,"row"],[1,"col-xl-12"],[1,"form-group","row"],[1,"col-xl-3"],["matTooltip","Maximale Einheiten die \xfcber alle Raubz\xfcge verteilt werden."],[1,"col-xl-9"],[3,"formControl","excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ub(4,"label"),l.Lc(5,"Einheiten "),l.Ub(6,"mat-icon",4),l.Lc(7," info "),l.Tb(),l.Tb(),l.Tb(),l.Ub(8,"div",5),l.Pb(9,"app-units-input",6),l.Tb(),l.Tb(),l.Ub(10,"div",2),l.Ub(11,"div",7),l.Pb(12,"span"),l.Ub(13,"button",8),l.fc("click",(function(){return t.submit(t.form.value)})),l.Lc(14," Hinzuf\xfcgen "),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Bb(9),l.pc("formControl",t.form)("excludeUnits",t.nonFarmUnits),l.Bb(4),l.pc("disabled",!t.form.valid||t.form.disabled))},directives:[R.a,B.a,I.a,g.o,g.f,E.a],styles:[""]}),e})();var X=i("jMqV"),z=i("k2HR");let W=(()=>{class e{constructor(e,t){this.dialog=e,this.scavenge=t,this.unsub$=new n.b,this.nonFarmUnits=["militia","ram","catapult","snob","spy"]}set task(e){this.internalTask=e}ngOnInit(){this.scavenge.taskEditEvent(this.unsub$).subscribe(e=>{e.id===this.internalTask.id&&(this.task=e)})}remove(){this.scavenge.removeTask(this.internalTask.id)}edit(){this.dialog.open(H,{data:this.internalTask})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(f.b),l.Ob(j))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-scavenge-task"]],inputs:{task:"task"},decls:24,vars:3,consts:[[1,"row"],[1,"col-xl-12"],[1,"col-xl-12","flex-between"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],[1,"row","mb-1"],[1,"col-sm-2"],[1,"col-sm-10"],[1,"col-md-2"],[1,"col-xl-10"],[3,"value","excludeUnits"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card"),l.Ub(3,"div",0),l.Ub(4,"div",2),l.Ub(5,"h1"),l.Lc(6,"Raubzugtask"),l.Tb(),l.Ub(7,"div"),l.Ub(8,"button",3),l.fc("click",(function(){return t.edit()})),l.Ub(9,"mat-icon"),l.Lc(10,"edit"),l.Tb(),l.Tb(),l.Ub(11,"button",4),l.fc("click",(function(){return t.remove()})),l.Ub(12,"mat-icon"),l.Lc(13,"delete"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(14,"div",5),l.Ub(15,"div",6),l.Lc(16," D\xf6rfer "),l.Tb(),l.Ub(17,"div",7),l.Lc(18),l.Tb(),l.Tb(),l.Ub(19,"div",0),l.Ub(20,"div",8),l.Lc(21," Einheiten "),l.Tb(),l.Ub(22,"div",9),l.Pb(23,"app-units-render",10),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb()),2&e&&(l.Bb(18),l.Nc(" ",t.internalTask.villages.length," "),l.Bb(5),l.pc("value",t.internalTask.troops)("excludeUnits",t.nonFarmUnits))},directives:[r.a,E.a,R.a,B.a,z.a],styles:[""]}),e})();function Z(e,t){1&e&&l.Pb(0,"app-scavenge-task",8),2&e&&l.pc("task",t.$implicit)}function G(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",0),l.Ub(1,"div",9),l.Pb(2,"span"),l.Ub(3,"span",10),l.Lc(4," Keine Tasks vorhanden."),l.Pb(5,"br"),l.Ub(6,"button",11),l.fc("click",(function(){return l.Ac(e),l.jc().add()})),l.Lc(7," Hinzuf\xfcgen. "),l.Tb(),l.Tb(),l.Pb(8,"span"),l.Tb(),l.Tb()}}const Q=[{path:"",component:d,children:[{path:"",pathMatch:"full",component:(()=>{class e{constructor(e,t){this.scavenge=e,this.dialog=t,this.unsub$=new n.b,this.slide=new g.e,this.dialogRef=void 0}ngOnInit(){this.scavenge.listTasks().subscribe(e=>{this.tasks=e}),this.scavenge.enableEvent(this.unsub$).subscribe(e=>{this.slide.setValue(e,{emitEvent:!1})}),this.slide.valueChanges.subscribe(e=>{this.scavenge.setEnabled(e)}),this.scavenge.taskEditEvent(this.unsub$).subscribe(e=>{this.tasks=this.tasks.map(t=>t.id===e.id?e:t)}),this.scavenge.taskAddedEvent(this.unsub$).subscribe(e=>{void 0!==this.dialogRef&&(this.dialogRef.close(),this.tasks=[...this.tasks,e],this.dialog.open(H,{data:e}))}),this.scavenge.taskRemovedEvent(this.unsub$).subscribe(e=>{this.tasks=this.tasks.filter(t=>t.id!==e)})}add(){this.dialogRef=this.dialog.open(K)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(j),l.Ob(f.b))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-scavenge-overview"]],decls:11,vars:3,consts:[[1,"row"],[1,"col-xl-12"],[1,"mb-3"],[1,"flex-between"],[3,"formControl"],["mat-mini-fab","","color","primary",3,"click"],[3,"task",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[3,"task"],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"div",1),l.Ub(2,"mat-card",2),l.Ub(3,"div",3),l.Ub(4,"div"),l.Pb(5,"mat-slide-toggle",4),l.Tb(),l.Ub(6,"button",5),l.fc("click",(function(){return t.add()})),l.Ub(7,"mat-icon"),l.Lc(8,"add"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Jc(9,Z,1,1,"app-scavenge-task",6),l.Jc(10,G,9,0,"div",7)),2&e&&(l.Bb(5),l.pc("formControl",t.slide),l.Bb(4),l.pc("ngForOf",t.tasks),l.Bb(1),l.pc("ngIf",t.tasks&&0===t.tasks.length))},directives:[r.a,X.a,g.o,g.f,E.a,R.a,a.l,a.m,W],styles:[""]}),e})()}]}];let Y=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[s.f.forChild(Q)],s.f]}),e})();var ee=i("BLWB"),te=i("Q2Ze");let ie=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[a.c,Y,o.c,r.f,ee.a,R.b,B.b,E.b,g.t,te.d,F.c,S.l,X.b]]}),e})()}}]);