(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"38Pe":function(t,e,i){"use strict";i.d(e,"a",(function(){return O}));var n=i("fXoL"),a=i("3Pt+"),s=i("lJxs"),r=i("UXun"),c=i("ZTz/"),o=i("DNTf"),l=i("0MNC"),b=i("7nMs"),u=i("ofXK"),m=i("Q2Ze"),d=i("e6WT"),f=i("bTqV"),p=i("FKr1");function h(t,e){if(1&t&&n.Pb(0,"img",8),2&t){const t=n.jc().$implicit,e=n.jc();n.pc("src",e.imagebase+"unit/unit_"+t+".png",n.Cc)}}const v=function(t,e){return{"col-xl-12":t,pad:e}};function g(t,e){if(1&t){const t=n.Vb();n.Ub(0,"span",0),n.kc(1,"async"),n.kc(2,"async"),n.Ub(3,"mat-form-field",3),n.Ub(4,"mat-label"),n.Lc(5),n.kc(6,"titlecase"),n.Tb(),n.Ub(7,"input",4,5),n.fc("change",(function(){n.Ac(t);const i=e.$implicit,a=n.xc(8);return n.jc().input(a.value,i)})),n.Tb(),n.Ub(9,"button",6),n.fc("click",(function(){n.Ac(t);const i=e.$implicit,a=n.xc(8);return n.jc().input("alle",i),a.value="alle"})),n.Jc(10,h,1,1,"img",7),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=e.$implicit,i=n.jc();n.pc("ngClass",n.uc(10,v,i.forceVertical||!0===n.lc(1,4,i.isHandset$),!(i.forceVertical||!0===n.lc(2,6,i.isHandset$)))),n.Bb(5),n.Mc(n.lc(6,8,t)),n.Bb(2),n.pc("id","troop_input_"+t),n.Bb(3),n.pc("ngIf",i.imagebase)}}function T(t,e){if(1&t&&n.Pb(0,"img",18),2&t){const t=n.jc(3);n.pc("src",t.imagebase+"buildings/"+t.formControl.value.cataTarget+".png",n.Cc)}}function U(t,e){if(1&t&&(n.Ub(0,"mat-select-trigger"),n.Ub(1,"div",16),n.Ub(2,"span"),n.Lc(3),n.kc(4,"titlecase"),n.Tb(),n.Jc(5,T,1,1,"img",17),n.Tb(),n.Tb()),2&t){const t=n.jc(2);n.Bb(3),n.Mc(n.lc(4,2,t.formControl.value.cataTarget)),n.Bb(2),n.pc("ngIf",t.imagebase)}}function w(t,e){if(1&t&&n.Pb(0,"img",18),2&t){const t=n.jc().$implicit,e=n.jc(2);n.pc("src",e.imagebase+"buildings/"+t+".png",n.Cc)}}function C(t,e){if(1&t&&(n.Ub(0,"mat-option",19),n.Ub(1,"div",16),n.Ub(2,"span"),n.Lc(3),n.kc(4,"titlecase"),n.Tb(),n.Jc(5,w,1,1,"img",17),n.Tb(),n.Tb()),2&t){const t=e.$implicit,i=n.jc(2);n.pc("value",t),n.Bb(3),n.Mc(n.lc(4,3,t)),n.Bb(2),n.pc("ngIf",i.imagebase)}}function x(t,e){if(1&t){const t=n.Vb();n.Ub(0,"div",9),n.Ub(1,"div",10),n.Ub(2,"mat-form-field"),n.Ub(3,"mat-label"),n.Lc(4,"Katapult Ziel"),n.Tb(),n.Ub(5,"mat-select",11,12),n.fc("valueChange",(function(){n.Ac(t);const e=n.xc(6);return n.jc().input(e.value,"cataTarget")})),n.Jc(7,U,6,4,"mat-select-trigger",13),n.Ub(8,"mat-option",14),n.Lc(9,"Default"),n.Tb(),n.Jc(10,C,6,5,"mat-option",15),n.Tb(),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.jc();n.Bb(7),n.pc("ngIf","///DEFAULT///"!==t.formControl.value.cataTarget),n.Bb(3),n.pc("ngForOf",t.buildings)}}const k=function(t,e){return{spread:t,row:e}};let O=(()=>{class t{constructor(t,e){this.breakpointObserver=t,this.web=e,this.forceVertical=!1,this.hideCataTarget=!1,this.excludeUnits=[],this.units=[],this.buildings=[],this.formControl=new a.e({cataTarget:"///DEFAULT///"}),this.isHandset$=this.breakpointObserver.observe(o.a).pipe(Object(s.a)(t=>t.matches),Object(r.a)()),this.propagateChange=t=>{}}ngOnInit(){this.web.infoObservable.subscribe(t=>{this.units=t.units,this.units=this.units.filter(t=>!this.excludeUnits.includes(t)),this.imagebase=t.imageBase,this.buildings=t.buildings}),this.units.forEach(t=>{const e={};e[t]="0",this.formControl.patchValue(e)}),this.formControl.valueChanges.subscribe(t=>{this.propagateChange(t)})}input(t,e){const i={};i[e]=t,this.formControl.setValue(Object.assign(Object.assign({},this.formControl.value),i))}get cata(){return this.formControl.value.catapult&&"0"!==this.formControl.value.catapult}writeValue(t){null==t&&(t={cataTarget:"///DEFAULT///"}),this.formControl.setValue(t),setTimeout(()=>{void 0!==this.select&&(this.select.value=t.cataTarget),this.units.forEach(e=>{const i=document.getElementById("troop_input_"+e);null!==i&&t.hasOwnProperty(e)&&(i.value=t[e])})},10)}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){}setDisabledState(t){t?this.formControl.disable():this.formControl.enable()}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(l.a),n.Ob(b.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-units-input"]],viewQuery:function(t,e){var i;1&t&&n.Rc(c.a,!0),2&t&&n.wc(i=n.gc())&&(e.select=i.first)},inputs:{forceVertical:"forceVertical",hideCataTarget:"hideCataTarget",excludeUnits:"excludeUnits"},features:[n.Ab([{provide:a.m,multi:!0,useExisting:Object(n.V)(()=>t)}])],decls:5,vars:10,consts:[[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"full-width"],["matInput","","type","text",3,"id","change"],["t",""],["mat-button","","matSuffix","","mat-icon-button","",3,"click"],["class","img-fluid",3,"src",4,"ngIf"],[1,"img-fluid",3,"src"],[1,"row"],[1,"col-12"],[3,"valueChange"],["select",""],[4,"ngIf"],["value","///DEFAULT///"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-between"],["matSuffix","","class","img-fluid",3,"src",4,"ngIf"],["matSuffix","",1,"img-fluid",3,"src"],[3,"value"]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.kc(1,"async"),n.kc(2,"async"),n.Jc(3,g,11,13,"span",1),n.Tb(),n.Jc(4,x,11,2,"div",2)),2&t&&(n.pc("ngClass",n.uc(7,k,!(e.forceVertical||!0===n.lc(1,3,e.isHandset$)),e.forceVertical||!0===n.lc(2,5,e.isHandset$))),n.Bb(3),n.pc("ngForOf",e.units),n.Bb(1),n.pc("ngIf",e.cata&&!e.hideCataTarget))},directives:[u.k,u.l,u.m,m.b,m.f,d.b,f.a,m.g,c.a,p.n,c.c],pipes:[u.b,u.v],styles:[".full-width[_ngcontent-%COMP%]{width:99%}.pad[_ngcontent-%COMP%]{padding-left:6px;padding-right:6px}div.spread[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}div.spread[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:table-cell;text-align:center}"]}),t})()},"7Ixi":function(t,e,i){"use strict";i.d(e,"a",(function(){return g}));var n=i("fXoL"),a=i("3Pt+"),s=i("LRne"),r=i("Kj3r"),c=i("eIep"),o=i("YWTT"),l=i("Q2Ze"),b=i("e6WT"),u=i("vrAh"),m=i("ofXK"),d=i("bTqV"),f=i("NFeN"),p=i("FKr1");function h(t,e){if(1&t){const t=n.Vb();n.Ub(0,"button",6),n.fc("click",(function(){return n.Ac(t),n.jc().formControl.reset()})),n.Ub(1,"mat-icon"),n.Lc(2,"close"),n.Tb(),n.Tb()}}function v(t,e){if(1&t&&(n.Ub(0,"mat-option",7),n.Ub(1,"span"),n.Lc(2),n.Tb(),n.Ub(3,"small"),n.Lc(4),n.Tb(),n.Tb()),2&t){const t=e.$implicit;n.pc("value",t),n.Bb(2),n.Mc(t.search),n.Bb(2),n.Nc(" | Punkte: ",t.points,"")}}let g=(()=>{class t{constructor(t){this.villageService=t,this.label="Dorf",this.showClear=!1,this.onlyOwn=!1,this.formControl=new a.e("",t=>null==t.value||!t.value.id||"number"!=typeof t.value.id||t.value.id<0?{source:!0}:null),this.propagateChange=t=>{}}ngOnInit(){this.formControl.valueChanges.subscribe(t=>{this.propagateChange(t)})}writeValue(t){this.formControl.setValue(t)}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){}setDisabledState(t){t?this.formControl.disable():this.formControl.enable()}displayFn(t){return t?t.search:""}ngAfterViewInit(){this.villages$=this.formControl.valueChanges.pipe(Object(r.a)(300),Object(c.a)(t=>"string"==typeof t?this.villageService.searchVillages(t,this.onlyOwn):"object"==typeof t&&null!==t?this.villageService.searchVillages(t.search,this.onlyOwn):Object(s.a)(void 0)))}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(o.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-village-input"]],inputs:{label:"label",showClear:"showClear",onlyOwn:"onlyOwn"},features:[n.Ab([{provide:a.m,multi:!0,useExisting:Object(n.V)(()=>t)},{provide:a.l,useValue:t=>null==t.value||!t.value.id||"number"!=typeof t.value.id||t.value.id<0?{source:!0}:null,multi:!0}])],decls:7,vars:8,consts:[[1,"full-width"],["autocomplete","off","autocapitalize","off","spellcheck","false","matInput","",1,"full-width",3,"placeholder","matAutocomplete","formControl"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["panelWidth","450px",3,"displayWith"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"]],template:function(t,e){if(1&t&&(n.Ub(0,"mat-form-field",0),n.Pb(1,"input",1),n.Jc(2,h,3,0,"button",2),n.Tb(),n.Ub(3,"mat-autocomplete",3,4),n.Jc(5,v,5,3,"mat-option",5),n.kc(6,"async"),n.Tb()),2&t){const t=n.xc(4);n.Bb(1),n.pc("placeholder",e.label)("matAutocomplete",t)("formControl",e.formControl),n.Bb(1),n.pc("ngIf",e.showClear&&e.formControl.value),n.Bb(1),n.pc("displayWith",e.displayFn),n.Bb(2),n.pc("ngForOf",n.lc(6,6,e.villages$))}},directives:[l.b,b.b,u.c,a.c,a.o,a.f,m.m,u.a,m.l,d.a,l.g,f.a,p.n],pipes:[m.b],styles:[".full-width[_ngcontent-%COMP%]{width:100%}"]}),t})()},DNTf:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));const n="(max-width: 1100.99px)"},MjV7:function(t,e,i){"use strict";i.r(e),i.d(e,"FarmModule",(function(){return Jt}));var n=i("ofXK"),a=i("tyNb"),s=i("XNiG"),r=i("1G5W"),c=i("fXoL"),o=i("M9ds");const l=function(t){return[t]};function b(t,e){if(1&t){const t=c.Vb();c.Ub(0,"span",2),c.fc("click",(function(){c.Ac(t);const i=e.$implicit;return c.jc().activeLink=i})),c.Lc(1),c.Tb()}if(2&t){const t=e.$implicit,i=c.jc();c.pc("active",i.activeLink===t)("routerLink",c.tc(3,l,t.link)),c.Bb(1),c.Nc(" ",t.title," ")}}let u=(()=>{class t{constructor(t){this.router=t,this.links=[{title:"Home",link:"/farm"},{title:"Routen",link:"/farm/routes"}],this.activeLink=this.links[0],this.unsub$=new s.b}ngOnInit(){this.setActive(),this.router.events.pipe(Object(r.a)(this.unsub$)).subscribe(t=>{this.setActive()})}setActive(){for(const t of this.links)this.router.isActive(t.link,!1)&&(this.activeLink=t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(a.c))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm"]],decls:3,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(t,e){1&t&&(c.Ub(0,"nav",0),c.Jc(1,b,2,5,"span",1),c.Tb(),c.Pb(2,"router-outlet")),2&t&&(c.Bb(1),c.pc("ngForOf",e.links))},directives:[o.b,n.l,a.g,o.a,a.d],styles:[""]}),t})();var m=i("iELJ"),d=i("3Pt+"),f=i("dXaO"),p=i("Q2Ze"),h=i("ZTz/"),v=i("FKr1"),g=i("mPVK"),T=i("NFeN"),U=i("ZFy/"),w=i("TIdL"),C=i("bTqV");let x=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.fb=e,this.farm=i,this.form=this.fb.group({farmGroup:"A",units:{},timerInterval:30,maxDistance:20}),this.nonFarmUnits=["militia","ram","catapult","snob"]}ngOnInit(){}submit(t){this.form.disable(),this.farm.addEntity(t.farmGroup,t.units,t.timerInterval,t.maxDistance).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(m.g),c.Ob(d.d),c.Ob(f.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm-task-add"]],decls:38,vars:3,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"w-100"],["formControlName","farmGroup"],["value","A"],["value","B"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],["for","maxDistance"],["id","maxDistance","formControlName","maxDistance","min","1","max","100","thumbLabel","true",1,"w-100"],["matTooltip","Leer lassen um Gruppe nicht zu \xe4ndern."],["formControlName","units",3,"excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"form",2),c.fc("ngSubmit",(function(){return e.submit(e.form.value)})),c.Ub(3,"div",3),c.Ub(4,"div",1),c.Ub(5,"mat-form-field",4),c.Ub(6,"mat-label"),c.Lc(7,"Gruppe"),c.Tb(),c.Ub(8,"mat-select",5),c.Ub(9,"mat-option",6),c.Lc(10,"A"),c.Tb(),c.Ub(11,"mat-option",7),c.Lc(12,"B"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(13,"div",3),c.Ub(14,"div",8),c.Ub(15,"label",9),c.Lc(16,"Interval (Minuten)"),c.Tb(),c.Tb(),c.Ub(17,"div",10),c.Pb(18,"mat-slider",11),c.Tb(),c.Tb(),c.Ub(19,"div",3),c.Ub(20,"div",8),c.Ub(21,"label",12),c.Lc(22,"Max Entfernung"),c.Tb(),c.Tb(),c.Ub(23,"div",10),c.Pb(24,"mat-slider",13),c.Tb(),c.Tb(),c.Ub(25,"div",3),c.Ub(26,"div",8),c.Ub(27,"label",12),c.Lc(28,"Einheiten "),c.Ub(29,"mat-icon",14),c.Lc(30,"info"),c.Tb(),c.Tb(),c.Tb(),c.Ub(31,"div",10),c.Pb(32,"app-units-holder-input",15),c.Tb(),c.Tb(),c.Ub(33,"div",3),c.Ub(34,"div",16),c.Pb(35,"span"),c.Ub(36,"button",17),c.Lc(37," Hinzuf\xfcgen "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Bb(2),c.pc("formGroup",e.form),c.Bb(30),c.pc("excludeUnits",e.nonFarmUnits),c.Bb(4),c.pc("disabled",!e.form.valid||e.form.disabled))},directives:[d.x,d.p,d.i,p.b,p.f,h.a,d.o,d.g,v.n,g.a,T.a,U.a,w.a,C.a],styles:[""]}),t})();var k=i("7Ixi"),O=i("e6WT"),I=i("OaSA"),y=i("irRR");function L(t,e){1&t&&(c.Ub(0,"th",33),c.Lc(1,"Dorf"),c.Tb())}function B(t,e){if(1&t&&(c.Ub(0,"td",34),c.Pb(1,"app-village-render",35),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.pc("value",t)}}function P(t,e){1&t&&c.Pb(0,"th",33)}function R(t,e){if(1&t){const t=c.Vb();c.Ub(0,"td",34),c.Ub(1,"button",36),c.fc("click",(function(){c.Ac(t);const i=e.$implicit;return c.jc(2).removeVillage(i.id)})),c.Ub(2,"mat-icon"),c.Lc(3,"delete"),c.Tb(),c.Tb(),c.Tb()}}function j(t,e){1&t&&c.Pb(0,"tr",37)}function D(t,e){1&t&&c.Pb(0,"tr",38)}function V(t,e){if(1&t&&(c.Ub(0,"div",25),c.Ub(1,"table",26),c.Sb(2,27),c.Jc(3,L,2,0,"th",28),c.Jc(4,B,2,1,"td",29),c.Rb(),c.Sb(5,30),c.Jc(6,P,1,0,"th",28),c.Jc(7,R,4,0,"td",29),c.Rb(),c.Jc(8,j,1,0,"tr",31),c.Jc(9,D,1,0,"tr",32),c.Tb(),c.Tb()),2&t){const t=c.jc();c.Bb(1),c.pc("dataSource",t.data.villages),c.Bb(7),c.pc("matHeaderRowDef",t.displayedColumns),c.Bb(1),c.pc("matRowDefColumns",t.displayedColumns)}}let J=(()=>{class t{constructor(t,e,i,n){this.data=t,this.dialogRef=e,this.fb=i,this.farm=n,this.unsub$=new s.b,this.form=this.fb.group({farmGroup:"A",units:{},timerInterval:30,maxDistance:20}),this.villageForm=new d.e("",d.v.required),this.massVillageForm=new d.e("",d.v.required),this.nonFarmUnits=["militia","ram","catapult","snob"],this.displayedColumns=["village","delete"],this.form.setValue({farmGroup:t.farmGroup,units:t.units,timerInterval:t.timerInterval,maxDistance:t.maxDistance})}ngOnInit(){this.farm.villageAddEvent(this.unsub$).subscribe(t=>{t.id===this.data.id&&(this.data.villages=[...this.data.villages,...t.villages])}),this.farm.villageRemoveEvent(this.unsub$).subscribe(t=>{t.id===this.data.id&&(this.data.villages=this.data.villages.filter(e=>!t.villages.includes(e.id)))})}massAdd(){this.farm.massAddVillage(this.data.id,this.massVillageForm.value)}massRemove(){this.farm.massRemoveVillage(this.data.id,this.massVillageForm.value)}addVillage(){this.farm.addVillage(this.data.id,this.villageForm.value.id)}removeVillage(t){this.farm.removeVillage(this.data.id,t)}submit(t){this.form.disable(),this.farm.editEntity(this.data.id,t.farmGroup,t.units,t.timerInterval,t.maxDistance).subscribe(t=>{this.dialogRef.close(t)})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(m.a),c.Ob(m.g),c.Ob(d.d),c.Ob(f.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm-task-edit"]],decls:56,vars:10,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"w-100"],["formControlName","farmGroup"],["value","A"],["value","B"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],["for","maxDistance"],["id","maxDistance","formControlName","maxDistance","min","1","max","100","thumbLabel","true",1,"w-100"],["matTooltip","Leer lassen um Gruppe nicht zu \xe4ndern."],["formControlName","units",3,"excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"col-xl-6"],[1,"col-md-9"],[3,"formControl","onlyOwn"],["mat-raised-button","","color","primary",3,"disabled","click"],["placeholder","Massen Hinzuf\xfcgen/Entfernen","matInput","",3,"formControl"],["mat-raised-button","","color","primary",1,"mt-1",3,"disabled","click"],["class","col-xl-6 list",4,"ngIf"],[1,"col-xl-6","list"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","village"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["type","button","mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"form",2),c.fc("ngSubmit",(function(){return e.submit(e.form.value)})),c.Ub(3,"div",3),c.Ub(4,"div",1),c.Ub(5,"mat-form-field",4),c.Ub(6,"mat-label"),c.Lc(7,"Gruppe"),c.Tb(),c.Ub(8,"mat-select",5),c.Ub(9,"mat-option",6),c.Lc(10,"A"),c.Tb(),c.Ub(11,"mat-option",7),c.Lc(12,"B"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(13,"div",3),c.Ub(14,"div",8),c.Ub(15,"label",9),c.Lc(16,"Interval (Minuten)"),c.Tb(),c.Tb(),c.Ub(17,"div",10),c.Pb(18,"mat-slider",11),c.Tb(),c.Tb(),c.Ub(19,"div",3),c.Ub(20,"div",8),c.Ub(21,"label",12),c.Lc(22,"Max Entfernung"),c.Tb(),c.Tb(),c.Ub(23,"div",10),c.Pb(24,"mat-slider",13),c.Tb(),c.Tb(),c.Ub(25,"div",3),c.Ub(26,"div",8),c.Ub(27,"label",12),c.Lc(28,"Einheiten "),c.Ub(29,"mat-icon",14),c.Lc(30,"info"),c.Tb(),c.Tb(),c.Tb(),c.Ub(31,"div",10),c.Pb(32,"app-units-holder-input",15),c.Tb(),c.Tb(),c.Ub(33,"div",3),c.Ub(34,"div",16),c.Pb(35,"span"),c.Ub(36,"button",17),c.Lc(37," Bearbeiten "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(38,"div",0),c.Ub(39,"div",18),c.Ub(40,"div",0),c.Ub(41,"div",19),c.Pb(42,"app-village-input",20),c.Tb(),c.Ub(43,"div",8),c.Ub(44,"button",21),c.fc("click",(function(){return e.addVillage()})),c.Lc(45," Dorf hinzuf\xfcgen. "),c.Tb(),c.Tb(),c.Tb(),c.Ub(46,"div",0),c.Ub(47,"div",19),c.Pb(48,"textarea",22),c.Tb(),c.Ub(49,"div",8),c.Ub(50,"button",21),c.fc("click",(function(){return e.massAdd()})),c.Lc(51," D\xf6rfer hinzuf\xfcgen. "),c.Tb(),c.Pb(52,"br"),c.Ub(53,"button",23),c.fc("click",(function(){return e.massRemove()})),c.Lc(54," D\xf6rfer entfernen. "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Jc(55,V,10,3,"div",24),c.Tb()),2&t&&(c.Bb(2),c.pc("formGroup",e.form),c.Bb(30),c.pc("excludeUnits",e.nonFarmUnits),c.Bb(4),c.pc("disabled",!e.form.valid||e.form.disabled),c.Bb(6),c.pc("formControl",e.villageForm)("onlyOwn",!0),c.Bb(2),c.pc("disabled",e.villageForm.disabled||e.villageForm.invalid),c.Bb(4),c.pc("formControl",e.massVillageForm),c.Bb(2),c.pc("disabled",e.massVillageForm.disabled||e.massVillageForm.invalid),c.Bb(3),c.pc("disabled",e.massVillageForm.disabled||e.massVillageForm.invalid),c.Bb(2),c.pc("ngIf",e.data.villages.length>0))},directives:[d.x,d.p,d.i,p.b,p.f,h.a,d.o,d.g,v.n,g.a,T.a,U.a,w.a,C.a,k.a,d.f,O.b,d.c,n.m,I.j,I.c,I.e,I.b,I.g,I.i,I.d,I.a,y.a,I.f,I.h],styles:[".list[_ngcontent-%COMP%]{overflow-y:scroll;max-height:50%}"]}),t})();var F=i("PDjf"),S=i("jMqV"),$=i("7nMs"),A=i("f44v");function M(t,e){if(1&t&&c.Pb(0,"img",3),2&t){const t=c.jc(2).$implicit,e=c.jc(2);c.pc("src",e.imagebase+"unit/unit_"+t+".png",c.Cc)}}function N(t,e){if(1&t&&(c.Ub(0,"mat-chip"),c.Lc(1),c.Jc(2,M,1,1,"img",2),c.Tb()),2&t){const t=c.jc().$implicit,e=c.jc(2);c.Bb(1),c.Nc(" ",e.value[t]," "),c.Bb(1),c.pc("ngIf",e.imagebase)}}function E(t,e){if(1&t&&(c.Sb(0),c.Jc(1,N,3,2,"mat-chip",0),c.Rb()),2&t){const t=e.$implicit,i=c.jc(2);c.Bb(1),c.pc("ngIf","0"!==i.value[t]&&0!==i.value[t])}}function G(t,e){if(1&t&&(c.Ub(0,"mat-chip-list"),c.Jc(1,E,2,1,"ng-container",1),c.Tb()),2&t){const t=c.jc();c.Bb(1),c.pc("ngForOf",t.units)}}let H=(()=>{class t{constructor(t){this.web=t,this.excludeUnits=[]}ngOnInit(){this.web.infoObservable.subscribe(t=>{this.units=t.units,this.units=this.units.filter(t=>!this.excludeUnits.includes(t)),this.imagebase=t.imageBase})}get empty(){for(const t of this.units)if("0"!==this.value[t]&&0!==this.value[t])return!1;return!0}}return t.\u0275fac=function(e){return new(e||t)(c.Ob($.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-units-render-min"]],inputs:{value:"value",excludeUnits:"excludeUnits"},decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],["class","img-fluid ml-1",3,"src",4,"ngIf"],[1,"img-fluid","ml-1",3,"src"]],template:function(t,e){1&t&&c.Jc(0,G,2,1,"mat-chip-list",0),2&t&&c.pc("ngIf",!e.empty)},directives:[n.m,A.b,n.l,A.a],styles:[""]}),t})();function _(t,e){1&t&&(c.Ub(0,"th",18),c.Lc(1,"Interval"),c.Tb())}function q(t,e){if(1&t&&(c.Ub(0,"td",19),c.Lc(1),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.Nc(" ",t.timerInterval," Minuten ")}}function K(t,e){1&t&&(c.Ub(0,"th",18),c.Lc(1,"Max Entfernung"),c.Tb())}function z(t,e){if(1&t&&(c.Ub(0,"td",19),c.Lc(1),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.Nc(" ",t.maxDistance," Felder ")}}function X(t,e){1&t&&(c.Ub(0,"th",18),c.Lc(1,"D\xf6rfer"),c.Tb())}function Z(t,e){if(1&t&&(c.Ub(0,"td",19),c.Lc(1),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.Nc(" ",t.villages.length," ")}}function W(t,e){1&t&&(c.Ub(0,"th",18),c.Lc(1,"Einheiten"),c.Tb())}function Q(t,e){if(1&t&&(c.Ub(0,"td",19),c.Lc(1),c.Pb(2,"app-units-render-min",20),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.Nc(" Gruppe ",t.farmGroup,": "),c.Bb(1),c.pc("value",t.units)}}function Y(t,e){if(1&t){const t=c.Vb();c.Ub(0,"th",18),c.Ub(1,"button",21),c.fc("click",(function(){return c.Ac(t),c.jc(2).add()})),c.Ub(2,"mat-icon"),c.Lc(3,"add"),c.Tb(),c.Tb(),c.Tb()}}function tt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"td",19),c.Pb(1,"mat-slide-toggle",22),c.Ub(2,"button",23),c.fc("click",(function(){c.Ac(t);const i=e.$implicit;return c.jc(2).edit(i)})),c.Ub(3,"mat-icon"),c.Lc(4,"edit"),c.Tb(),c.Tb(),c.Ub(5,"button",24),c.fc("click",(function(){c.Ac(t);const i=e.$implicit;return c.jc(2).delete(i.id)})),c.Ub(6,"mat-icon"),c.Lc(7,"delete"),c.Tb(),c.Tb(),c.Tb()}if(2&t){const t=e.$implicit,i=c.jc(2);c.Bb(1),c.pc("formControl",i.slides[t.id])}}function et(t,e){1&t&&c.Pb(0,"tr",25)}function it(t,e){1&t&&c.Pb(0,"tr",26)}function nt(t,e){if(1&t&&(c.Ub(0,"table",8),c.Sb(1,9),c.Jc(2,_,2,0,"th",10),c.Jc(3,q,2,1,"td",11),c.Rb(),c.Sb(4,12),c.Jc(5,K,2,0,"th",10),c.Jc(6,z,2,1,"td",11),c.Rb(),c.Sb(7,13),c.Jc(8,X,2,0,"th",10),c.Jc(9,Z,2,1,"td",11),c.Rb(),c.Sb(10,14),c.Jc(11,W,2,0,"th",10),c.Jc(12,Q,3,2,"td",11),c.Rb(),c.Sb(13,15),c.Jc(14,Y,4,0,"th",10),c.Jc(15,tt,8,1,"td",11),c.Rb(),c.Jc(16,et,1,0,"tr",16),c.Jc(17,it,1,0,"tr",17),c.Tb()),2&t){const t=c.jc();c.pc("dataSource",t.tasks),c.Bb(16),c.pc("matHeaderRowDef",t.displayedColumns),c.Bb(1),c.pc("matRowDefColumns",t.displayedColumns)}}function at(t,e){if(1&t){const t=c.Vb();c.Ub(0,"div",0),c.Ub(1,"div",27),c.Pb(2,"span"),c.Ub(3,"span",28),c.Lc(4," Keine Tasks vorhanden."),c.Pb(5,"br"),c.Ub(6,"button",29),c.fc("click",(function(){return c.Ac(t),c.jc().add()})),c.Lc(7," Hinzuf\xfcgen. "),c.Tb(),c.Tb(),c.Pb(8,"span"),c.Tb(),c.Tb()}}let st=(()=>{class t{constructor(t,e){this.farm=t,this.dialog=e,this.unsub$=new s.b,this.slide=new d.e,this.max=new d.e,this.slides={},this.displayedColumns=["interval","maxDistance","villages","units","control"]}ngOnInit(){this.farm.list(this.unsub$).subscribe(t=>{this.tasks=t;for(const e of t)this.slides[e.id]=new d.e(e.enabled),this.slides[e.id].valueChanges.subscribe(t=>{this.farm.setTaskEnabled(e.id,t).subscribe()})}),this.farm.config(this.unsub$).subscribe(t=>{this.slide.setValue(t.enabled,{emitEvent:!1}),this.max.setValue(t.maxIncsPerVillage,{emitEvent:!1})}),this.slide.valueChanges.subscribe(t=>{this.farm.setEnabled(t)}),this.max.valueChanges.subscribe(t=>{this.farm.setMaxIncs(t)})}add(){this.dialog.open(x).afterClosed().subscribe(t=>{void 0!==t&&(this.tasks=[...this.tasks,t],this.dialog.open(J,{data:t}))})}delete(t){this.farm.deleteEntity(t).subscribe(t=>{this.tasks=this.tasks.filter(e=>e.id!==t)})}edit(t){this.dialog.open(J,{data:t}).afterClosed().subscribe(e=>{void 0!==e&&(this.tasks=this.tasks.map(i=>i.id===t.id?e:i))})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(f.a),c.Ob(m.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm-overview"]],decls:12,vars:4,consts:[[1,"row"],[1,"col-xl-12"],[1,"mb-3"],[3,"formControl"],[1,"ml-3"],["matInput","","type","number",3,"formControl"],["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["class","row",4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","interval"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","maxDistance"],["matColumnDef","villages"],["matColumnDef","units"],["matColumnDef","control"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["mat-mini-fab","","color","primary",3,"click"],[1,"mr-2",3,"formControl"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"mat-card",2),c.Pb(3,"mat-slide-toggle",3),c.Ub(4,"mat-form-field",4),c.Ub(5,"mat-label"),c.Lc(6,"Max Angriffe"),c.Tb(),c.Pb(7,"input",5),c.Ub(8,"mat-hint"),c.Lc(9,"Maximale Anzahl an Angriffen pro Babarendorf."),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Jc(10,nt,18,3,"table",6),c.Jc(11,at,9,0,"div",7)),2&t&&(c.Bb(3),c.pc("formControl",e.slide),c.Bb(4),c.pc("formControl",e.max),c.Bb(3),c.pc("ngIf",e.tasks&&e.tasks.length>0),c.Bb(1),c.pc("ngIf",e.tasks&&0===e.tasks.length))},directives:[F.a,S.a,d.o,d.f,p.b,p.f,O.b,d.s,d.c,p.e,n.m,I.j,I.c,I.e,I.b,I.g,I.i,I.d,I.a,H,C.a,T.a,U.a,I.f,I.h],styles:[".mat-column-control[_ngcontent-%COMP%]{width:10%}"]}),t})();var rt=i("SxV6"),ct=i("pLZG"),ot=i("lJxs");class lt{getName(){return"ListFarmRouteRequest"}}class bt{constructor(t,e,i,n){this.source=t,this.target=e,this.troops=i,this.timerInterval=n}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.AddFarmRouteRequest"}}class ut{constructor(t){this.id=t}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.DeleteFarmRouteRequest"}}class mt{constructor(t,e,i,n,a){this.id=t,this.source=e,this.target=i,this.troops=n,this.timerInterval=a}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.EditFarmRouteRequest"}}class dt{constructor(t,e){this.id=t,this.enabled=e}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.FarmRouteSetEnabledRequest"}}let ft=(()=>{class t{constructor(t){this.websocketService=t}list(t){return this.websocketService.observable("ListFarmRouteResponse",new lt).pipe(Object(r.a)(t))}addEntity(t,e,i,n){return this.websocketService.observable("AddFarmRouteResponse",new bt(t,e,i,n)).pipe(Object(rt.a)())}deleteEntity(t){return this.websocketService.observable("DeleteFarmRouteResponse",new ut(t)).pipe(Object(ct.a)(e=>e.id===t),Object(rt.a)(),Object(ot.a)(t=>t.id))}editEntity(t,e,i,n,a){return this.websocketService.observable("EditFarmRouteResponse",new mt(t,e,i,n,a)).pipe(Object(rt.a)())}setTaskEnabled(t,e){return this.websocketService.observable("FarmRouteSetEnabledResponse",new dt(t,e)).pipe(Object(ct.a)(e=>e.id===t),Object(rt.a)())}}return t.\u0275fac=function(e){return new(e||t)(c.cc($.a))},t.\u0275prov=c.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var pt=i("38Pe");let ht=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.fb=e,this.farm=i,this.form=this.fb.group({source:[void 0,d.v.required],target:[void 0,d.v.required],troops:{},timerInterval:[30,d.v.min(1)]})}ngOnInit(){}submit(t){this.form.disable(),this.farm.addEntity(t.source.id,t.target.id,t.troops,t.timerInterval).subscribe(t=>{console.log("got route from service:"),console.log(t),this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(m.g),c.Ob(d.d),c.Ob(ft))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm-route-add"]],decls:26,vars:2,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["label","Herkunft","formControlName","source"],["label","Ziel","formControlName","target"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],[1,"col-sm-2"],["formControlName","troops"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"form",2),c.fc("ngSubmit",(function(){return e.submit(e.form.value)})),c.Ub(3,"div",3),c.Ub(4,"div",1),c.Pb(5,"app-village-input",4),c.Tb(),c.Tb(),c.Ub(6,"div",3),c.Ub(7,"div",1),c.Pb(8,"app-village-input",5),c.Tb(),c.Tb(),c.Ub(9,"div",3),c.Ub(10,"div",6),c.Ub(11,"label",7),c.Lc(12,"Interval (Minuten)"),c.Tb(),c.Tb(),c.Ub(13,"div",8),c.Pb(14,"mat-slider",9),c.Tb(),c.Tb(),c.Ub(15,"div",3),c.Ub(16,"div",10),c.Ub(17,"label"),c.Lc(18," Einheiten "),c.Tb(),c.Tb(),c.Ub(19,"div",1),c.Pb(20,"app-units-input",11),c.Tb(),c.Tb(),c.Ub(21,"div",3),c.Ub(22,"div",12),c.Pb(23,"span"),c.Ub(24,"button",13),c.Lc(25," Hinzuf\xfcgen "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Bb(2),c.pc("formGroup",e.form),c.Bb(22),c.pc("disabled",!e.form.valid||e.form.disabled))},directives:[d.x,d.p,d.i,k.a,d.o,d.g,g.a,pt.a,C.a],styles:[""]}),t})(),vt=(()=>{class t{constructor(t,e,i,n){this.data=t,this.dialogRef=e,this.fb=i,this.farm=n,this.form=this.fb.group({source:[void 0,d.v.required],target:[void 0,d.v.required],troops:{},timerInterval:[30,d.v.min(1)]}),this.form.setValue({source:t.source,target:t.target,timerInterval:t.timerInterval,troops:t.troops})}ngOnInit(){}submit(t){this.form.disable(),this.farm.editEntity(this.data.id,t.source.id,t.target.id,t.troops,t.timerInterval).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(m.a),c.Ob(m.g),c.Ob(d.d),c.Ob(ft))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm-route-edit"]],decls:26,vars:2,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["label","Herkunft","formControlName","source"],["label","Ziel","formControlName","target"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],[1,"col-sm-2"],[1,"col-xl-10"],["formControlName","troops"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"form",2),c.fc("ngSubmit",(function(){return e.submit(e.form.value)})),c.Ub(3,"div",3),c.Ub(4,"div",1),c.Pb(5,"app-village-input",4),c.Tb(),c.Tb(),c.Ub(6,"div",3),c.Ub(7,"div",1),c.Pb(8,"app-village-input",5),c.Tb(),c.Tb(),c.Ub(9,"div",3),c.Ub(10,"div",6),c.Ub(11,"label",7),c.Lc(12,"Interval (Minuten)"),c.Tb(),c.Tb(),c.Ub(13,"div",8),c.Pb(14,"mat-slider",9),c.Tb(),c.Tb(),c.Ub(15,"div",3),c.Ub(16,"div",10),c.Ub(17,"label"),c.Lc(18," Einheiten "),c.Tb(),c.Tb(),c.Ub(19,"div",11),c.Pb(20,"app-units-input",12),c.Tb(),c.Tb(),c.Ub(21,"div",3),c.Ub(22,"div",13),c.Pb(23,"span"),c.Ub(24,"button",14),c.Lc(25," Bearbeiten "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Bb(2),c.pc("formGroup",e.form),c.Bb(22),c.pc("disabled",!e.form.valid||e.form.disabled))},directives:[d.x,d.p,d.i,k.a,d.o,d.g,g.a,pt.a,C.a],styles:[""]}),t})();function gt(t,e){1&t&&(c.Ub(0,"th",12),c.Lc(1,"Interval"),c.Tb())}function Tt(t,e){if(1&t&&(c.Ub(0,"td",13),c.Lc(1),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.Nc(" ",t.timerInterval," Minuten ")}}function Ut(t,e){1&t&&(c.Ub(0,"th",12),c.Lc(1,"Herkunft"),c.Tb())}function wt(t,e){if(1&t&&(c.Ub(0,"td",13),c.Pb(1,"app-village-render",14),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.pc("value",t.source)}}function Ct(t,e){1&t&&(c.Ub(0,"th",12),c.Lc(1,"Ziel"),c.Tb())}function xt(t,e){if(1&t&&(c.Ub(0,"td",13),c.Pb(1,"app-village-render",14),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.pc("value",t.target)}}function kt(t,e){1&t&&(c.Ub(0,"th",12),c.Lc(1,"Einheiten"),c.Tb())}function Ot(t,e){if(1&t&&(c.Ub(0,"td",13),c.Pb(1,"app-units-render-min",14),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.pc("value",t.troops)}}function It(t,e){if(1&t){const t=c.Vb();c.Ub(0,"th",12),c.Ub(1,"button",15),c.fc("click",(function(){return c.Ac(t),c.jc(2).add()})),c.Ub(2,"mat-icon"),c.Lc(3,"add"),c.Tb(),c.Tb(),c.Tb()}}function yt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"td",13),c.Pb(1,"mat-slide-toggle",16),c.Ub(2,"button",17),c.fc("click",(function(){c.Ac(t);const i=e.$implicit;return c.jc(2).edit(i)})),c.Ub(3,"mat-icon"),c.Lc(4,"edit"),c.Tb(),c.Tb(),c.Ub(5,"button",18),c.fc("click",(function(){c.Ac(t);const i=e.$implicit;return c.jc(2).delete(i.id)})),c.Ub(6,"mat-icon"),c.Lc(7,"delete"),c.Tb(),c.Tb(),c.Tb()}if(2&t){const t=e.$implicit,i=c.jc(2);c.Bb(1),c.pc("formControl",i.slides[t.id])}}function Lt(t,e){1&t&&c.Pb(0,"tr",19)}function Bt(t,e){1&t&&c.Pb(0,"tr",20)}function Pt(t,e){if(1&t&&(c.Ub(0,"table",2),c.Sb(1,3),c.Jc(2,gt,2,0,"th",4),c.Jc(3,Tt,2,1,"td",5),c.Rb(),c.Sb(4,6),c.Jc(5,Ut,2,0,"th",4),c.Jc(6,wt,2,1,"td",5),c.Rb(),c.Sb(7,7),c.Jc(8,Ct,2,0,"th",4),c.Jc(9,xt,2,1,"td",5),c.Rb(),c.Sb(10,8),c.Jc(11,kt,2,0,"th",4),c.Jc(12,Ot,2,1,"td",5),c.Rb(),c.Sb(13,9),c.Jc(14,It,4,0,"th",4),c.Jc(15,yt,8,1,"td",5),c.Rb(),c.Jc(16,Lt,1,0,"tr",10),c.Jc(17,Bt,1,0,"tr",11),c.Tb()),2&t){const t=c.jc();c.pc("dataSource",t.routes),c.Bb(16),c.pc("matHeaderRowDef",t.displayedColumns),c.Bb(1),c.pc("matRowDefColumns",t.displayedColumns)}}function Rt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"div",21),c.Ub(1,"div",22),c.Pb(2,"span"),c.Ub(3,"span",23),c.Lc(4," Keine Routen vorhanden."),c.Pb(5,"br"),c.Ub(6,"button",24),c.fc("click",(function(){return c.Ac(t),c.jc().add()})),c.Lc(7," Hinzuf\xfcgen. "),c.Tb(),c.Tb(),c.Pb(8,"span"),c.Tb(),c.Tb()}}const jt=[{path:"",component:u,children:[{path:"routes",component:(()=>{class t{constructor(t,e){this.farm=t,this.dialog=e,this.unsub$=new s.b,this.slides={},this.displayedColumns=["interval","source","target","units","control"]}ngOnInit(){this.farm.list(this.unsub$).subscribe(t=>{this.routes=t;for(const e of t)this.slides[e.id]=new d.e(e.enabled),this.slides[e.id].valueChanges.subscribe(t=>{this.farm.setTaskEnabled(e.id,t).subscribe()})})}add(){this.dialog.open(ht).afterClosed().subscribe(t=>{void 0!==t&&(this.routes=[...this.routes,t])})}delete(t){this.farm.deleteEntity(t).subscribe(t=>{this.routes=this.routes.filter(e=>e.id!==t)})}edit(t){this.dialog.open(vt,{data:t}).afterClosed().subscribe(e=>{void 0!==e&&(this.routes=this.routes.map(i=>i.id===t.id?e:i))})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(ft),c.Ob(m.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm-route"]],decls:2,vars:2,consts:[["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["class","row",4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","interval"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","source"],["matColumnDef","target"],["matColumnDef","units"],["matColumnDef","control"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["mat-mini-fab","","color","primary",3,"click"],[1,"mr-2",3,"formControl"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],["mat-header-row",""],["mat-row",""],[1,"row"],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(c.Jc(0,Pt,18,3,"table",0),c.Jc(1,Rt,9,0,"div",1)),2&t&&(c.pc("ngIf",e.routes&&e.routes.length>0),c.Bb(1),c.pc("ngIf",e.routes&&0===e.routes.length))},directives:[n.m,I.j,I.c,I.e,I.b,I.g,I.i,I.d,I.a,y.a,H,C.a,T.a,S.a,d.o,d.f,U.a,I.f,I.h],styles:[".mat-column-control[_ngcontent-%COMP%]{width:10%}"]}),t})()},{path:"",pathMatch:"full",component:st}]}];let Dt=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[a.f.forChild(jt)],a.f]}),t})();var Vt=i("BLWB");let Jt=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[n.c,Dt,o.c,F.f,S.b,d.t,Vt.a,p.d,h.b,T.b,C.b,m.f,g.b,U.b,O.c,I.l]]}),t})()},YWTT:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));class n{constructor(t,e){this.id=Math.random(),this.query=t,this.onlyOwn=e}getName(){return"io.robertengel.dsbot.feature.village.ws.packet.incoming.VillageSearchRequest"}}var a=i("pLZG"),s=i("SxV6"),r=i("lJxs");class c{constructor(t){this.id=t}getName(){return"io.robertengel.dsbot.feature.village.ws.packet.incoming.GetVillageByIdRequest"}}class o{constructor(t){this.id=Math.random(),this.paste=t}getName(){return"io.robertengel.dsbot.feature.village.ws.packet.incoming.VillageCoordPasteRequest"}}var l=i("fXoL"),b=i("7nMs");let u=(()=>{class t{constructor(t){this.web=t}searchVillages(t,e=!1){const i=new n(t,e);return this.web.observable("VillageSearchResponse",i).pipe(Object(a.a)(t=>t.id===i.id),Object(s.a)(),Object(r.a)(t=>t.villages))}coordPaste(t){const e=new o(t);return this.web.observable("VillageSearchResponse",e).pipe(Object(a.a)(t=>t.id===e.id),Object(s.a)(),Object(r.a)(t=>t.villages))}byId(t){return this.web.observable("VillageResponse",new c(t)).pipe(Object(a.a)(e=>e.id===t),Object(s.a)())}}return t.\u0275fac=function(e){return new(e||t)(l.cc(b.a))},t.\u0275prov=l.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},irRR:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("fXoL"),a=i("7nMs"),s=i("ofXK");function r(t,e){if(1&t){const t=n.Vb();n.Ub(0,"a",2),n.fc("click",(function(e){return n.Ac(t),e.stopPropagation()})),n.Lc(1),n.Pb(2,"br"),n.Tb()}if(2&t){const t=n.jc(2);n.pc("href",t.link,n.Cc),n.Bb(1),n.Pc(" ",t.value.name," (",t.value.x,"|",t.value.y,")")}}function c(t,e){if(1&t&&(n.Ub(0,"span"),n.Lc(1),n.Pb(2,"br"),n.Tb()),2&t){const t=n.jc(2);n.Bb(1),n.Pc(" ",t.value.name," (",t.value.x,"|",t.value.y,")")}}function o(t,e){if(1&t&&(n.Sb(0),n.Jc(1,r,3,4,"a",1),n.Jc(2,c,3,3,"span",0),n.Ub(3,"small"),n.Lc(4),n.kc(5,"number"),n.Tb(),n.Rb()),2&t){const t=n.jc();n.Bb(1),n.pc("ngIf",t.link),n.Bb(1),n.pc("ngIf",!t.link),n.Bb(2),n.Nc("Punkte: ",n.mc(5,3,t.value.points,"1.0","de"),"")}}let l=(()=>{class t{constructor(t){this.web=t}ngOnInit(){this.web.info().subscribe(t=>{this.world=t.world})}get link(){return this.world&&this.value?"https://"+this.world+".die-staemme.de/game.php?screen=info_village&id="+this.value.id:void 0}navigateTo(t){this.world&&this.value&&(t.stopPropagation(),window.open("https://"+this.world+".die-staemme.de/game.php?screen=info_village&id="+this.value.id,"_blank"))}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(a.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-village-render"]],inputs:{value:"value"},decls:1,vars:1,consts:[[4,"ngIf"],["target","_blank",3,"href","click",4,"ngIf"],["target","_blank",3,"href","click"]],template:function(t,e){1&t&&n.Jc(0,o,6,7,"ng-container",0),2&t&&n.pc("ngIf",e.value)},directives:[s.m],pipes:[s.e],styles:[".link[_ngcontent-%COMP%]{cursor:pointer}a[_ngcontent-%COMP%]{color:inherit}"]}),t})()}}]);