(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"5LBN":function(t,e,i){"use strict";i.r(e),i.d(e,"CatapultModule",(function(){return ge}));var n=i("ofXK"),a=i("tyNb"),c=i("XNiG"),o=i("1G5W"),s=i("fXoL"),b=i("M9ds"),r=i("PDjf");const l=function(t){return[t]};function d(t,e){if(1&t){const t=s.Vb();s.Ub(0,"span",2),s.fc("click",(function(){s.Ac(t);const i=e.$implicit;return s.jc().activeLink=i})),s.Lc(1),s.Tb()}if(2&t){const t=e.$implicit,i=s.jc();s.pc("active",i.activeLink===t)("routerLink",s.tc(3,l,t.link)),s.Bb(1),s.Nc(" ",t.title," ")}}let u=(()=>{class t{constructor(t){this.router=t,this.links=[{title:"Home",link:"/cata"},{title:"Baba \xdcbersicht",link:"/cata/info"}],this.activeLink=this.links[0],this.unsub$=new c.b}ngOnInit(){this.setActive(),this.router.events.pipe(Object(o.a)(this.unsub$)).subscribe(t=>{this.setActive()})}setActive(){for(const t of this.links)this.router.isActive(t.link,!1)&&(this.activeLink=t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(a.c))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-catapult"]],decls:4,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(t,e){1&t&&(s.Ub(0,"nav",0),s.Jc(1,d,2,5,"span",1),s.Tb(),s.Ub(2,"mat-card"),s.Pb(3,"router-outlet"),s.Tb()),2&t&&(s.Bb(1),s.pc("ngForOf",e.links))},directives:[b.b,n.l,r.a,a.g,b.a,a.d],encapsulation:2}),t})();var m=i("3Pt+"),p=i("iELJ");class f{getName(){return"BabaPruneConfigRequest"}}var g=i("SxV6"),h=i("lJxs");class v{constructor(t,e){this.range=t,this.amount=e}getName(){return"io.robertengel.dsbot.feature.autocata.ws.packet.incoming.BabaPruneCreateGroupRequest"}}class T{constructor(t,e){this.group=t,this.village=e}getName(){return"io.robertengel.dsbot.feature.autocata.ws.packet.incoming.BabaPruneAddVillageRequest"}}class U{constructor(t,e){this.group=t,this.village=e}getName(){return"io.robertengel.dsbot.feature.autocata.ws.packet.incoming.BabaPruneRemoveVillageRequest"}}class w{constructor(t,e,i,n,a,c){this.id=t,this.enabled=e,this.range=i,this.amount=n,this.coordinateX=a,this.coordinateY=c}getName(){return"io.robertengel.dsbot.feature.autocata.ws.packet.incoming.BabaPruneEditGroupRequest"}}class B{constructor(t){this.id=t}getName(){return"io.robertengel.dsbot.feature.autocata.ws.packet.incoming.BabaPruneDeleteGroupRequest"}}class x{constructor(t){this.enabled=t}getName(){return"io.robertengel.dsbot.feature.autocata.ws.packet.incoming.BabaPruneSetEnabledRequest"}}class k{constructor(t,e,i,n){this.id=Math.random(),this.max=t,this.first=e,this.sort=i,this.order=n}getName(){return"io.robertengel.dsbot.feature.autocata.ws.packet.incoming.GetBabaInformationRequest"}}class L{constructor(t){this.reductions=t}getName(){return"io.robertengel.dsbot.feature.autocata.ws.packet.incoming.BabaPruneSetReductionsRequest"}}class C{constructor(t,e){this.group=t,this.villages=e}getName(){return"io.robertengel.dsbot.feature.autocata.ws.packet.incoming.BabaPruneMassAddVillageRequest"}}class O{constructor(t,e){this.group=t,this.villages=e}getName(){return"io.robertengel.dsbot.feature.autocata.ws.packet.incoming.BabaPruneMassRemoveVillageRequest"}}var y=i("7nMs");let I=(()=>{class t{constructor(t){this.websocket=t}getBabaInfo(t,e,i="",n="asc"){const a=new k(e,t,i,n);return this.websocket.observable("BabaInformationListResponse",a).pipe(Object(g.a)(t=>t.id===a.id))}getConfig(t){return this.websocket.observable("BabaPruneConfigResponse",new f).pipe(Object(o.a)(t))}groupCreatedEvent(t){return this.websocket.observable("BabaPruneGroupCreatedEvent").pipe(Object(o.a)(t))}groupEditedEvent(t){return this.websocket.observable("BabaPruneGroupEditEvent").pipe(Object(o.a)(t))}groupDeletedEvent(t){return this.websocket.observable("BabaPruneGroupDeletedEvent").pipe(Object(o.a)(t),Object(h.a)(t=>t.id))}villageAddedEvent(t){return this.websocket.observable("BabaPruneVillageAddedEvent").pipe(Object(o.a)(t))}villageRemovedEvent(t){return this.websocket.observable("BabaPruneVillageRemovedEvent").pipe(Object(o.a)(t))}setEnabled(t){this.websocket.sendData(new x(t))}setReductions(t){this.websocket.sendData(new L(t))}createGroup(t,e){this.websocket.sendData(new v(t,e))}editGroup(t,e,i,n,a,c){this.websocket.sendData(new w(t,e,i,n,a,c))}deleteGroup(t){this.websocket.sendData(new B(t))}addVillage(t,e){this.websocket.sendData(new T(t,e))}removeVillage(t,e){this.websocket.sendData(new U(t,e))}addVillages(t,e){this.websocket.sendData(new C(t,e))}removeVillages(t,e){this.websocket.sendData(new O(t,e))}}return t.\u0275fac=function(e){return new(e||t)(s.cc(y.a))},t.\u0275prov=s.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var P=i("mPVK"),S=i("Q2Ze"),D=i("e6WT"),R=i("bTqV");let j=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.fb=e,this.catapult=i,this.unsub$=new c.b,this.form=this.fb.group({amount:["alle",m.v.required],range:6})}ngOnInit(){this.catapult.groupCreatedEvent(this.unsub$).subscribe(t=>{this.form.disabled&&this.dialogRef.close(t)})}submit(t){this.form.disable(),this.catapult.createGroup(t.range,t.amount)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(p.g),s.Ob(m.d),s.Ob(I))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-catapult-group-add"]],decls:23,vars:2,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"col-xl-3"],["for","maxDistance"],[1,"col-xl-9"],["id","maxDistance","formControlName","range","min","1","max","100","thumbLabel","true",1,"w-100"],["matInput","","formControlName","amount"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"form",2),s.fc("ngSubmit",(function(){return e.submit(e.form.value)})),s.Ub(3,"div",3),s.Ub(4,"div",4),s.Ub(5,"label",5),s.Lc(6,"Max Entfernung"),s.Tb(),s.Tb(),s.Ub(7,"div",6),s.Pb(8,"mat-slider",7),s.Tb(),s.Tb(),s.Ub(9,"div",3),s.Ub(10,"div",4),s.Ub(11,"label",5),s.Lc(12,"Katapulte"),s.Tb(),s.Tb(),s.Ub(13,"div",6),s.Ub(14,"mat-form-field"),s.Ub(15,"mat-label"),s.Lc(16,"Katapulte"),s.Tb(),s.Pb(17,"input",8),s.Tb(),s.Tb(),s.Tb(),s.Ub(18,"div",3),s.Ub(19,"div",9),s.Pb(20,"span"),s.Ub(21,"button",10),s.Lc(22," Hinzuf\xfcgen "),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.Bb(2),s.pc("formGroup",e.form),s.Bb(19),s.pc("disabled",!e.form.valid||e.form.disabled))},directives:[m.x,m.p,m.i,P.a,m.o,m.g,S.b,S.f,D.b,m.c,R.a],styles:[""]}),t})();var J=i("7Ixi"),$=i("OaSA"),F=i("irRR"),V=i("NFeN");function N(t,e){1&t&&(s.Ub(0,"th",29),s.Lc(1,"Dorf"),s.Tb())}function M(t,e){if(1&t&&(s.Ub(0,"td",30),s.Pb(1,"app-village-render",31),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.pc("value",t)}}function A(t,e){1&t&&s.Pb(0,"th",29)}function E(t,e){if(1&t){const t=s.Vb();s.Ub(0,"td",30),s.Ub(1,"button",32),s.fc("click",(function(){s.Ac(t);const i=e.$implicit;return s.jc(2).removeVillage(i.id)})),s.Ub(2,"mat-icon"),s.Lc(3,"delete"),s.Tb(),s.Tb(),s.Tb()}}function G(t,e){1&t&&s.Pb(0,"tr",33)}function z(t,e){1&t&&s.Pb(0,"tr",34)}function _(t,e){if(1&t&&(s.Ub(0,"div",21),s.Ub(1,"table",22),s.Sb(2,23),s.Jc(3,N,2,0,"th",24),s.Jc(4,M,2,1,"td",25),s.Rb(),s.Sb(5,26),s.Jc(6,A,1,0,"th",24),s.Jc(7,E,4,0,"td",25),s.Rb(),s.Jc(8,G,1,0,"tr",27),s.Jc(9,z,1,0,"tr",28),s.Tb(),s.Tb()),2&t){const t=s.jc();s.Bb(1),s.pc("dataSource",t.data.villages),s.Bb(7),s.pc("matHeaderRowDef",t.displayedColumns),s.Bb(1),s.pc("matRowDefColumns",t.displayedColumns)}}let q=(()=>{class t{constructor(t,e,i,n){this.data=t,this.dialogRef=e,this.fb=i,this.catapult=n,this.unsub$=new c.b,this.slide=new m.e(!1),this.form=this.fb.group({amount:["alle",m.v.required],range:6,coordinateX:void 0,coordinateY:void 0}),this.villageForm=new m.e("",m.v.required),this.massVillageForm=new m.e("",m.v.required),this.displayedColumns=["village","delete"],this.form.patchValue({amount:t.amount,range:t.range,coordinateX:t.coordinateX,coordinateY:t.coordinateY}),this.slide.setValue(t.enabled,{emitEvent:!1})}ngOnInit(){this.catapult.villageAddedEvent(this.unsub$).subscribe(t=>{t.group===this.data.id&&(this.data.villages=[...this.data.villages,...t.villages])}),this.catapult.villageRemovedEvent(this.unsub$).subscribe(t=>{t.group===this.data.id&&(this.data.villages=this.data.villages.filter(e=>!t.villages.includes(e.id)))}),this.catapult.groupEditedEvent(this.unsub$).subscribe(t=>{this.data.id===t.id&&this.dialogRef.close(t)}),this.slide.valueChanges.subscribe(t=>{this.catapult.editGroup(this.data.id,t,this.data.range,this.data.amount,this.data.coordinateX,this.data.coordinateY)})}massAdd(){this.catapult.addVillages(this.data.id,this.massVillageForm.value)}massRemove(){this.catapult.removeVillages(this.data.id,this.massVillageForm.value)}addVillage(){this.catapult.addVillage(this.data.id,this.villageForm.value.id)}removeVillage(t){this.catapult.removeVillage(this.data.id,t)}submit(t){this.form.disable(),this.catapult.editGroup(this.data.id,this.slide.value,t.range,t.amount,t.coordinateX,t.coordinateY)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(p.a),s.Ob(p.g),s.Ob(m.d),s.Ob(I))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-catapult-group-edit"]],decls:54,vars:9,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"col-xl-3"],["for","maxDistance"],[1,"col-xl-9"],["id","maxDistance","formControlName","range","min","1","max","100","thumbLabel","true",1,"w-100"],["matInput","","formControlName","amount"],["matInput","","formControlName","coordinateX"],[1,"ml-2"],["matInput","","formControlName","coordinateY"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"col-xl-6"],[1,"col-md-9"],[3,"formControl","onlyOwn"],["mat-raised-button","","color","primary",3,"disabled","click"],["placeholder","Massen Hinzuf\xfcgen/Entfernen","matInput","",3,"formControl"],["mat-raised-button","","color","primary",1,"mt-1",3,"disabled","click"],["class","col-xl-6 list",4,"ngIf"],[1,"col-xl-6","list"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","village"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["type","button","mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"form",2),s.fc("ngSubmit",(function(){return e.submit(e.form.value)})),s.Ub(3,"div",3),s.Ub(4,"div",4),s.Ub(5,"label",5),s.Lc(6,"Max Entfernung"),s.Tb(),s.Tb(),s.Ub(7,"div",6),s.Pb(8,"mat-slider",7),s.Tb(),s.Tb(),s.Ub(9,"div",3),s.Ub(10,"div",4),s.Ub(11,"label"),s.Lc(12,"Katapulte"),s.Tb(),s.Tb(),s.Ub(13,"div",6),s.Ub(14,"mat-form-field"),s.Ub(15,"mat-label"),s.Lc(16,"Katapulte"),s.Tb(),s.Pb(17,"input",8),s.Tb(),s.Tb(),s.Tb(),s.Ub(18,"div",3),s.Ub(19,"div",4),s.Ub(20,"label"),s.Lc(21,"Koordinate"),s.Tb(),s.Tb(),s.Ub(22,"div",6),s.Ub(23,"mat-form-field"),s.Ub(24,"mat-label"),s.Lc(25,"X"),s.Tb(),s.Pb(26,"input",9),s.Tb(),s.Ub(27,"mat-form-field",10),s.Ub(28,"mat-label"),s.Lc(29,"Y"),s.Tb(),s.Pb(30,"input",11),s.Tb(),s.Tb(),s.Tb(),s.Ub(31,"div",3),s.Ub(32,"div",12),s.Pb(33,"span"),s.Ub(34,"button",13),s.Lc(35," Bearbeiten "),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(36,"div",0),s.Ub(37,"div",14),s.Ub(38,"div",0),s.Ub(39,"div",15),s.Pb(40,"app-village-input",16),s.Tb(),s.Ub(41,"div",4),s.Ub(42,"button",17),s.fc("click",(function(){return e.addVillage()})),s.Lc(43," Dorf hinzuf\xfcgen. "),s.Tb(),s.Tb(),s.Tb(),s.Ub(44,"div",0),s.Ub(45,"div",15),s.Pb(46,"textarea",18),s.Tb(),s.Ub(47,"div",4),s.Ub(48,"button",17),s.fc("click",(function(){return e.massAdd()})),s.Lc(49," D\xf6rfer hinzuf\xfcgen. "),s.Tb(),s.Pb(50,"br"),s.Ub(51,"button",19),s.fc("click",(function(){return e.massRemove()})),s.Lc(52," D\xf6rfer entfernen. "),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Jc(53,_,10,3,"div",20),s.Tb()),2&t&&(s.Bb(2),s.pc("formGroup",e.form),s.Bb(32),s.pc("disabled",!e.form.valid||e.form.disabled),s.Bb(6),s.pc("formControl",e.villageForm)("onlyOwn",!0),s.Bb(2),s.pc("disabled",e.villageForm.disabled||e.villageForm.invalid),s.Bb(4),s.pc("formControl",e.massVillageForm),s.Bb(2),s.pc("disabled",e.massVillageForm.disabled||e.massVillageForm.invalid),s.Bb(3),s.pc("disabled",e.massVillageForm.disabled||e.massVillageForm.invalid),s.Bb(2),s.pc("ngIf",e.data.villages.length>0))},directives:[m.x,m.p,m.i,P.a,m.o,m.g,S.b,S.f,D.b,m.c,R.a,J.a,m.f,n.m,$.j,$.c,$.e,$.b,$.g,$.i,$.d,$.a,F.a,V.a,$.f,$.h],styles:[".list[_ngcontent-%COMP%]{overflow-y:auto;max-height:50vh}"]}),t})();var H=i("jMqV"),K=i("o4Yh"),X=i("ltgo"),Y=i("h4rQ"),W=i("ZTz/"),Q=i("FKr1");function Z(t,e){if(1&t&&s.Pb(0,"img",19),2&t){const t=s.jc(2);s.pc("src",t.imageBase+"buildings/"+t.buildingForm.value.building+".png",s.Cc)}}function tt(t,e){if(1&t&&(s.Ub(0,"mat-select-trigger"),s.Ub(1,"div",17),s.Ub(2,"span"),s.Lc(3),s.kc(4,"titlecase"),s.Tb(),s.Jc(5,Z,1,1,"img",18),s.Tb(),s.Tb()),2&t){const t=s.jc();s.Bb(3),s.Mc(s.lc(4,2,t.buildingForm.value.building)),s.Bb(2),s.pc("ngIf",t.imageBase)}}function et(t,e){if(1&t&&s.Pb(0,"img",19),2&t){const t=s.jc().$implicit,e=s.jc();s.pc("src",e.imageBase+"buildings/"+t+".png",s.Cc)}}function it(t,e){if(1&t&&(s.Ub(0,"mat-option",20),s.Ub(1,"div",17),s.Ub(2,"span"),s.Lc(3),s.kc(4,"titlecase"),s.Tb(),s.Jc(5,et,1,1,"img",18),s.Tb(),s.Tb()),2&t){const t=e.$implicit,i=s.jc();s.pc("value",t),s.Bb(3),s.Mc(s.lc(4,3,t)),s.Bb(2),s.pc("ngIf",i.imageBase)}}function nt(t,e){if(1&t&&(s.Ub(0,"mat-option",20),s.Lc(1),s.Tb()),2&t){const t=e.$implicit;s.pc("value",t),s.Bb(1),s.Nc(" ",t," ")}}function at(t,e){if(1&t&&(s.Sb(0),s.Ub(1,"mat-form-field",4),s.Ub(2,"mat-label"),s.Lc(3,"Stufe"),s.Tb(),s.Ub(4,"mat-select",21),s.Jc(5,nt,2,2,"mat-option",7),s.Tb(),s.Tb(),s.Rb()),2&t){const t=s.jc();s.Bb(5),s.pc("ngForOf",t.range(t.currentBuildingInfo.maxLevel,t.currentBuildingInfo.minLevel))}}function ct(t,e){if(1&t&&s.Pb(0,"img",25),2&t){const t=s.jc().$implicit,e=s.jc();s.pc("src",e.imageBase+"buildings/"+t.building+".png",s.Cc)}}function ot(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",22),s.Ub(1,"div"),s.Jc(2,ct,1,1,"img",23),s.Lc(3),s.kc(4,"titlecase"),s.Tb(),s.Ub(5,"button",24),s.fc("click",(function(){s.Ac(t);const i=e.$implicit;return s.jc().remove(i.building,i.level)})),s.Ub(6,"mat-icon"),s.Lc(7,"delete"),s.Tb(),s.Tb(),s.Tb()}if(2&t){const t=e.$implicit,i=s.jc();s.Bb(2),s.pc("ngIf",i.imageBase),s.Bb(1),s.Oc(" ",s.lc(4,3,t.building)," bis Stufe ",t.level," ")}}function st(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",26),s.fc("click",(function(){return s.Ac(t),s.jc().reductions=[]})),s.Ub(1,"mat-icon"),s.Lc(2,"delete"),s.Tb(),s.Tb()}}let bt=(()=>{class t{constructor(t,e,i,n){this.builder=t,this.catapult=e,this.fb=i,this.web=n,this.buildingForm=this.fb.group({building:[void 0,m.v.required],level:[1]}),this.buildings=[]}ngOnInit(){this.web.infoObservable.subscribe(t=>{this.imageBase=t.imageBase,this.buildings=t.buildings}),this.buildingForm.get("building").valueChanges.subscribe(t=>{this.currentBuildingInfo=this.buildingInfos[t]}),this.builder.getBuildings().subscribe(t=>{this.buildingInfos=t})}addBuilding(t){this.reductions=[...this.reductions,t]}remove(t,e){this.reductions=this.reductions.filter(i=>i.building!==t||i.level!==e)}range(t,e=0){return[...Array(t-e+1).keys()].map(t=>t+e)}drop(t){Object(X.d)(this.reductions,t.previousIndex,t.currentIndex)}save(){this.catapult.setReductions(this.reductions)}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(Y.a),s.Ob(I),s.Ob(m.d),s.Ob(y.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-catapult-reduction"]],inputs:{reductions:"reductions"},decls:29,vars:8,consts:[[1,"row"],[1,"col-xl-6"],[3,"formGroup","ngSubmit"],[1,"col-xl-5"],[1,"w-100"],["formControlName","building"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"col-xl-2"],["mat-raised-button","","color","primary",3,"disabled"],["cdkDropList","",1,"example-list",3,"cdkDropListDropped"],["class","example-box","cdkDrag","",4,"ngFor","ngForOf"],[1,"example-box"],["mat-mini-fab","","color","warn",3,"click",4,"ngIf"],[1,"row","mt-3"],[1,"offset-xl-5","col-xl-1"],["mat-raised-button","","color","primary",3,"click"],[1,"flex-between"],["matSuffix","","class","img-fluid",3,"src",4,"ngIf"],["matSuffix","",1,"img-fluid",3,"src"],[3,"value"],["formControlName","level"],["cdkDrag","",1,"example-box"],["class","img-fluid",3,"src",4,"ngIf"],["mat-mini-fab","",3,"click"],[1,"img-fluid",3,"src"],["mat-mini-fab","","color","warn",3,"click"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"form",2),s.fc("ngSubmit",(function(){return e.addBuilding(e.buildingForm.value)})),s.Ub(3,"div",0),s.Ub(4,"div",3),s.Ub(5,"mat-form-field",4),s.Ub(6,"mat-label"),s.Lc(7,"Geb\xe4ude"),s.Tb(),s.Ub(8,"mat-select",5),s.Jc(9,tt,6,4,"mat-select-trigger",6),s.Jc(10,it,6,5,"mat-option",7),s.Tb(),s.Tb(),s.Tb(),s.Ub(11,"div",3),s.Jc(12,at,6,1,"ng-container",6),s.Tb(),s.Ub(13,"div",8),s.Ub(14,"button",9),s.Lc(15," Hinzuf\xfcgen "),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(16,"div",0),s.Ub(17,"div",1),s.Ub(18,"div",10),s.fc("cdkDropListDropped",(function(t){return e.drop(t)})),s.Jc(19,ot,8,5,"div",11),s.Ub(20,"div",12),s.Ub(21,"span"),s.Lc(22),s.Tb(),s.Ub(23,"div"),s.Jc(24,st,3,0,"button",13),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Ub(25,"div",14),s.Ub(26,"div",15),s.Ub(27,"button",16),s.fc("click",(function(){return e.save()})),s.Lc(28," Speichern. "),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.Bb(2),s.pc("formGroup",e.buildingForm),s.Bb(7),s.pc("ngIf",e.buildingForm.value.building),s.Bb(1),s.pc("ngForOf",e.buildings),s.Bb(2),s.pc("ngIf",e.currentBuildingInfo),s.Bb(2),s.pc("disabled",e.buildingForm.invalid||e.buildingForm.disabled),s.Bb(5),s.pc("ngForOf",e.reductions),s.Bb(3),s.Nc("",null==e.reductions?null:e.reductions.length," Reduktionen."),s.Bb(2),s.pc("ngIf",(null==e.reductions?null:e.reductions.length)>0))},directives:[m.x,m.p,m.i,S.b,S.f,W.a,m.o,m.g,n.m,n.l,R.a,X.b,W.c,S.g,Q.n,X.a,V.a],pipes:[n.v],styles:[".example-list[_ngcontent-%COMP%]{max-height:50vh;max-width:100%;border:1px solid #ccc;min-height:60px;display:block;border-radius:4px;overflow-y:auto}.example-box[_ngcontent-%COMP%]{padding:2px 10px;border-bottom:1px solid #ccc;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;font-size:14px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),t})();var rt=i("ZFy/");function lt(t,e){1&t&&s.Pb(0,"th",17)}function dt(t,e){if(1&t&&(s.Ub(0,"td",18),s.Pb(1,"mat-slide-toggle",3),s.Tb()),2&t){const t=e.$implicit,i=s.jc(2);s.Bb(1),s.pc("formControl",i.slides[t.id])}}function ut(t,e){1&t&&(s.Ub(0,"th",17),s.Lc(1,"Max Entfernung"),s.Tb())}function mt(t,e){if(1&t&&(s.Ub(0,"td",18),s.Lc(1),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.Nc(" ",t.range," Felder ")}}function pt(t,e){1&t&&(s.Ub(0,"th",17),s.Lc(1,"Katapulte"),s.Tb())}function ft(t,e){if(1&t&&(s.Ub(0,"td",18),s.Lc(1),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.Nc(" ",t.amount," ")}}function gt(t,e){1&t&&(s.Ub(0,"th",17),s.Lc(1,"D\xf6rfer"),s.Tb())}function ht(t,e){if(1&t&&(s.Ub(0,"td",18),s.Lc(1),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.Nc(" ",t.villages.length," ")}}function vt(t,e){if(1&t){const t=s.Vb();s.Ub(0,"th",17),s.Ub(1,"button",19),s.fc("click",(function(){return s.Ac(t),s.jc(2).add()})),s.Ub(2,"mat-icon"),s.Lc(3,"add"),s.Tb(),s.Tb(),s.Tb()}}function Tt(t,e){if(1&t){const t=s.Vb();s.Ub(0,"td",18),s.Ub(1,"button",20),s.fc("click",(function(){s.Ac(t);const i=e.$implicit;return s.jc(2).edit(i)})),s.Ub(2,"mat-icon"),s.Lc(3,"edit"),s.Tb(),s.Tb(),s.Ub(4,"button",21),s.fc("click",(function(){s.Ac(t);const i=e.$implicit;return s.jc(2).delete(i.id)})),s.Ub(5,"mat-icon"),s.Lc(6,"delete"),s.Tb(),s.Tb(),s.Tb()}}function Ut(t,e){1&t&&s.Pb(0,"tr",22)}function wt(t,e){1&t&&s.Pb(0,"tr",23)}function Bt(t,e){if(1&t&&(s.Ub(0,"table",7),s.Sb(1,8),s.Jc(2,lt,1,0,"th",9),s.Jc(3,dt,2,1,"td",10),s.Rb(),s.Sb(4,11),s.Jc(5,ut,2,0,"th",9),s.Jc(6,mt,2,1,"td",10),s.Rb(),s.Sb(7,12),s.Jc(8,pt,2,0,"th",9),s.Jc(9,ft,2,1,"td",10),s.Rb(),s.Sb(10,13),s.Jc(11,gt,2,0,"th",9),s.Jc(12,ht,2,1,"td",10),s.Rb(),s.Sb(13,14),s.Jc(14,vt,4,0,"th",9),s.Jc(15,Tt,7,0,"td",10),s.Rb(),s.Jc(16,Ut,1,0,"tr",15),s.Jc(17,wt,1,0,"tr",16),s.Tb()),2&t){const t=s.jc();s.pc("dataSource",t.groups),s.Bb(16),s.pc("matHeaderRowDef",t.displayedColumns),s.Bb(1),s.pc("matRowDefColumns",t.displayedColumns)}}function xt(t,e){if(1&t){const t=s.Vb();s.Ub(0,"div",0),s.Ub(1,"div",24),s.Pb(2,"span"),s.Ub(3,"span",25),s.Lc(4," Keine Tasks vorhanden."),s.Pb(5,"br"),s.Ub(6,"button",26),s.fc("click",(function(){return s.Ac(t),s.jc().add()})),s.Lc(7," Hinzuf\xfcgen. "),s.Tb(),s.Tb(),s.Pb(8,"span"),s.Tb(),s.Tb()}}let kt=(()=>{class t{constructor(t,e){this.catapult=t,this.dialog=e,this.unsub$=new c.b,this.slide=new m.e,this.slides={},this.displayedColumns=["toggle","range","amount","villages","control"]}ngOnInit(){this.catapult.getConfig(this.unsub$).subscribe(t=>{this.slide.setValue(t.enabled,{emitEvent:!1}),this.reductions=t.reductions,this.groups=[];for(const e of Object.keys(t.entities))this.groups.push(t.entities[e]);for(const e of this.groups)this.slides[e.id]=new m.e(e.enabled),this.slides[e.id].valueChanges.subscribe(t=>{this.catapult.editGroup(e.id,t,e.range,e.amount,e.coordinateX,e.coordinateY)})}),this.catapult.groupDeletedEvent(this.unsub$).subscribe(t=>{this.groups=this.groups.filter(e=>e.id!==t)}),this.slide.valueChanges.subscribe(t=>{this.catapult.setEnabled(t)})}add(){this.dialog.open(j,{minWidth:"60%"}).afterClosed().subscribe(t=>{void 0!==t&&(this.groups=[...this.groups,t],this.slides[t.id]=new m.e(t.enabled),this.slides[t.id].valueChanges.subscribe(e=>{this.catapult.editGroup(t.id,e,t.range,t.amount,t.coordinateX,t.coordinateY)}),this.dialog.open(q,{data:t,minWidth:"60%"}))})}delete(t){this.catapult.deleteGroup(t)}edit(t){this.dialog.open(q,{data:t,minWidth:"60%"}).afterClosed().subscribe(e=>{void 0!==e&&(this.groups=this.groups.map(i=>i.id===t.id?e:i))})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(I),s.Ob(p.b))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-catapult-home"]],decls:12,vars:4,consts:[[1,"row"],[1,"col-xl-12"],[1,"mb-3"],[3,"formControl"],[3,"reductions"],["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["class","row",4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","toggle"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","range"],["matColumnDef","amount"],["matColumnDef","villages"],["matColumnDef","control"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Ub(1,"div",1),s.Ub(2,"mat-card",2),s.Pb(3,"mat-slide-toggle",3),s.Tb(),s.Tb(),s.Tb(),s.Ub(4,"div",0),s.Ub(5,"div",1),s.Ub(6,"mat-expansion-panel"),s.Ub(7,"mat-expansion-panel-header"),s.Lc(8,"Reduktionen"),s.Tb(),s.Pb(9,"app-catapult-reduction",4),s.Tb(),s.Tb(),s.Tb(),s.Jc(10,Bt,18,3,"table",5),s.Jc(11,xt,9,0,"div",6)),2&t&&(s.Bb(3),s.pc("formControl",e.slide),s.Bb(6),s.pc("reductions",e.reductions),s.Bb(1),s.pc("ngIf",(null==e.groups?null:e.groups.length)>0),s.Bb(1),s.pc("ngIf",0===(null==e.groups?null:e.groups.length)))},directives:[r.a,H.a,m.o,m.f,K.c,K.d,bt,n.m,$.j,$.c,$.e,$.b,$.g,$.i,$.d,$.a,R.a,V.a,rt.a,$.f,$.h],styles:[".mat-column-control[_ngcontent-%COMP%]{width:10%}.mat-column-toggle[_ngcontent-%COMP%]{width:7%}"]}),t})();var Lt=i("5QHs");function Ct(t,e){1&t&&(s.Sb(0),s.Lc(1," Angreifer: "),s.Rb())}function Ot(t,e){1&t&&(s.Sb(0),s.Lc(1," Verteidiger: "),s.Rb())}function yt(t,e){if(1&t&&(s.Sb(0),s.Lc(1),s.Rb()),2&t){const t=s.jc();s.Bb(1),s.Nc(" ",t.player.name," ")}}function It(t,e){1&t&&(s.Sb(0),s.Ub(1,"span",5),s.Lc(2,"---"),s.Tb(),s.Rb())}function Pt(t,e){1&t&&(s.Sb(0),s.Lc(1," Herkunft: "),s.Rb())}function St(t,e){1&t&&(s.Sb(0),s.Lc(1," Ziel: "),s.Rb())}function Dt(t,e){if(1&t&&s.Pb(0,"app-village-render",6),2&t){const t=s.jc();s.pc("value",t.village)}}function Rt(t,e){1&t&&(s.Sb(0),s.Lc(1,"Dorf"),s.Rb())}function jt(t,e){1&t&&(s.Sb(0),s.Ub(1,"p"),s.Lc(2,"Keiner deiner K\xe4mpfer ist lebend zur\xfcckgekehrt. Es konnten keine Informationen \xfcber die Truppenst\xe4rke des Feindes erlangt werden."),s.Tb(),s.Rb())}function Jt(t,e){if(1&t&&(s.Ub(0,"td",12),s.Pb(1,"img",13),s.Tb()),2&t){const t=e.$implicit,i=s.jc(2);s.Bb(1),s.Gb("faded",0===i.units[t]),s.pc("src",i.imageBase+"unit/unit_"+t+".png",s.Cc)("title",t)}}function $t(t,e){if(1&t&&(s.Ub(0,"td",14),s.Lc(1),s.Tb()),2&t){const t=e.$implicit,i=s.jc(2);s.Gb("hidden",0===i.units[t]),s.Bb(1),s.Nc(" ",i.units[t]," ")}}function Ft(t,e){if(1&t&&(s.Ub(0,"td",14),s.Lc(1),s.Tb()),2&t){const t=e.$implicit,i=s.jc(2);s.Gb("hidden",0===i.lost[t]),s.Bb(1),s.Nc(" ",i.lost[t]," ")}}function Vt(t,e){if(1&t&&(s.Ub(0,"table",7),s.Ub(1,"tbody"),s.Ub(2,"tr",8),s.Pb(3,"td"),s.Jc(4,Jt,2,4,"td",9),s.Tb(),s.Ub(5,"tr"),s.Ub(6,"td",0),s.Lc(7,"Anzahl:"),s.Tb(),s.Jc(8,$t,2,3,"td",10),s.Tb(),s.Ub(9,"tr"),s.Ub(10,"td",11),s.Lc(11,"Verluste:"),s.Tb(),s.Jc(12,Ft,2,3,"td",10),s.Tb(),s.Tb(),s.Tb()),2&t){const t=s.jc();s.Bb(4),s.pc("ngForOf",t.unitNames),s.Bb(4),s.pc("ngForOf",t.unitNames),s.Bb(4),s.pc("ngForOf",t.unitNames)}}let Nt=(()=>{class t{constructor(t){this.web=t,this.defender=!1}ngOnInit(){this.web.infoObservable.subscribe(t=>{this.imageBase=t.imageBase,this.unitNames=t.units})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(y.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-battle-report-troops"]],inputs:{player:"player",village:"village",units:"units",lost:"lost",defender:"defender"},decls:20,vars:10,consts:[[2,"width","20%"],[4,"ngIf"],[3,"value",4,"ngIf"],["colspan","2",2,"padding","0"],["class","vis","style","border-collapse: collapse;",4,"ngIf"],[2,"font-weight","normal"],[3,"value"],[1,"vis",2,"border-collapse","collapse"],[1,"center"],["style","width: 35px",4,"ngFor","ngForOf"],["style","text-align: center;",3,"hidden",4,"ngFor","ngForOf"],[2,"width","20%","text-align","left"],[2,"width","35px"],["alt","",3,"src","title"],[2,"text-align","center"]],template:function(t,e){1&t&&(s.Ub(0,"table"),s.Ub(1,"tbody"),s.Ub(2,"tr"),s.Ub(3,"th",0),s.Jc(4,Ct,2,0,"ng-container",1),s.Jc(5,Ot,2,0,"ng-container",1),s.Tb(),s.Ub(6,"th"),s.Jc(7,yt,2,1,"ng-container",1),s.Jc(8,It,3,0,"ng-container",1),s.Tb(),s.Tb(),s.Ub(9,"tr"),s.Ub(10,"td"),s.Jc(11,Pt,2,0,"ng-container",1),s.Jc(12,St,2,0,"ng-container",1),s.Tb(),s.Ub(13,"td"),s.Jc(14,Dt,1,1,"app-village-render",2),s.Jc(15,Rt,2,0,"ng-container",1),s.Tb(),s.Tb(),s.Ub(16,"tr"),s.Ub(17,"td",3),s.Jc(18,jt,3,0,"ng-container",1),s.Jc(19,Vt,13,3,"table",4),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&t&&(s.Bb(4),s.pc("ngIf",!e.defender),s.Bb(1),s.pc("ngIf",e.defender),s.Bb(2),s.pc("ngIf",e.player),s.Bb(1),s.pc("ngIf",!e.player),s.Bb(3),s.pc("ngIf",!e.defender),s.Bb(1),s.pc("ngIf",e.defender),s.Bb(2),s.pc("ngIf",e.village),s.Bb(1),s.pc("ngIf",!e.village),s.Bb(3),s.pc("ngIf",!e.units),s.Bb(1),s.pc("ngIf",e.units))},directives:[n.m,F.a,n.l],styles:[".center[_ngcontent-%COMP%]{text-align:center}.hidden[_ngcontent-%COMP%]{color:#5a6268}.faded[_ngcontent-%COMP%]{opacity:.3}"]}),t})();function Mt(t,e){if(1&t&&(s.Ub(0,"tr"),s.Ub(1,"td",9),s.Pb(2,"img",10),s.Ub(3,"span",11),s.Lc(4),s.kc(5,"titlecase"),s.Tb(),s.Tb(),s.Ub(6,"td",11),s.Lc(7),s.Tb(),s.Tb()),2&t){const t=e.$implicit,i=s.jc(2);s.Bb(2),s.pc("src",i.imageBase+"buildings/"+t+".png",s.Cc),s.Bb(2),s.Mc(s.lc(5,3,t)),s.Bb(3),s.Mc(i.buildings[t])}}function At(t,e){if(1&t&&(s.Ub(0,"tr"),s.Ub(1,"td",9),s.Pb(2,"img",10),s.Ub(3,"span",11),s.Lc(4),s.kc(5,"titlecase"),s.Tb(),s.Tb(),s.Ub(6,"td",11),s.Lc(7),s.Tb(),s.Tb()),2&t){const t=e.$implicit,i=s.jc(2);s.Bb(2),s.pc("src",i.imageBase+"buildings/"+t+".png",s.Cc),s.Bb(2),s.Mc(s.lc(5,3,t)),s.Bb(3),s.Mc(i.buildings[t])}}function Et(t,e){if(1&t&&(s.Ub(0,"mat-card"),s.Ub(1,"div",1),s.Ub(2,"div",6),s.Ub(3,"table"),s.Ub(4,"tbody"),s.Ub(5,"tr"),s.Ub(6,"th",7),s.Lc(7,"Geb\xe4ude"),s.Tb(),s.Ub(8,"th"),s.Lc(9,"Stufe"),s.Tb(),s.Tb(),s.Jc(10,Mt,8,5,"tr",8),s.Tb(),s.Tb(),s.Tb(),s.Ub(11,"div",6),s.Ub(12,"table"),s.Ub(13,"tbody"),s.Ub(14,"tr"),s.Ub(15,"th",7),s.Lc(16,"Geb\xe4ude"),s.Tb(),s.Ub(17,"th"),s.Lc(18,"Stufe"),s.Tb(),s.Tb(),s.Jc(19,At,8,5,"tr",8),s.Tb(),s.Tb(),s.Tb(),s.Tb(),s.Tb()),2&t){const t=s.jc();s.Bb(10),s.pc("ngForOf",t.first),s.Bb(9),s.pc("ngForOf",t.second)}}let Gt=(()=>{class t{constructor(t){this.web=t,this.first=[],this.second=[]}ngOnInit(){this.buildings=JSON.parse(this.value.buildings),this.web.infoObservable.subscribe(t=>{this.imageBase=t.imageBase;const e=t.buildings.filter(t=>this.buildings&&this.buildings[t]>0),i=Math.ceil(e.length/2);this.first=e.slice(0,i),this.second=e.slice(i)})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(y.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-battle-report"]],inputs:{value:"value"},decls:17,vars:12,consts:[[1,"row","flex-between","mb-2","p-2"],[1,"row"],[1,"col-xl-12"],[3,"village","player","units","lost"],[3,"village","player","units","lost","defender"],[4,"ngIf"],[1,"col-xl-6"],[2,"width","50%"],[4,"ngFor","ngForOf"],["nowrap","",2,"vertical-align","middle"],["alt","",1,"middle",2,"max-height","16px",3,"src"],[1,"middle"]],template:function(t,e){1&t&&(s.Ub(0,"mat-card"),s.Ub(1,"div",0),s.Ub(2,"div"),s.Lc(3,"Letzter Sp\xe4hbericht"),s.Tb(),s.Ub(4,"div"),s.Lc(5),s.Ub(6,"small"),s.Lc(7),s.Tb(),s.Tb(),s.Tb(),s.Ub(8,"mat-card"),s.Ub(9,"div",1),s.Ub(10,"div",2),s.Pb(11,"app-battle-report-troops",3),s.Tb(),s.Tb(),s.Tb(),s.Ub(12,"mat-card"),s.Ub(13,"div",1),s.Ub(14,"div",2),s.Pb(15,"app-battle-report-troops",4),s.Tb(),s.Tb(),s.Tb(),s.Jc(16,Et,20,2,"mat-card",5),s.Tb()),2&t&&(s.Bb(5),s.Nc(" ",e.value.reportTime.display,""),s.Bb(2),s.Nc(":",e.value.reportTime.ms,""),s.Bb(4),s.pc("village",e.value.attackerVillage)("player",e.value.attacker)("units",e.value.attackerUnits)("lost",e.value.attackerUnitsLost),s.Bb(4),s.pc("village",e.value.defenderVillage)("player",e.value.defender)("units",e.value.defenderUnits)("lost",e.value.defenderUnitsLost)("defender",!0),s.Bb(1),s.pc("ngIf",e.value.buildings))},directives:[r.a,Nt,n.m,n.l],pipes:[n.v],styles:[""]}),t})(),zt=(()=>{class t{constructor(t){this.data=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(p.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-catapult-report-popup"]],decls:2,vars:1,consts:[["matDialogContent",""],[3,"value"]],template:function(t,e){1&t&&(s.Ub(0,"div",0),s.Pb(1,"app-battle-report",1),s.Tb()),2&t&&(s.Bb(1),s.pc("value",e.data))},directives:[p.e,Gt],styles:[""]}),t})();var _t=i("0EQZ"),qt=i("2Vo4");class Ht extends _t.b{constructor(t){super(),this.catapult=t,this.infoSubject=new qt.a([]),this.countSubject=new qt.a(0),this.loadingSubject=new qt.a(!1),this.loading$=this.loadingSubject.asObservable(),this.count$=this.countSubject.asObservable()}loadInfos(t,e,i="",n="asc"){this.loadingSubject.next(!0),this.catapult.getBabaInfo(t,e,i,n).subscribe(t=>{this.loadingSubject.next(!1),this.infoSubject.next(t.list),this.countSubject.next(t.count)})}connect(t){return this.infoSubject.asObservable()}disconnect(t){this.infoSubject.complete(),this.loadingSubject.complete(),this.countSubject.complete()}}var Kt=i("LUZP"),Xt=i("VRyK"),Yt=i("vkgz"),Wt=i("pu8Q");function Qt(t,e){1&t&&(s.Ub(0,"div",13),s.Pb(1,"mat-spinner"),s.Tb())}function Zt(t,e){1&t&&(s.Ub(0,"mat-header-cell",14),s.Lc(1,"ID"),s.Tb())}function te(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.Ub(1,"a",15),s.Lc(2),s.Tb(),s.Tb()),2&t){const t=e.$implicit,i=s.jc();s.Bb(1),s.pc("href",i.link(t.id),s.Cc),s.Bb(1),s.Mc(t.id)}}function ee(t,e){1&t&&(s.Ub(0,"mat-header-cell"),s.Lc(1,"Bericht"),s.Tb())}function ie(t,e){if(1&t){const t=s.Vb();s.Ub(0,"button",17),s.fc("click",(function(){s.Ac(t);const e=s.jc().$implicit;return s.jc().openReport(e)})),s.Lc(1," Bericht "),s.Tb()}}function ne(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.Jc(1,ie,2,0,"button",16),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.pc("ngIf",t.report)}}function ae(t,e){1&t&&(s.Ub(0,"mat-header-cell",14),s.Lc(1,"Punkte"),s.Tb())}function ce(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.Lc(1),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.Nc(" ",t.points," ")}}function oe(t,e){1&t&&(s.Ub(0,"mat-header-cell",14),s.Lc(1,"N\xe4chste Aktion"),s.Tb())}function se(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.Lc(1),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.Nc(" ",t.nextActionTime.display," ")}}function be(t,e){1&t&&(s.Ub(0,"mat-header-cell",14),s.Lc(1,"N\xe4chste Aktion"),s.Tb())}function re(t,e){if(1&t&&(s.Ub(0,"mat-cell"),s.Lc(1),s.Tb()),2&t){const t=e.$implicit;s.Bb(1),s.Nc(" ",t.nextAction," ")}}function le(t,e){1&t&&s.Pb(0,"mat-header-row")}function de(t,e){1&t&&s.Pb(0,"mat-row")}const ue=function(){return[10,50,100,250]},me=[{path:"",component:u,children:[{path:"info",component:(()=>{class t{constructor(t,e,i){this.catapult=t,this.dialog=e,this.web=i,this.displayedColumns=["id","report","points","nextActionTime","nextAction"]}ngOnInit(){this.dataSource=new Ht(this.catapult),this.dataSource.count$.subscribe(t=>{this.count=t}),this.dataSource.loadInfos(0,10),this.web.info().subscribe(t=>{this.world=t.world})}ngAfterViewInit(){this.sort.sortChange.subscribe(()=>this.paginator.pageIndex=0),Object(Xt.a)(this.sort.sortChange,this.paginator.page).pipe(Object(Yt.a)(()=>this.pageUpdate())).subscribe()}link(t){return this.world&&t?"https://"+this.world+".die-staemme.de/game.php?screen=info_village&id="+t:void 0}pageUpdate(){this.dataSource.loadInfos(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize,this.sort.active,this.sort.direction)}openReport(t){t.report&&this.dialog.open(zt,{data:t.report,minWidth:"518"})}}return t.\u0275fac=function(e){return new(e||t)(s.Ob(I),s.Ob(p.b),s.Ob(y.a))},t.\u0275cmp=s.Ib({type:t,selectors:[["app-catapult-info"]],viewQuery:function(t,e){var i;1&t&&(s.Rc(Lt.a,!0),s.Rc(Kt.a,!0)),2&t&&(s.wc(i=s.gc())&&(e.paginator=i.first),s.wc(i=s.gc())&&(e.sort=i.first))},decls:21,vars:10,consts:[["class","loading-shade",4,"ngIf"],["matSort","","matSortDisableClear","","matSortActive","id",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","report"],[4,"matHeaderCellDef"],["matColumnDef","points"],["matColumnDef","nextActionTime"],["matColumnDef","nextAction"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions"],[1,"loading-shade"],["mat-sort-header",""],["target","_blank",3,"href"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click"]],template:function(t,e){1&t&&(s.Jc(0,Qt,2,0,"div",0),s.kc(1,"async"),s.Ub(2,"mat-table",1),s.Sb(3,2),s.Jc(4,Zt,2,0,"mat-header-cell",3),s.Jc(5,te,3,2,"mat-cell",4),s.Rb(),s.Sb(6,5),s.Jc(7,ee,2,0,"mat-header-cell",6),s.Jc(8,ne,2,1,"mat-cell",4),s.Rb(),s.Sb(9,7),s.Jc(10,ae,2,0,"mat-header-cell",3),s.Jc(11,ce,2,1,"mat-cell",4),s.Rb(),s.Sb(12,8),s.Jc(13,oe,2,0,"mat-header-cell",3),s.Jc(14,se,2,1,"mat-cell",4),s.Rb(),s.Sb(15,9),s.Jc(16,be,2,0,"mat-header-cell",3),s.Jc(17,re,2,1,"mat-cell",4),s.Rb(),s.Jc(18,le,1,0,"mat-header-row",10),s.Jc(19,de,1,0,"mat-row",11),s.Tb(),s.Pb(20,"mat-paginator",12)),2&t&&(s.pc("ngIf",s.lc(1,7,e.dataSource.loading$)),s.Bb(2),s.pc("dataSource",e.dataSource),s.Bb(16),s.pc("matHeaderRowDef",e.displayedColumns),s.Bb(1),s.pc("matRowDefColumns",e.displayedColumns),s.Bb(1),s.pc("length",e.count)("pageSize",10)("pageSizeOptions",s.sc(9,ue)))},directives:[n.m,$.j,Kt.a,$.c,$.e,$.b,$.g,$.i,Lt.a,Wt.b,$.d,Kt.b,$.a,R.a,$.f,$.h],pipes:[n.b],styles:["a[_ngcontent-%COMP%]{color:inherit}.loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}"]}),t})()},{path:"",pathMatch:"full",component:kt}]}];let pe=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[a.f.forChild(me)],a.f]}),t})();var fe=i("BLWB");let ge=(()=>{class t{}return t.\u0275mod=s.Mb({type:t}),t.\u0275inj=s.Lb({factory:function(e){return new(e||t)},imports:[[n.c,pe,b.c,r.f,H.b,$.l,m.t,V.b,R.b,rt.b,P.b,S.d,D.c,fe.a,Wt.a,Lt.b,X.c,W.b,K.b,p.f,Kt.c]]}),t})()}}]);