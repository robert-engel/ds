(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{MjV7:function(t,e,i){"use strict";i.r(e),i.d(e,"FarmModule",(function(){return ht}));var a=i("ofXK"),n=i("tyNb"),s=i("XNiG"),r=i("1G5W"),c=i("fXoL"),b=i("M9ds");const l=function(t){return[t]};function o(t,e){if(1&t){const t=c.Vb();c.Ub(0,"span",2),c.fc("click",(function(){c.Cc(t);const i=e.$implicit;return c.jc().activeLink=i})),c.Nc(1),c.Tb()}if(2&t){const t=e.$implicit,i=c.jc();c.pc("active",i.activeLink===t)("routerLink",c.tc(3,l,t.link)),c.Bb(1),c.Pc(" ",t.title," ")}}let u=(()=>{class t{constructor(t){this.router=t,this.links=[{title:"Home",link:"/farm"}],this.activeLink=this.links[0],this.unsub$=new s.b}ngOnInit(){this.setActive(),this.router.events.pipe(Object(r.a)(this.unsub$)).subscribe(t=>{this.setActive()})}setActive(){for(const t of this.links)this.router.isActive(t.link,!1)&&(this.activeLink=t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(n.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm"]],decls:3,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(t,e){1&t&&(c.Ub(0,"nav",0),c.Lc(1,o,2,5,"span",1),c.Tb(),c.Pb(2,"router-outlet")),2&t&&(c.Bb(1),c.pc("ngForOf",e.links))},directives:[b.b,a.l,n.f,b.a,n.c],styles:[""]}),t})();var m=i("iELJ"),d=i("3Pt+");class f{constructor(t,e,i,a){this.farmGroup=t,this.units=e,this.timerInterval=i,this.maxDistance=a}getName(){return"io.robertengel.dsbot.feature.farm.ws.packet.incoming.AddFarmEntityRequest"}}class p{constructor(t){this.id=t}getName(){return"io.robertengel.dsbot.feature.farm.ws.packet.incoming.DeleteFarmEntityRequest"}}class v{constructor(t,e,i,a,n){this.id=t,this.farmGroup=e,this.units=i,this.timerInterval=a,this.maxDistance=n}getName(){return"io.robertengel.dsbot.feature.farm.ws.packet.incoming.EditFarmEntityRequest"}}class h{constructor(t,e){this.id=t,this.village=e}getName(){return"io.robertengel.dsbot.feature.farm.ws.packet.incoming.FarmEntityAddVillageRequest"}}class g{constructor(t,e){this.id=t,this.village=e}getName(){return"io.robertengel.dsbot.feature.farm.ws.packet.incoming.FarmEntityRemoveVillageRequest"}}class T{constructor(t,e){this.id=t,this.enabled=e}getName(){return"io.robertengel.dsbot.feature.farm.ws.packet.incoming.FarmEntitySetEnabledRequest"}}class U{constructor(t){this.enabled=t}getName(){return"io.robertengel.dsbot.feature.farm.ws.packet.incoming.FarmerSetEnabledRequest"}}class k{getName(){return"GetFarmerConfigRequest"}}class w{getName(){return"ListFarmEntityRequest"}}class x{constructor(t){this.max=t}getName(){return"io.robertengel.dsbot.feature.farm.ws.packet.incoming.FarmerSetMaxIncsRequest"}}var C=i("SxV6"),O=i("pLZG"),y=i("lJxs"),N=i("7nMs");let I=(()=>{class t{constructor(t){this.websocketService=t}list(t){return this.websocketService.observable("ListFarmEntityResponse",new w).pipe(Object(r.a)(t))}addEntity(t,e,i,a){return this.websocketService.observable("AddFarmEntityResponse",new f(t,e,i,a)).pipe(Object(C.a)())}deleteEntity(t){return this.websocketService.observable("DeleteFarmEntityResponse",new p(t)).pipe(Object(O.a)(e=>e.id===t),Object(C.a)(),Object(y.a)(t=>t.id))}editEntity(t,e,i,a,n){return this.websocketService.observable("EditFarmEntityResponse",new v(t,e,i,a,n)).pipe(Object(O.a)(e=>e.id===t),Object(C.a)())}addVillage(t,e){return this.websocketService.observable("FarmEntityAddVillageResponse",new h(t,e)).pipe(Object(O.a)(i=>i.id===t&&i.village.id===e),Object(C.a)())}removeVillage(t,e){return this.websocketService.observable("FarmEntityRemoveVillageResponse",new g(t,e)).pipe(Object(O.a)(i=>i.id===t&&i.village.id===e),Object(C.a)())}setTaskEnabled(t,e){return this.websocketService.observable("FarmEntitySetEnabledResponse",new T(t,e)).pipe(Object(O.a)(e=>e.id===t),Object(C.a)())}config(t){return this.websocketService.observable("FarmerConfigResponse",new k).pipe(Object(r.a)(t))}setEnabled(t){this.websocketService.sendData(new U(t))}setMaxIncs(t){this.websocketService.sendData(new x(t))}}return t.\u0275fac=function(e){return new(e||t)(c.cc(N.a))},t.\u0275prov=c.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var F=i("Q2Ze"),E=i("ZTz/"),B=i("FKr1"),j=i("mPVK"),L=i("NFeN"),D=i("ZFy/"),V=i("DNTf"),P=i("UXun"),R=i("0MNC"),S=i("e6WT"),M=i("bTqV");function G(t,e){if(1&t&&c.Pb(0,"img",8),2&t){const t=c.jc().$implicit,e=c.jc();c.pc("src",e.imagebase+"unit/unit_"+t+".png",c.Ec)}}const $=function(t,e){return{"col-xl-12":t,pad:e}};function A(t,e){if(1&t){const t=c.Vb();c.Ub(0,"span",0),c.kc(1,"async"),c.kc(2,"async"),c.Ub(3,"mat-form-field",3),c.Ub(4,"mat-label"),c.Nc(5),c.kc(6,"titlecase"),c.Tb(),c.Ub(7,"input",4,5),c.fc("change",(function(){c.Cc(t);const i=e.$implicit,a=c.zc(8);return c.jc().input(a.value,i)})),c.Tb(),c.Ub(9,"button",6),c.Lc(10,G,1,1,"img",7),c.Tb(),c.Tb(),c.Tb()}if(2&t){const t=e.$implicit,i=c.jc();c.pc("ngClass",c.uc(10,$,i.forceVertical||!0===c.lc(1,4,i.isHandset$),!(i.forceVertical||!0===c.lc(2,6,i.isHandset$)))),c.Bb(5),c.Oc(c.lc(6,8,t)),c.Bb(2),c.pc("id","troop_input_"+t),c.Bb(3),c.pc("ngIf",i.imagebase)}}function q(t,e){if(1&t&&c.Pb(0,"img",18),2&t){const t=c.jc(3);c.pc("src",t.imagebase+"buildings/"+t.formControl.value.cataTarget+".png",c.Ec)}}function H(t,e){if(1&t&&(c.Ub(0,"mat-select-trigger"),c.Ub(1,"div",16),c.Ub(2,"span"),c.Nc(3),c.kc(4,"titlecase"),c.Tb(),c.Lc(5,q,1,1,"img",17),c.Tb(),c.Tb()),2&t){const t=c.jc(2);c.Bb(3),c.Oc(c.lc(4,2,t.formControl.value.cataTarget)),c.Bb(2),c.pc("ngIf",t.imagebase)}}function _(t,e){if(1&t&&c.Pb(0,"img",18),2&t){const t=c.jc().$implicit,e=c.jc(2);c.pc("src",e.imagebase+"buildings/"+t+".png",c.Ec)}}function z(t,e){if(1&t&&(c.Ub(0,"mat-option",19),c.Ub(1,"div",16),c.Ub(2,"span"),c.Nc(3),c.kc(4,"titlecase"),c.Tb(),c.Lc(5,_,1,1,"img",17),c.Tb(),c.Tb()),2&t){const t=e.$implicit,i=c.jc(2);c.pc("value",t),c.Bb(3),c.Oc(c.lc(4,3,t)),c.Bb(2),c.pc("ngIf",i.imagebase)}}function K(t,e){if(1&t){const t=c.Vb();c.Ub(0,"div",9),c.Ub(1,"div",10),c.Ub(2,"mat-form-field"),c.Ub(3,"mat-label"),c.Nc(4,"Katapult Ziel"),c.Tb(),c.Ub(5,"mat-select",11,12),c.fc("valueChange",(function(){c.Cc(t);const e=c.zc(6);return c.jc().input(e.value,"cataTarget")})),c.Lc(7,H,6,4,"mat-select-trigger",13),c.Ub(8,"mat-option",14),c.Nc(9,"Default"),c.Tb(),c.Lc(10,z,6,5,"mat-option",15),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&t){const t=c.jc();c.Bb(7),c.pc("ngIf","///DEFAULT///"!==t.formControl.value.cataTarget),c.Bb(3),c.pc("ngForOf",t.buildings)}}const Z=function(t,e){return{spread:t,row:e}};let J=(()=>{class t{constructor(t,e){this.breakpointObserver=t,this.web=e,this.forceVertical=!1,this.hideCataTarget=!1,this.excludeUnits=[],this.units=[],this.buildings=[],this.formControl=new d.e({cataTarget:"///DEFAULT///"}),this.isHandset$=this.breakpointObserver.observe(V.a).pipe(Object(y.a)(t=>t.matches),Object(P.a)()),this.propagateChange=t=>{}}ngOnInit(){this.web.infoObservable.subscribe(t=>{this.units=t.units,this.units=this.units.filter(t=>!this.excludeUnits.includes(t)),this.imagebase=t.imageBase,this.buildings=t.buildings}),this.units.forEach(t=>{const e={};e[t]=0,this.formControl.patchValue(e)}),this.formControl.valueChanges.subscribe(t=>{this.propagateChange(t)})}input(t,e){const i={};i[e]=parseInt(t,10),this.formControl.setValue(Object.assign(Object.assign({},this.formControl.value),i))}get cata(){return this.formControl.value.catapult&&"0"!==this.formControl.value.catapult}writeValue(t){null==t&&(t={cataTarget:"///DEFAULT///"}),this.formControl.setValue(t),setTimeout(()=>{void 0!==this.select&&(this.select.value=t.cataTarget),this.units.forEach(e=>{const i=document.getElementById("troop_input_"+e);null!==i&&t.hasOwnProperty(e)&&(i.value=t[e])})},10)}registerOnChange(t){this.propagateChange=t}registerOnTouched(t){}setDisabledState(t){t?this.formControl.disable():this.formControl.enable()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(R.a),c.Ob(N.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-units-holder-input"]],viewQuery:function(t,e){var i;1&t&&c.Tc(E.a,!0),2&t&&c.yc(i=c.gc())&&(e.select=i.first)},inputs:{forceVertical:"forceVertical",hideCataTarget:"hideCataTarget",excludeUnits:"excludeUnits"},features:[c.Ab([{provide:d.m,multi:!0,useExisting:Object(c.V)(()=>t)}])],decls:5,vars:10,consts:[[3,"ngClass"],[3,"ngClass",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"full-width"],["matInput","","type","number",3,"id","change"],["t",""],["mat-button","","matSuffix","","mat-icon-button",""],["class","img-fluid",3,"src",4,"ngIf"],[1,"img-fluid",3,"src"],[1,"row"],[1,"col-12"],[3,"valueChange"],["select",""],[4,"ngIf"],["value","///DEFAULT///"],[3,"value",4,"ngFor","ngForOf"],[1,"flex-between"],["matSuffix","","class","img-fluid",3,"src",4,"ngIf"],["matSuffix","",1,"img-fluid",3,"src"],[3,"value"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.kc(1,"async"),c.kc(2,"async"),c.Lc(3,A,11,13,"span",1),c.Tb(),c.Lc(4,K,11,2,"div",2)),2&t&&(c.pc("ngClass",c.uc(7,Z,!(e.forceVertical||!0===c.lc(1,3,e.isHandset$)),e.forceVertical||!0===c.lc(2,5,e.isHandset$))),c.Bb(3),c.pc("ngForOf",e.units),c.Bb(1),c.pc("ngIf",e.cata&&!e.hideCataTarget))},directives:[a.k,a.l,a.m,F.b,F.f,S.b,M.a,F.g,E.a,B.l,E.c],pipes:[a.b,a.v],styles:[".full-width[_ngcontent-%COMP%]{width:99%}.pad[_ngcontent-%COMP%]{padding-left:6px;padding-right:6px}div.spread[_ngcontent-%COMP%]{display:table;width:100%;table-layout:fixed}div.spread[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:table-cell;text-align:center}"]}),t})(),X=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.fb=e,this.farm=i,this.form=this.fb.group({farmGroup:"A",units:{},timerInterval:30,maxDistance:20}),this.nonFarmUnits=["militia","ram","catapult","snob"]}ngOnInit(){}submit(t){this.form.disable(),this.farm.addEntity(t.farmGroup,t.units,t.timerInterval,t.maxDistance).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(m.d),c.Ob(d.d),c.Ob(I))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm-task-add"]],decls:38,vars:3,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"w-100"],["formControlName","farmGroup"],["value","A"],["value","B"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],["for","maxDistance"],["id","maxDistance","formControlName","maxDistance","min","1","max","100","thumbLabel","true",1,"w-100"],["matTooltip","Leer lassen um Gruppe nicht zu \xe4ndern."],["formControlName","units",3,"excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"form",2),c.fc("ngSubmit",(function(){return e.submit(e.form.value)})),c.Ub(3,"div",3),c.Ub(4,"div",1),c.Ub(5,"mat-form-field",4),c.Ub(6,"mat-label"),c.Nc(7,"Gruppe"),c.Tb(),c.Ub(8,"mat-select",5),c.Ub(9,"mat-option",6),c.Nc(10,"A"),c.Tb(),c.Ub(11,"mat-option",7),c.Nc(12,"B"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(13,"div",3),c.Ub(14,"div",8),c.Ub(15,"label",9),c.Nc(16,"Interval (Minuten)"),c.Tb(),c.Tb(),c.Ub(17,"div",10),c.Pb(18,"mat-slider",11),c.Tb(),c.Tb(),c.Ub(19,"div",3),c.Ub(20,"div",8),c.Ub(21,"label",12),c.Nc(22,"Max Entfernung"),c.Tb(),c.Tb(),c.Ub(23,"div",10),c.Pb(24,"mat-slider",13),c.Tb(),c.Tb(),c.Ub(25,"div",3),c.Ub(26,"div",8),c.Ub(27,"label",12),c.Nc(28,"Einheiten "),c.Ub(29,"mat-icon",14),c.Nc(30,"info"),c.Tb(),c.Tb(),c.Tb(),c.Ub(31,"div",10),c.Pb(32,"app-units-holder-input",15),c.Tb(),c.Tb(),c.Ub(33,"div",3),c.Ub(34,"div",16),c.Pb(35,"span"),c.Ub(36,"button",17),c.Nc(37," Hinzuf\xfcgen "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Bb(2),c.pc("formGroup",e.form),c.Bb(30),c.pc("excludeUnits",e.nonFarmUnits),c.Bb(4),c.pc("disabled",!e.form.valid||e.form.disabled))},directives:[d.x,d.p,d.i,F.b,F.f,E.a,d.o,d.g,B.l,j.a,L.a,D.a,J,M.a],styles:[""]}),t})();var W=i("7Ixi"),Q=i("OaSA"),Y=i("irRR");function tt(t,e){1&t&&(c.Ub(0,"th",30),c.Nc(1,"Dorf"),c.Tb())}function et(t,e){if(1&t&&(c.Ub(0,"td",31),c.Pb(1,"app-village-render",32),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.pc("value",t)}}function it(t,e){1&t&&c.Pb(0,"th",30)}function at(t,e){if(1&t){const t=c.Vb();c.Ub(0,"td",31),c.Ub(1,"button",33),c.fc("click",(function(){c.Cc(t);const i=e.$implicit;return c.jc(2).removeVillage(i.id)})),c.Ub(2,"mat-icon"),c.Nc(3,"delete"),c.Tb(),c.Tb(),c.Tb()}}function nt(t,e){1&t&&c.Pb(0,"tr",34)}function st(t,e){1&t&&c.Pb(0,"tr",35)}function rt(t,e){if(1&t&&(c.Ub(0,"div",18),c.Ub(1,"table",23),c.Sb(2,24),c.Lc(3,tt,2,0,"th",25),c.Lc(4,et,2,1,"td",26),c.Rb(),c.Sb(5,27),c.Lc(6,it,1,0,"th",25),c.Lc(7,at,4,0,"td",26),c.Rb(),c.Lc(8,nt,1,0,"tr",28),c.Lc(9,st,1,0,"tr",29),c.Tb(),c.Tb()),2&t){const t=c.jc();c.Bb(1),c.pc("dataSource",t.data.villages),c.Bb(7),c.pc("matHeaderRowDef",t.displayedColumns),c.Bb(1),c.pc("matRowDefColumns",t.displayedColumns)}}let ct=(()=>{class t{constructor(t,e,i,a){this.data=t,this.dialogRef=e,this.fb=i,this.farm=a,this.form=this.fb.group({farmGroup:"A",units:{},timerInterval:30,maxDistance:20}),this.villageForm=new d.e(d.v.required),this.nonFarmUnits=["militia","ram","catapult","snob"],this.displayedColumns=["village","delete"],this.form.setValue({farmGroup:t.farmGroup,units:t.units,timerInterval:t.timerInterval,maxDistance:t.maxDistance})}ngOnInit(){}addVillage(){this.farm.addVillage(this.data.id,this.villageForm.value.id).subscribe(t=>{this.data.villages=[...this.data.villages,t.village]})}removeVillage(t){this.farm.removeVillage(this.data.id,t).subscribe(t=>{this.data.villages=this.data.villages.filter(e=>e.id!==t.id)})}submit(t){this.form.disable(),this.farm.editEntity(this.data.id,t.farmGroup,t.units,t.timerInterval,t.maxDistance).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(m.a),c.Ob(m.d),c.Ob(d.d),c.Ob(I))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm-task-edit"]],decls:47,vars:6,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"w-100"],["formControlName","farmGroup"],["value","A"],["value","B"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],["for","maxDistance"],["id","maxDistance","formControlName","maxDistance","min","1","max","100","thumbLabel","true",1,"w-100"],["matTooltip","Leer lassen um Gruppe nicht zu \xe4ndern."],["formControlName","units",3,"excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"col-xl-6"],[1,"col-md-9"],[3,"formControl"],["mat-raised-button","","color","primary",3,"disabled","click"],["class","col-xl-6",4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","village"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["type","button","mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"form",2),c.fc("ngSubmit",(function(){return e.submit(e.form.value)})),c.Ub(3,"div",3),c.Ub(4,"div",1),c.Ub(5,"mat-form-field",4),c.Ub(6,"mat-label"),c.Nc(7,"Gruppe"),c.Tb(),c.Ub(8,"mat-select",5),c.Ub(9,"mat-option",6),c.Nc(10,"A"),c.Tb(),c.Ub(11,"mat-option",7),c.Nc(12,"B"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(13,"div",3),c.Ub(14,"div",8),c.Ub(15,"label",9),c.Nc(16,"Interval (Minuten)"),c.Tb(),c.Tb(),c.Ub(17,"div",10),c.Pb(18,"mat-slider",11),c.Tb(),c.Tb(),c.Ub(19,"div",3),c.Ub(20,"div",8),c.Ub(21,"label",12),c.Nc(22,"Max Entfernung"),c.Tb(),c.Tb(),c.Ub(23,"div",10),c.Pb(24,"mat-slider",13),c.Tb(),c.Tb(),c.Ub(25,"div",3),c.Ub(26,"div",8),c.Ub(27,"label",12),c.Nc(28,"Einheiten "),c.Ub(29,"mat-icon",14),c.Nc(30,"info"),c.Tb(),c.Tb(),c.Tb(),c.Ub(31,"div",10),c.Pb(32,"app-units-holder-input",15),c.Tb(),c.Tb(),c.Ub(33,"div",3),c.Ub(34,"div",16),c.Pb(35,"span"),c.Ub(36,"button",17),c.Nc(37," Bearbeiten "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(38,"div",0),c.Ub(39,"div",18),c.Ub(40,"div",0),c.Ub(41,"div",19),c.Pb(42,"app-village-input",20),c.Tb(),c.Ub(43,"div",8),c.Ub(44,"button",21),c.fc("click",(function(){return e.addVillage()})),c.Nc(45," Dorf hinzuf\xfcgen. "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Lc(46,rt,10,3,"div",22),c.Tb()),2&t&&(c.Bb(2),c.pc("formGroup",e.form),c.Bb(30),c.pc("excludeUnits",e.nonFarmUnits),c.Bb(4),c.pc("disabled",!e.form.valid||e.form.disabled),c.Bb(6),c.pc("formControl",e.villageForm),c.Bb(2),c.pc("disabled",e.villageForm.disabled||e.villageForm.invalid),c.Bb(2),c.pc("ngIf",e.data.villages.length>0))},directives:[d.x,d.p,d.i,F.b,F.f,E.a,d.o,d.g,B.l,j.a,L.a,D.a,J,M.a,W.a,d.f,a.m,Q.j,Q.c,Q.e,Q.b,Q.g,Q.i,Q.d,Q.a,Y.a,Q.f,Q.h],styles:[""]}),t})();var bt=i("PDjf"),lt=i("jMqV"),ot=i("k2HR");let ut=(()=>{class t{constructor(t,e){this.dialog=t,this.farm=e,this.nonFarmUnits=["militia","ram","catapult","snob"],this.delete=new c.o,this.slide=new d.e}set task(t){this.internalTask=t,this.slide.setValue(this.internalTask.enabled,{emitEvent:!1})}ngOnInit(){this.slide.valueChanges.subscribe(t=>{this.farm.setTaskEnabled(this.internalTask.id,t).subscribe()})}remove(){this.farm.deleteEntity(this.internalTask.id).subscribe(t=>{this.delete.emit(t)})}edit(){this.dialog.open(ct,{data:this.internalTask}).afterClosed().subscribe(t=>{void 0!==t&&(this.task=t)})}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(m.b),c.Ob(I))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm-task"]],inputs:{task:"task"},outputs:{delete:"delete"},decls:35,vars:7,consts:[[1,"row"],[1,"col-xl-12"],[1,"col-xl-12","flex-between"],[1,"mr-2",3,"formControl"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],[1,"row","mb-1"],[1,"col-sm-2"],[1,"col-sm-10"],[1,"col-md-2"],[1,"col-xl-10"],[3,"value","excludeUnits"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"mat-card"),c.Ub(3,"div",0),c.Ub(4,"div",2),c.Ub(5,"h1"),c.Nc(6,"Farmtask"),c.Tb(),c.Ub(7,"div"),c.Pb(8,"mat-slide-toggle",3),c.Ub(9,"button",4),c.fc("click",(function(){return e.edit()})),c.Ub(10,"mat-icon"),c.Nc(11,"edit"),c.Tb(),c.Tb(),c.Ub(12,"button",5),c.fc("click",(function(){return e.remove()})),c.Ub(13,"mat-icon"),c.Nc(14,"delete"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(15,"div",6),c.Ub(16,"div",7),c.Nc(17," Interval "),c.Tb(),c.Ub(18,"div",8),c.Nc(19),c.Tb(),c.Tb(),c.Ub(20,"div",6),c.Ub(21,"div",7),c.Nc(22," Max Entfernung "),c.Tb(),c.Ub(23,"div",8),c.Nc(24),c.Tb(),c.Tb(),c.Ub(25,"div",6),c.Ub(26,"div",7),c.Nc(27," D\xf6rfer "),c.Tb(),c.Ub(28,"div",8),c.Nc(29),c.Tb(),c.Tb(),c.Ub(30,"div",0),c.Ub(31,"div",9),c.Nc(32),c.Tb(),c.Ub(33,"div",10),c.Pb(34,"app-units-render",11),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Bb(8),c.pc("formControl",e.slide),c.Bb(11),c.Pc(" ",e.internalTask.timerInterval," Minuten "),c.Bb(5),c.Pc(" ",e.internalTask.maxDistance.toFixed(1)," Felder "),c.Bb(5),c.Pc(" ",e.internalTask.villages.length," "),c.Bb(3),c.Pc(" Einheiten (Gruppe ",e.internalTask.farmGroup.toUpperCase(),") "),c.Bb(2),c.pc("value",e.internalTask.units)("excludeUnits",e.nonFarmUnits))},directives:[bt.a,lt.a,d.o,d.f,M.a,L.a,D.a,ot.a],styles:[""]}),t})();function mt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"app-farm-task",10),c.fc("delete",(function(e){return c.Cc(t),c.jc().delete(e)})),c.Tb()}2&t&&c.pc("task",e.$implicit)}function dt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"div",0),c.Ub(1,"div",11),c.Pb(2,"span"),c.Ub(3,"span",12),c.Nc(4," Keine Tasks vorhanden."),c.Pb(5,"br"),c.Ub(6,"button",13),c.fc("click",(function(){return c.Cc(t),c.jc().add()})),c.Nc(7," Hinzuf\xfcgen. "),c.Tb(),c.Tb(),c.Pb(8,"span"),c.Tb(),c.Tb()}}const ft=[{path:"",component:u,children:[{path:"",pathMatch:"full",component:(()=>{class t{constructor(t,e){this.farm=t,this.dialog=e,this.unsub$=new s.b,this.slide=new d.e,this.max=new d.e}ngOnInit(){this.farm.list(this.unsub$).subscribe(t=>{this.tasks=t}),this.farm.config(this.unsub$).subscribe(t=>{this.slide.setValue(t.enabled,{emitEvent:!1}),this.max.setValue(t.maxIncsPerVillage,{emitEvent:!1})}),this.slide.valueChanges.subscribe(t=>{this.farm.setEnabled(t)}),this.max.valueChanges.subscribe(t=>{this.farm.setMaxIncs(t)})}add(){this.dialog.open(X).afterClosed().subscribe(t=>{void 0!==t&&(this.tasks.push(t),this.dialog.open(ct,{data:t}))})}delete(t){this.tasks=this.tasks.filter(e=>e.id!==t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(I),c.Ob(m.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-farm-overview"]],decls:17,vars:4,consts:[[1,"row"],[1,"col-xl-12"],[1,"mb-3"],[1,"flex-between"],[3,"formControl"],[1,"ml-3"],["matInput","","type","number",3,"formControl"],["mat-mini-fab","","color","primary",3,"click"],[3,"task","delete",4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[3,"task","delete"],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"mat-card",2),c.Ub(3,"div",3),c.Ub(4,"div"),c.Pb(5,"mat-slide-toggle",4),c.Ub(6,"mat-form-field",5),c.Ub(7,"mat-label"),c.Nc(8,"Max Angriffe"),c.Tb(),c.Pb(9,"input",6),c.Ub(10,"mat-hint"),c.Nc(11,"Maximale Anzahl an Angriffen pro Babarendorf."),c.Tb(),c.Tb(),c.Tb(),c.Ub(12,"button",7),c.fc("click",(function(){return e.add()})),c.Ub(13,"mat-icon"),c.Nc(14,"add"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Lc(15,mt,1,1,"app-farm-task",8),c.Lc(16,dt,9,0,"div",9)),2&t&&(c.Bb(5),c.pc("formControl",e.slide),c.Bb(4),c.pc("formControl",e.max),c.Bb(6),c.pc("ngForOf",e.tasks),c.Bb(1),c.pc("ngIf",e.tasks&&0===e.tasks.length))},directives:[bt.a,lt.a,d.o,d.f,F.b,F.f,S.b,d.s,d.c,F.e,M.a,L.a,a.l,a.m,ut],styles:[""]}),t})()}]}];let pt=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[n.e.forChild(ft)],n.e]}),t})();var vt=i("BLWB");let ht=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[a.c,pt,b.c,bt.f,lt.b,d.t,vt.a,F.d,E.b,L.b,M.b,m.c,j.b,D.b,S.c,Q.l]]}),t})()}}]);