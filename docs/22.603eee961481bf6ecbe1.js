(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{KuHJ:function(t,e,i){"use strict";i.r(e),i.d(e,"CommandModule",(function(){return le}));var n=i("ofXK"),o=i("tyNb"),a=i("XNiG"),s=i("1G5W"),c=i("fXoL"),b=i("M9ds"),l=i("PDjf");const r=function(t){return[t]};function m(t,e){if(1&t){const t=c.Vb();c.Ub(0,"span",2),c.fc("click",(function(){c.Ac(t);const i=e.$implicit;return c.jc().activeLink=i})),c.Lc(1),c.Tb()}if(2&t){const t=e.$implicit,i=c.jc();c.pc("active",i.activeLink===t)("routerLink",c.tc(3,r,t.link)),c.Bb(1),c.Nc(" ",t.title," ")}}let d=(()=>{class t{constructor(t){this.router=t,this.links=[{title:"Home",link:"/command"},{title:"Schedule",link:"/command/schedule"},{title:"Simple Timer",link:"/command/timer"},{title:"Import Workbench",link:"/command/import"}],this.activeLink=this.links[0],this.unsub$=new a.b}ngOnInit(){this.setActive(),this.router.events.pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.setActive()})}setActive(){for(const t of this.links)this.router.isActive(t.link,!1)&&(this.activeLink=t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(o.c))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-command"]],decls:4,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(t,e){1&t&&(c.Ub(0,"nav",0),c.Jc(1,m,2,5,"span",1),c.Tb(),c.Ub(2,"mat-card"),c.Pb(3,"router-outlet"),c.Tb()),2&t&&(c.Bb(1),c.pc("ngForOf",e.links))},directives:[b.b,n.l,l.a,o.g,b.a,o.d],encapsulation:2}),t})();var u=i("l5mm"),p=i("5QHs"),f=i("R0Ic"),h=i("0EQZ"),T=i("3Pt+"),v=i("wd/R"),g=i("iELJ"),U=i("SvEG"),k=i("7nMs"),L=i("5za1"),B=i("5eHb"),w=i("7Ixi"),C=i("bTqV"),F=i("Q2Ze"),x=i("ZTz/"),y=i("e6WT"),O=i("TN/R"),S=i("jTwa"),P=i("FKr1"),I=i("38Pe");function D(t,e){if(1&t&&(c.Ub(0,"mat-option",21),c.Ub(1,"div",28),c.Ub(2,"span"),c.Lc(3),c.kc(4,"titlecase"),c.Tb(),c.Tb(),c.Tb()),2&t){const t=e.$implicit;c.pc("value",t),c.Bb(3),c.Mc(c.lc(4,2,t))}}function M(t,e){if(1&t&&(c.Ub(0,"mat-option",21),c.Pb(1,"app-unit-render",21),c.Tb()),2&t){const t=e.$implicit;c.pc("value",t),c.Bb(1),c.pc("value",t)}}function A(t,e){if(1&t&&(c.Ub(0,"mat-option",21),c.Lc(1),c.Tb()),2&t){const t=e.$implicit;c.pc("value",t.id),c.Bb(1),c.Nc(" ",t.name," ")}}function R(t,e){if(1&t&&(c.Sb(0,19),c.Pb(1,"app-units-input",29),c.Rb()),2&t){const t=c.jc();c.Bb(1),c.pc("formControl",t.unitsForm)}}let j=(()=>{class t{constructor(t,e,i,n,o,s){this.data=t,this.dialogRef=e,this.fb=i,this.web=n,this.command=o,this.toastr=s,this.unsub$=new a.b,this.ATTACK=U.a,this.SUPPORT=U.c,this.fromForm=new T.e(""),this.toForm=new T.e(""),this.unitsForm=new T.e,this.templateForm=new T.e,this.unitForm=new T.e("",T.v.required),this.commandTypeForm=new T.e,this.sendDateTimeForm=this.fb.group({date:v(),time:v().format("HH:mm:ss:SSS")}),this.arrivalDateTimeForm=this.fb.group({date:v(),time:v().format("HH:mm:ss:SSS")}),this.timerForm=new T.e,this.disabled=!1,this.setCommandTask(t)}ngOnInit(){this.web.infoObservable.subscribe(t=>{this.units=t.units}),this.command.getTroopTemplates().subscribe(t=>{this.templates=t}),this.command.getTimerLogic().pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.timerLogics=t.available}),this.command.editCommandsEvents().pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.toastr.success("Erfolgreich bearbeitet.",void 0,{timeOut:7e3}),t.id===this.taskId&&this.dialogRef.close(t)})}setCommandTask(t){this.taskId=t.id,this.title=`Bearbeiten von Task ${t.commandType.name} ${t.sendTime.display}`,this.fromForm.setValue(t.from),this.toForm.setValue(t.to),this.unitsForm.setValue(t.units),this.unitForm.setValue(t.unit),this.templateForm.setValue("custom"),this.commandTypeForm.setValue(t.commandType),this.timerForm.setValue(t.timer.toUpperCase()),this.command.getEditTimes(t.id).subscribe(t=>{this.sendDateTimeForm.setValue({date:v(t.sendTime),time:v(t.sendTime).format("HH:mm:ss:SSS")}),this.arrivalDateTimeForm.setValue({date:v(t.arrivalTime),time:v(t.arrivalTime).format("HH:mm:ss:SSS")})})}updateFrom(t){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.editSource(this.taskId,t.id)}updateTo(t){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.editTarget(this.taskId,t.id)}updateTimer(t){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.editTimer(this.taskId,t)}updateUnits(t,e){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.editTroops(this.taskId,"custom"===t?void 0:t,"custom"===t?e:void 0)}updateUnit(t){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.editSlowestUnit(this.taskId,t)}updateCommandType(t){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.editCommandType(this.taskId,t)}updateArrivalTime(t){const e=v(t.date.format("DD.MM.YYYY")+" "+t.time,"DD.MM.YYYY HH:mm:ss:SSS");this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.editArrival(this.taskId,e.valueOf())}updateSendTime(t){this.disabled=!0;const e=v(t.date.format("DD.MM.YYYY")+" "+t.time,"DD.MM.YYYY HH:mm:ss:SSS");setTimeout(()=>this.disabled=!1,1500),this.command.editSendTime(this.taskId,e.valueOf())}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(g.a),c.Ob(g.g),c.Ob(T.d),c.Ob(k.a),c.Ob(L.a),c.Ob(B.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-command-edit"]],decls:113,vars:31,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"form-group","row"],[1,"label","col-sm-1","col-form-label"],[1,"col-xl-8"],[3,"formControl"],[1,"col-xl-3"],["type","submit","mat-raised-button","","color","primary",1,"w-100",3,"disabled","click"],[1,"label","col-xl-1","col-form-label"],[3,"value",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],["matInput","","placeholder","Pick Date","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],[1,"ml-2"],["matInput","","maxlength","12","formControlName","time"],["type","submit","mat-raised-button","","color","primary",1,"w-100",3,"disabled"],["arrivalpicker",""],["for","unit",1,"label","col-xl-1","col-form-label"],[1,"w-100"],["id","unit",3,"formControl"],[3,"value"],["id","template",3,"formControl"],["value","custom"],["class","w-100",4,"ngIf"],["for","commandType",1,"label","col-xl-1","col-form-label"],[1,"example-full-width"],["id","commandType",3,"formControl"],[1,"flex-between"],["required","","id","units",3,"formControl"]],template:function(t,e){if(1&t&&(c.Ub(0,"h1",0),c.Lc(1),c.Tb(),c.Ub(2,"div",1),c.Ub(3,"div",2),c.Ub(4,"label",3),c.Lc(5,"Herkunft"),c.Tb(),c.Ub(6,"div",4),c.Pb(7,"app-village-input",5),c.Tb(),c.Ub(8,"div",6),c.Ub(9,"button",7),c.fc("click",(function(){return e.updateFrom(e.fromForm.value)})),c.Lc(10," Herkunft Aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Ub(11,"div",2),c.Ub(12,"label",8),c.Lc(13,"Ziel"),c.Tb(),c.Ub(14,"div",4),c.Pb(15,"app-village-input",5),c.Tb(),c.Ub(16,"div",6),c.Ub(17,"button",7),c.fc("click",(function(){return e.updateTo(e.toForm.value)})),c.Lc(18," Ziel Aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Ub(19,"div",2),c.Ub(20,"label",8),c.Lc(21,"Timer"),c.Tb(),c.Ub(22,"div",4),c.Ub(23,"mat-form-field"),c.Ub(24,"mat-label"),c.Lc(25,"Timer Logik"),c.Tb(),c.Ub(26,"mat-select",5),c.Ub(27,"mat-select-trigger"),c.Lc(28),c.kc(29,"titlecase"),c.Tb(),c.Jc(30,D,5,4,"mat-option",9),c.Tb(),c.Tb(),c.Tb(),c.Ub(31,"div",6),c.Ub(32,"button",7),c.fc("click",(function(){return e.updateTimer(e.timerForm.value)})),c.Lc(33," Timer Logik Aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Ub(34,"form",10),c.fc("ngSubmit",(function(){return e.updateSendTime(e.sendDateTimeForm.value)})),c.Ub(35,"div",2),c.Ub(36,"label",8),c.Lc(37,"Abschickzeit"),c.Tb(),c.Ub(38,"div",4),c.Ub(39,"mat-form-field"),c.Ub(40,"mat-label"),c.Lc(41,"Datum"),c.Tb(),c.Pb(42,"input",11),c.Pb(43,"mat-datepicker-toggle",12),c.Pb(44,"mat-datepicker",null,13),c.Tb(),c.Ub(46,"mat-form-field",14),c.Pb(47,"input",15),c.Tb(),c.Tb(),c.Ub(48,"div",6),c.Ub(49,"button",16),c.Lc(50," Abschickzeit aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(51,"form",10),c.fc("ngSubmit",(function(){return e.updateArrivalTime(e.arrivalDateTimeForm.value)})),c.Ub(52,"div",2),c.Ub(53,"label",8),c.Lc(54,"Ankunft"),c.Tb(),c.Ub(55,"div",4),c.Ub(56,"mat-form-field"),c.Ub(57,"mat-label"),c.Lc(58,"Datum"),c.Tb(),c.Pb(59,"input",11),c.Pb(60,"mat-datepicker-toggle",12),c.Pb(61,"mat-datepicker",null,17),c.Tb(),c.Ub(63,"mat-form-field",14),c.Pb(64,"input",15),c.Tb(),c.Tb(),c.Ub(65,"div",6),c.Ub(66,"button",16),c.Lc(67," Ankunftszeit aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(68,"div",2),c.Ub(69,"label",18),c.Lc(70,"Einheit"),c.Tb(),c.Ub(71,"div",4),c.Ub(72,"mat-form-field",19),c.Ub(73,"mat-label"),c.Lc(74,"Einheit"),c.Tb(),c.Ub(75,"mat-select",20),c.Ub(76,"mat-select-trigger"),c.Pb(77,"app-unit-render",21),c.Tb(),c.Jc(78,M,2,2,"mat-option",9),c.Tb(),c.Tb(),c.Tb(),c.Ub(79,"div",6),c.Ub(80,"button",7),c.fc("click",(function(){return e.updateUnit(e.unitForm.value)})),c.Lc(81," Einheit Aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Ub(82,"div",2),c.Ub(83,"label",8),c.Lc(84,"Einheiten"),c.Tb(),c.Ub(85,"div",4),c.Ub(86,"mat-form-field",19),c.Ub(87,"mat-label"),c.Lc(88,"Standard Angriff"),c.Tb(),c.Ub(89,"mat-select",22),c.Jc(90,A,2,2,"mat-option",9),c.Ub(91,"mat-option",23),c.Lc(92," Custom "),c.Tb(),c.Tb(),c.Tb(),c.Pb(93,"br"),c.Jc(94,R,2,1,"ng-container",24),c.Tb(),c.Ub(95,"div",6),c.Ub(96,"button",7),c.fc("click",(function(){return e.updateUnits(e.templateForm.value,e.unitsForm.value)})),c.Lc(97," Einheiten Aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Ub(98,"div",2),c.Ub(99,"label",25),c.Lc(100,"Befehlstyp"),c.Tb(),c.Ub(101,"div",4),c.Ub(102,"mat-form-field",26),c.Ub(103,"mat-label"),c.Lc(104,"Befehlstyp"),c.Tb(),c.Ub(105,"mat-select",27),c.Ub(106,"mat-option",21),c.Lc(107,"Angriff"),c.Tb(),c.Ub(108,"mat-option",21),c.Lc(109,"Unterst\xfctzung"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(110,"div",6),c.Ub(111,"button",7),c.fc("click",(function(){return e.updateCommandType(e.commandTypeForm.value)})),c.Lc(112," Befehlstyp Aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&t){const t=c.xc(45),i=c.xc(62);c.Bb(1),c.Mc(e.title),c.Bb(6),c.pc("formControl",e.fromForm),c.Bb(2),c.pc("disabled",!e.fromForm.valid||e.disabled),c.Bb(6),c.pc("formControl",e.toForm),c.Bb(2),c.pc("disabled",!e.toForm.valid||e.disabled),c.Bb(9),c.pc("formControl",e.timerForm),c.Bb(2),c.Mc(c.lc(29,29,e.timerForm.value)),c.Bb(2),c.pc("ngForOf",e.timerLogics),c.Bb(2),c.pc("disabled",!e.timerForm.valid||e.disabled),c.Bb(2),c.pc("formGroup",e.sendDateTimeForm),c.Bb(8),c.pc("matDatepicker",t),c.Bb(1),c.pc("for",t),c.Bb(6),c.pc("disabled",!e.sendDateTimeForm.valid||e.disabled),c.Bb(2),c.pc("formGroup",e.arrivalDateTimeForm),c.Bb(8),c.pc("matDatepicker",i),c.Bb(1),c.pc("for",i),c.Bb(6),c.pc("disabled",!e.arrivalDateTimeForm.valid||e.disabled),c.Bb(9),c.pc("formControl",e.unitForm),c.Bb(2),c.pc("value",e.unitForm.value),c.Bb(1),c.pc("ngForOf",e.units),c.Bb(2),c.pc("disabled",!e.unitForm.valid||e.disabled),c.Bb(9),c.pc("formControl",e.templateForm),c.Bb(1),c.pc("ngForOf",e.templates),c.Bb(4),c.pc("ngIf","custom"===e.templateForm.value),c.Bb(2),c.pc("disabled",!e.unitsForm.valid||e.disabled),c.Bb(9),c.pc("formControl",e.commandTypeForm),c.Bb(1),c.pc("value",e.ATTACK),c.Bb(2),c.pc("value",e.SUPPORT),c.Bb(3),c.pc("disabled",!e.commandTypeForm.valid||e.disabled)}},directives:[g.h,g.e,w.a,T.o,T.f,C.a,F.b,F.f,x.a,x.c,n.l,T.x,T.p,T.i,y.b,T.c,O.b,T.g,O.d,F.g,O.a,T.k,S.a,P.n,n.m,I.a,T.u],pipes:[n.v],styles:[""]}),t})();var J=i("SxV6");function $(t,e){if(1&t&&(c.Ub(0,"mat-option",21),c.Ub(1,"div",27),c.Ub(2,"span"),c.Lc(3),c.kc(4,"titlecase"),c.Tb(),c.Tb(),c.Tb()),2&t){const t=e.$implicit;c.pc("value",t),c.Bb(3),c.Mc(c.lc(4,2,t))}}function E(t,e){if(1&t&&(c.Ub(0,"mat-option",21),c.Lc(1),c.kc(2,"titlecase"),c.Tb()),2&t){const t=e.$implicit;c.pc("value",t),c.Bb(1),c.Nc(" ",c.lc(2,2,t)," ")}}function N(t,e){if(1&t&&(c.Ub(0,"mat-option",21),c.Pb(1,"app-unit-render",21),c.Tb()),2&t){const t=e.$implicit;c.pc("value",t),c.Bb(1),c.pc("value",t)}}function V(t,e){if(1&t&&(c.Ub(0,"mat-option",21),c.Lc(1),c.Tb()),2&t){const t=e.$implicit;c.pc("value",t.id),c.Bb(1),c.Nc(" ",t.name," ")}}function z(t,e){if(1&t&&(c.Sb(0,12),c.Pb(1,"app-units-input",28),c.Rb()),2&t){const t=c.jc();c.Bb(1),c.pc("formControl",t.unitsForm)}}let H=(()=>{class t{constructor(t,e,i,n,o,s){this.data=t,this.dialogRef=e,this.fb=i,this.web=n,this.command=o,this.toastr=s,this.unsub$=new a.b,this.ATTACK=U.a,this.SUPPORT=U.c,this.chronoUnits=["MILLIS","SECONDS","MINUTES","HOURS","DAYS"],this.unitsForm=new T.e,this.templateForm=new T.e,this.unitForm=new T.e("",T.v.required),this.commandTypeForm=new T.e("",T.v.required),this.addTimeForm=this.fb.group({plus:[1,T.v.required],unit:[this.chronoUnits[0],T.v.required]}),this.randomMsForm=this.fb.group({min:[0,T.v.compose([T.v.min(0),T.v.max(999)])],max:[999,T.v.compose([T.v.min(0),T.v.max(999)])]}),this.setMsForm=new T.e(0,T.v.compose([T.v.min(0),T.v.max(999)])),this.timerForm=new T.e("",T.v.required),this.disabled=!1,this.ids=t}ngOnInit(){this.web.infoObservable.subscribe(t=>{this.units=t.units}),this.command.getTroopTemplates().subscribe(t=>{this.templates=t}),this.command.getTimerLogic().pipe(Object(J.a)()).subscribe(t=>{this.timerLogics=t.available}),this.command.multiEditEvents(this.unsub$).subscribe(t=>{t.success>0&&this.toastr.success(t.success+" Erfolgreich bearbeitet.",void 0,{timeOut:7e3}),t.error>0&&this.toastr.error(t.error+" nicht bearbeitet.",void 0,{timeOut:7e3})})}setRandomMs(t,e){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.randomizeMillis(this.ids,t,e)}setMs(t){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.setMillis(this.ids,t)}addTime(t,e){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.addMillis(this.ids,t,e)}updateTimer(t){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.multiEditTimer(this.ids,t)}updateUnits(t,e){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.multiEditTroops(this.ids,"custom"===t?void 0:t,"custom"===t?e:void 0)}updateUnit(t){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.multiEditUnit(this.ids,t)}updateCommandType(t){this.disabled=!0,setTimeout(()=>this.disabled=!1,1500),this.command.multiEditType(this.ids,t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(g.a),c.Ob(g.g),c.Ob(T.d),c.Ob(k.a),c.Ob(L.a),c.Ob(B.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-command-multi-edit"]],decls:113,vars:26,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"form-group","row"],[1,"label","col-xl-1","col-form-label"],[1,"col-xl-8"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[1,"col-xl-3"],["type","submit","mat-raised-button","","color","primary",1,"w-100",3,"disabled","click"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"w-100"],["matInput","","type","number","formControlName","plus"],["formControlName","unit"],["type","submit","mat-raised-button","","color","primary",1,"w-100",3,"disabled"],["matInput","","type","number","formControlName","min"],["matInput","","type","number","formControlName","max"],["matInput","","type","number",3,"formControl"],["for","unit",1,"label","col-xl-1","col-form-label"],["id","unit",3,"formControl"],[3,"value"],["id","template",3,"formControl"],["value","custom"],["class","w-100",4,"ngIf"],["for","commandType",1,"label","col-xl-1","col-form-label"],["id","commandType",3,"formControl"],[1,"flex-between"],["required","","id","units",3,"formControl"]],template:function(t,e){1&t&&(c.Ub(0,"h1",0),c.Lc(1),c.Tb(),c.Ub(2,"div",1),c.Ub(3,"div",2),c.Ub(4,"label",3),c.Lc(5,"Timer"),c.Tb(),c.Ub(6,"div",4),c.Ub(7,"mat-form-field"),c.Ub(8,"mat-label"),c.Lc(9,"Timer Logik"),c.Tb(),c.Ub(10,"mat-select",5),c.Ub(11,"mat-select-trigger"),c.Lc(12),c.kc(13,"titlecase"),c.Tb(),c.Jc(14,$,5,4,"mat-option",6),c.Tb(),c.Tb(),c.Tb(),c.Ub(15,"div",7),c.Ub(16,"button",8),c.fc("click",(function(){return e.updateTimer(e.timerForm.value)})),c.Lc(17," Timer Logik Aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Ub(18,"form",9),c.fc("ngSubmit",(function(){return e.addTime(e.addTimeForm.value.plus,e.addTimeForm.value.unit)})),c.Ub(19,"div",2),c.Ub(20,"label",3),c.Lc(21,"Verschieben"),c.Tb(),c.Ub(22,"div",4),c.Ub(23,"div",10),c.Ub(24,"div",11),c.Ub(25,"mat-form-field",12),c.Ub(26,"mat-label"),c.Lc(27,"Plus"),c.Tb(),c.Pb(28,"input",13),c.Tb(),c.Tb(),c.Ub(29,"div",11),c.Ub(30,"mat-form-field",12),c.Ub(31,"mat-label"),c.Lc(32,"Einheit"),c.Tb(),c.Ub(33,"mat-select",14),c.Jc(34,E,3,4,"mat-option",6),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(35,"div",7),c.Ub(36,"button",15),c.Lc(37," Zeit addieren "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(38,"form",9),c.fc("ngSubmit",(function(){return e.setRandomMs(e.randomMsForm.value.min,e.randomMsForm.value.max)})),c.Ub(39,"div",2),c.Ub(40,"label",3),c.Lc(41,"Zuf\xe4llige MS"),c.Tb(),c.Ub(42,"div",4),c.Ub(43,"div",10),c.Ub(44,"div",11),c.Ub(45,"mat-form-field",12),c.Ub(46,"mat-label"),c.Lc(47,"Min"),c.Tb(),c.Pb(48,"input",16),c.Tb(),c.Tb(),c.Ub(49,"div",11),c.Ub(50,"mat-form-field",12),c.Ub(51,"mat-label"),c.Lc(52,"Max"),c.Tb(),c.Pb(53,"input",17),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(54,"div",7),c.Ub(55,"button",15),c.Lc(56," Random MS "),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(57,"div",2),c.Ub(58,"label",3),c.Lc(59,"MS setzen"),c.Tb(),c.Ub(60,"div",4),c.Ub(61,"mat-form-field",12),c.Ub(62,"mat-label"),c.Lc(63,"MS"),c.Tb(),c.Pb(64,"input",18),c.Tb(),c.Tb(),c.Ub(65,"div",7),c.Ub(66,"button",8),c.fc("click",(function(){return e.setMs(e.setMsForm.value)})),c.Lc(67," MS setzen "),c.Tb(),c.Tb(),c.Tb(),c.Ub(68,"div",2),c.Ub(69,"label",19),c.Lc(70,"Einheit"),c.Tb(),c.Ub(71,"div",4),c.Ub(72,"mat-form-field",12),c.Ub(73,"mat-label"),c.Lc(74,"Einheit"),c.Tb(),c.Ub(75,"mat-select",20),c.Ub(76,"mat-select-trigger"),c.Pb(77,"app-unit-render",21),c.Tb(),c.Jc(78,N,2,2,"mat-option",6),c.Tb(),c.Tb(),c.Tb(),c.Ub(79,"div",7),c.Ub(80,"button",8),c.fc("click",(function(){return e.updateUnit(e.unitForm.value)})),c.Lc(81," Einheit Aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Ub(82,"div",2),c.Ub(83,"label",3),c.Lc(84,"Einheiten"),c.Tb(),c.Ub(85,"div",4),c.Ub(86,"mat-form-field",12),c.Ub(87,"mat-label"),c.Lc(88,"Standard Angriff"),c.Tb(),c.Ub(89,"mat-select",22),c.Jc(90,V,2,2,"mat-option",6),c.Ub(91,"mat-option",23),c.Lc(92," Custom "),c.Tb(),c.Tb(),c.Tb(),c.Pb(93,"br"),c.Jc(94,z,2,1,"ng-container",24),c.Tb(),c.Ub(95,"div",7),c.Ub(96,"button",8),c.fc("click",(function(){return e.updateUnits(e.templateForm.value,e.unitsForm.value)})),c.Lc(97," Einheiten Aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Ub(98,"div",2),c.Ub(99,"label",25),c.Lc(100,"Befehlstyp"),c.Tb(),c.Ub(101,"div",4),c.Ub(102,"mat-form-field",12),c.Ub(103,"mat-label"),c.Lc(104,"Befehlstyp"),c.Tb(),c.Ub(105,"mat-select",26),c.Ub(106,"mat-option",21),c.Lc(107,"Angriff"),c.Tb(),c.Ub(108,"mat-option",21),c.Lc(109,"Unterst\xfctzung"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(110,"div",7),c.Ub(111,"button",8),c.fc("click",(function(){return e.updateCommandType(e.commandTypeForm.value)})),c.Lc(112," Befehlstyp Aktualisieren "),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Bb(1),c.Nc("Bearbeiten von ",e.ids.length," Befehlen"),c.Bb(9),c.pc("formControl",e.timerForm),c.Bb(2),c.Mc(c.lc(13,24,e.timerForm.value)),c.Bb(2),c.pc("ngForOf",e.timerLogics),c.Bb(2),c.pc("disabled",!e.timerForm.valid||e.disabled),c.Bb(2),c.pc("formGroup",e.addTimeForm),c.Bb(16),c.pc("ngForOf",e.chronoUnits),c.Bb(2),c.pc("disabled",!e.addTimeForm.valid||e.disabled),c.Bb(2),c.pc("formGroup",e.randomMsForm),c.Bb(17),c.pc("disabled",!e.randomMsForm.valid||e.disabled),c.Bb(9),c.pc("formControl",e.setMsForm),c.Bb(2),c.pc("disabled",!e.setMsForm.valid||e.disabled),c.Bb(9),c.pc("formControl",e.unitForm),c.Bb(2),c.pc("value",e.unitForm.value),c.Bb(1),c.pc("ngForOf",e.units),c.Bb(2),c.pc("disabled",!e.unitForm.valid||e.disabled),c.Bb(9),c.pc("formControl",e.templateForm),c.Bb(1),c.pc("ngForOf",e.templates),c.Bb(4),c.pc("ngIf","custom"===e.templateForm.value),c.Bb(2),c.pc("disabled",!e.unitsForm.valid||e.disabled||!e.unitsForm.value&&!e.templateForm.value),c.Bb(9),c.pc("formControl",e.commandTypeForm),c.Bb(1),c.pc("value",e.ATTACK),c.Bb(2),c.pc("value",e.SUPPORT),c.Bb(3),c.pc("disabled",!e.commandTypeForm.valid||e.disabled))},directives:[g.h,g.e,F.b,F.f,x.a,T.o,T.f,x.c,n.l,C.a,T.x,T.p,T.i,y.b,T.s,T.c,T.g,S.a,P.n,n.m,I.a,T.u],pipes:[n.v],styles:[""]}),t})();var _=i("Tr4x"),Y=i("jMqV"),G=i("ZFy/"),Z=i("NFeN"),W=i("pu8Q"),q=i("OaSA"),K=i("pMoy"),Q=i("irRR"),X=i("k2HR"),tt=i("DSdR");function et(t,e){if(1&t&&(c.Sb(0),c.Pb(1,"img",29),c.Rb()),2&t){const t=c.jc(2);c.Bb(1),c.pc("src","assets/"+t.filter.value.type.image,c.Cc)}}function it(t,e){if(1&t&&(c.Ub(0,"mat-option",30),c.Pb(1,"img",29),c.Tb()),2&t){const t=e.$implicit;c.pc("value",t),c.Bb(1),c.pc("src","assets/"+t.image,c.Cc)}}function nt(t,e){if(1&t&&(c.Ub(0,"div",7),c.Ub(1,"mat-form-field",8),c.Ub(2,"mat-label"),c.Lc(3,"Typ"),c.Tb(),c.Ub(4,"mat-select",28),c.Ub(5,"mat-select-trigger"),c.Jc(6,et,2,1,"ng-container",24),c.Tb(),c.Ub(7,"mat-option"),c.Lc(8," Alle "),c.Tb(),c.Jc(9,it,2,2,"mat-option",11),c.Tb(),c.Tb(),c.Tb()),2&t){const t=c.jc();c.Bb(6),c.pc("ngIf",t.filter.value.type),c.Bb(3),c.pc("ngForOf",t.usedTypes)}}function ot(t,e){if(1&t&&c.Pb(0,"app-unit-render",30),2&t){const t=c.jc();c.pc("value",t.filter.value.unit)}}function at(t,e){if(1&t&&(c.Ub(0,"mat-option",30),c.Pb(1,"app-unit-render",30),c.Tb()),2&t){const t=e.$implicit;c.pc("value",t),c.Bb(1),c.pc("value",t)}}function st(t,e){if(1&t&&c.Pb(0,"img",29),2&t){const t=c.jc();c.pc("src",t.imagebase+"buildings/"+t.filter.value.cataTarget+".png",c.Cc)}}function ct(t,e){if(1&t&&(c.Ub(0,"mat-option",30),c.Pb(1,"img",29),c.Tb()),2&t){const t=e.$implicit,i=c.jc();c.pc("value",t),c.Bb(1),c.pc("src",i.imagebase+"buildings/"+t+".png",c.Cc)}}function bt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"button",31),c.fc("click",(function(){c.Ac(t);const e=c.jc(),i=c.xc(48);return e.deleteSelected(i)})),c.Ub(1,"mat-icon"),c.Lc(2,"delete"),c.Tb(),c.Tb()}}function lt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"button",32),c.fc("click",(function(){return c.Ac(t),c.jc().multiEdit()})),c.Ub(1,"mat-icon"),c.Lc(2,"edit"),c.Tb(),c.Tb()}}function rt(t,e){1&t&&c.Pb(0,"mat-spinner")}function mt(t,e){if(1&t&&(c.Ub(0,"div",33),c.Jc(1,rt,1,0,"mat-spinner",24),c.Tb()),2&t){const t=c.jc();c.Bb(1),c.pc("ngIf",t.isLoadingResults)}}function dt(t,e){1&t&&(c.Sb(0),c.Lc(1," Keine Tasks vorhanden. "),c.Rb())}function ut(t,e){if(1&t){const t=c.Vb();c.Ub(0,"th",50),c.Ub(1,"mat-checkbox",51),c.fc("change",(function(e){c.Ac(t);const i=c.jc(2);return e?i.masterToggle():null})),c.Tb(),c.Tb()}if(2&t){const t=c.jc(2);c.Bb(1),c.pc("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected())}}function pt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"td",52),c.Ub(1,"mat-checkbox",53),c.fc("click",(function(e){return c.Ac(t),e.stopPropagation()}))("change",(function(i){c.Ac(t);const n=e.$implicit,o=c.jc(2);return i?o.selection.toggle(n):null})),c.Tb(),c.Tb()}if(2&t){const t=e.$implicit,i=c.jc(2);c.Bb(1),c.pc("checked",i.selection.isSelected(t))}}function ft(t,e){1&t&&(c.Ub(0,"th",50),c.Lc(1," Herkunft"),c.Tb())}function ht(t,e){if(1&t&&(c.Ub(0,"td",52),c.Pb(1,"app-village-render",30),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.pc("value",t.from)}}function Tt(t,e){1&t&&(c.Ub(0,"th",50),c.Lc(1," Ziel"),c.Tb())}function vt(t,e){if(1&t&&(c.Ub(0,"td",52),c.Pb(1,"app-village-render",30),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.pc("value",t.to)}}function gt(t,e){1&t&&(c.Ub(0,"th",50),c.Lc(1," Typ"),c.Tb())}function Ut(t,e){if(1&t&&(c.Ub(0,"td",52),c.Pb(1,"img",29),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.pc("src","assets/"+t.commandType.image,c.Cc)}}function kt(t,e){1&t&&(c.Ub(0,"th",50),c.Lc(1," Einheit"),c.Tb())}function Lt(t,e){if(1&t&&(c.Ub(0,"td",52),c.Pb(1,"app-unit-render",30),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.pc("value",t.unit)}}function Bt(t,e){1&t&&(c.Ub(0,"th",50),c.Lc(1," Abschickzeit"),c.Tb())}function wt(t,e){if(1&t&&(c.Ub(0,"td",52),c.Lc(1),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.Nc(" ",t.sendTime.display," ")}}function Ct(t,e){1&t&&(c.Ub(0,"th",50),c.Lc(1," Ankunftszeit"),c.Tb())}function Ft(t,e){if(1&t&&(c.Ub(0,"td",52),c.Lc(1),c.Ub(2,"small"),c.Lc(3),c.Tb(),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.Nc(" ",t.arrivalTime.display,""),c.Bb(2),c.Nc(":",t.arrivalTime.ms,"")}}function xt(t,e){1&t&&(c.Ub(0,"th",50),c.Lc(1," Verbleibend"),c.Tb())}function yt(t,e){if(1&t&&(c.Sb(0),c.Lc(1),c.kc(2,"hms"),c.Rb()),2&t){const t=c.jc().$implicit;c.Bb(1),c.Nc(" ",c.lc(2,1,1e3*t.remainingDelay)," ")}}function Ot(t,e){1&t&&(c.Sb(0),c.Ub(1,"span",54),c.Lc(2,"00:00:00"),c.Tb(),c.Rb())}function St(t,e){if(1&t&&(c.Ub(0,"td",52),c.Jc(1,yt,3,3,"ng-container",24),c.Jc(2,Ot,3,0,"ng-container",24),c.Tb()),2&t){const t=e.$implicit;c.Bb(1),c.pc("ngIf",1e3*t.remainingDelay>0),c.Bb(1),c.pc("ngIf",1e3*t.remainingDelay<=0)}}function Pt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"td",52),c.Ub(1,"div",55),c.Pb(2,"span"),c.Pb(3,"app-units-render",30),c.Ub(4,"div",56),c.Ub(5,"a",57),c.Ub(6,"button",58),c.Ub(7,"mat-icon"),c.Lc(8,"open_in_new"),c.Tb(),c.Tb(),c.Tb(),c.Ub(9,"button",59),c.fc("click",(function(){c.Ac(t);const i=e.$implicit;return c.jc(2).editTask(i)})),c.Ub(10,"mat-icon"),c.Lc(11,"edit"),c.Tb(),c.Tb(),c.Ub(12,"button",60),c.fc("click",(function(){c.Ac(t);const i=e.$implicit,n=c.jc(2),o=c.xc(48);return n.delete(i,o)})),c.Ub(13,"mat-icon"),c.Lc(14,"delete_forever"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb()}if(2&t){const t=e.$implicit,i=c.jc(2);c.Cb("colspan",i.columnsToDisplay.length),c.Bb(1),c.pc("@detailExpand",t==i.expandedElement?"expanded":"collapsed"),c.Bb(2),c.pc("value",t.units),c.Bb(2),c.pc("href",i.placeLink(t),c.Cc)}}function It(t,e){1&t&&c.Pb(0,"tr",61)}function Dt(t,e){if(1&t){const t=c.Vb();c.Ub(0,"tr",62),c.fc("click",(function(){c.Ac(t);const i=e.$implicit,n=c.jc(2);return n.expandedElement=n.expandedElement===i?null:i})),c.Tb()}if(2&t){const t=e.$implicit,i=c.jc(2);c.Gb("example-expanded-row",t==i.expandedElement)}}function Mt(t,e){1&t&&c.Pb(0,"tr",63)}const At=function(){return["expandedDetail"]};function Rt(t,e){if(1&t&&(c.Ub(0,"div",34),c.Ub(1,"table",35),c.Sb(2,36),c.Jc(3,ut,2,2,"th",37),c.Jc(4,pt,2,1,"td",38),c.Rb(),c.Sb(5,39),c.Jc(6,ft,2,0,"th",37),c.Jc(7,ht,2,1,"td",38),c.Rb(),c.Sb(8,40),c.Jc(9,Tt,2,0,"th",37),c.Jc(10,vt,2,1,"td",38),c.Rb(),c.Sb(11,41),c.Jc(12,gt,2,0,"th",37),c.Jc(13,Ut,2,1,"td",38),c.Rb(),c.Sb(14,42),c.Jc(15,kt,2,0,"th",37),c.Jc(16,Lt,2,1,"td",38),c.Rb(),c.Sb(17,43),c.Jc(18,Bt,2,0,"th",37),c.Jc(19,wt,2,1,"td",38),c.Rb(),c.Sb(20,44),c.Jc(21,Ct,2,0,"th",37),c.Jc(22,Ft,4,2,"td",38),c.Rb(),c.Sb(23,45),c.Jc(24,xt,2,0,"th",37),c.Jc(25,St,3,2,"td",38),c.Rb(),c.Sb(26,46),c.Jc(27,Pt,15,4,"td",38),c.Rb(),c.Jc(28,It,1,0,"tr",47),c.Jc(29,Dt,1,2,"tr",48),c.Jc(30,Mt,1,0,"tr",49),c.Tb(),c.Tb()),2&t){const t=c.jc();c.Bb(1),c.pc("dataSource",t.tasks.tasks),c.Bb(27),c.pc("matHeaderRowDef",t.columnsToDisplay),c.Bb(1),c.pc("matRowDefColumns",t.columnsToDisplay),c.Bb(1),c.pc("matRowDefColumns",c.sc(4,At))}}const jt=function(){return[10,50,100,250]};let Jt=(()=>{class t{constructor(t,e,i,n,o,s){this.commandService=t,this.clipboard=e,this.router=i,this.web=n,this.dialog=o,this.fb=s,this.unsub$=new a.b,this.columnsToDisplay=["select","from","to","commandType","unit","sendTime","arrivalTime","remainingDelay"],this.tasks={id:Math.random(),count:0,tasks:[]},this.isLoadingResults=!1,this.selection=new h.c(!0,[]),this.removeControl=new T.e(!1),this.shouldReload=!1,this.filter=this.fb.group({origin:void 0,target:void 0,type:void 0,unit:void 0,cataTarget:void 0}),this.units=[],this.buildings=[],this.usedTypes=[]}ngOnInit(){this.commandService.getCommandTypes().subscribe(t=>{this.usedTypes=t}),this.removeControl.setValue(this.commandService.shouldOverviewRemove(),{emitEvent:!1}),this.removeControl.valueChanges.subscribe(t=>{this.commandService.setOverviewRemove(t)});for(const t of Object.keys(this.filter.controls)){const e=this.filter.controls[t];e.valueChanges.subscribe(()=>{(e.valid||null==e.value)&&this.refresh(this.paginator)})}this.web.info().subscribe(t=>{this.world=t.world,this.units=t.units,this.buildings=t.buildings,this.imagebase=t.imageBase}),this.isLoadingResults=!0,this.commandService.getCommandList(10,0,void 0,void 0,void 0,void 0,void 0).subscribe(t=>{this.isLoadingResults=!1,this.tasks=t}),this.commandService.addCommandEvents().pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.tasks.tasks=[...this.tasks.tasks,t],this.tasks.count++,this.tasks.tasks.sort((t,e)=>t.remainingDelay<e.remainingDelay?-1:1)}),this.commandService.removeCommandEvents().pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.tasks.tasks=this.tasks.tasks.filter((e,i,n)=>e.id!==t),this.tasks.count--}),Object(u.a)(1e3).pipe(Object(s.a)(this.unsub$)).subscribe(t=>{var e,i;let n=!1;null===(i=null===(e=this.tasks)||void 0===e?void 0:e.tasks)||void 0===i||i.forEach((t,e,i)=>{1===t.remainingDelay&&(n=!0),i[e].remainingDelay>0&&(i[e].remainingDelay-=1)}),n&&setTimeout(()=>{this.shouldReload=!0},16500),this.shouldReload&&!0===this.removeControl.value&&(this.shouldReload=!1,this.refresh(this.paginator))})}placeLink(t){return"https://"+this.world+".die-staemme.de/game.php?village="+t.from.id+"&screen=place&mode=command&target="+t.to.id}isAllSelected(){return this.selection.selected.length===this.tasks.tasks.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.tasks.tasks.forEach(t=>this.selection.select(t))}multiEdit(){this.dialog.open(H,{data:this.selection.selected.map(t=>t.id),minWidth:"60%"}).afterClosed().subscribe(()=>{this.selection.clear(),this.refresh(this.paginator)})}editTask(t){this.dialog.open(j,{data:t,minWidth:"60%"}).afterClosed().subscribe(t=>{var e,i;t&&(this.tasks.tasks=null===(i=null===(e=this.tasks)||void 0===e?void 0:e.tasks)||void 0===i?void 0:i.map(e=>e.id===t.id?t:e),this.expandedElement=t)})}refresh(t){this.isLoadingResults=!0,setTimeout(()=>{var e,i,n;this.commandService.getCommandList(t.pageSize,t.pageIndex*t.pageSize,null===(e=this.filter.value.origin)||void 0===e?void 0:e.id,null===(i=this.filter.value.target)||void 0===i?void 0:i.id,null===(n=this.filter.value.type)||void 0===n?void 0:n.name,this.filter.value.unit,this.filter.value.cataTarget).subscribe(t=>{this.tasks=t,this.isLoadingResults=!1})},100)}pageUpdate(t){this.isLoadingResults=!0,setTimeout(()=>{var e,i,n;this.commandService.getCommandList(t.pageSize,t.pageIndex*t.pageSize,null===(e=this.filter.value.origin)||void 0===e?void 0:e.id,null===(i=this.filter.value.target)||void 0===i?void 0:i.id,null===(n=this.filter.value.type)||void 0===n?void 0:n.name,this.filter.value.unit,this.filter.value.cataTarget).subscribe(t=>{this.tasks=t,this.isLoadingResults=!1})},100)}delete(t,e){this.commandService.removeCommand(t.id),this.refresh(e)}exportWorkbench(){var t,e,i;this.commandService.exportWorkbench(null===(t=this.filter.value.origin)||void 0===t?void 0:t.id,null===(e=this.filter.value.target)||void 0===e?void 0:e.id,null===(i=this.filter.value.type)||void 0===i?void 0:i.name,this.filter.value.unit,this.filter.value.cataTarget).subscribe(t=>{this.clipboard.copy(t)})}deleteSelected(t){this.selection.selected.forEach(t=>{this.selection.deselect(t),this.commandService.removeCommand(t.id)}),this.refresh(t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(L.a),c.Ob(_.b),c.Ob(o.c),c.Ob(k.a),c.Ob(g.b),c.Ob(T.d))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-command-overview"]],viewQuery:function(t,e){var i;1&t&&c.Rc(p.a,!0),2&t&&c.wc(i=c.gc())&&(e.paginator=i.first)},decls:49,vars:18,consts:[[1,"row"],[1,"col-xl-10"],[3,"formGroup"],[1,"col-xl-3"],["formControlName","origin","label","Herkunft",3,"showClear"],["formControlName","target","label","Ziel",3,"showClear"],["class","col-xl-1",4,"ngIf"],[1,"col-xl-1"],[1,"w-100"],["formControlName","unit"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["formControlName","cataTarget"],["class","img-fluid",3,"src",4,"ngIf"],["value","///DEFAULT///"],[1,"col-xl-2","flex-between"],[1,"flex-between"],["matTooltip","Gesendete Befehle entfernen",3,"formControl"],["mat-icon-button","","matTooltip","Ausgew\xe4hlte l\xf6schen.",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Ausgew\xe4hlte bearbeiten.",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Als Workbench Plan exportieren.",3,"click"],["mat-icon-button","","matTooltip","Refresh.",3,"click"],[1,"overview-container"],["class","loading-shade",4,"ngIf"],[4,"ngIf"],["class","table-container",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],["paginator",""],["formControlName","type"],[1,"img-fluid",3,"src"],[3,"value"],["mat-icon-button","","matTooltip","Ausgew\xe4hlte l\xf6schen.",3,"click"],["mat-icon-button","","matTooltip","Ausgew\xe4hlte bearbeiten.",3,"click"],[1,"loading-shade"],[1,"table-container"],["mat-table","","multiTemplateDataRows","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","from"],["matColumnDef","to"],["matColumnDef","commandType"],["matColumnDef","unit"],["matColumnDef","sendTime"],["matColumnDef","arrivalTime"],["matColumnDef","remainingDelay"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],[2,"color","red"],[1,"example-element-detail","centerflex"],[1,"example-element-description"],["target","_blank",3,"href"],["mat-raised-button","","color","primary"],["mat-raised-button","","color","primary",1,"ml-2",3,"click"],["mat-raised-button","","color","warn",1,"ml-2",3,"click"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(t,e){if(1&t){const t=c.Vb();c.Ub(0,"div",0),c.Ub(1,"div",1),c.Ub(2,"form",2),c.Ub(3,"div",0),c.Ub(4,"div",3),c.Pb(5,"app-village-input",4),c.Tb(),c.Ub(6,"div",3),c.Pb(7,"app-village-input",5),c.Tb(),c.Jc(8,nt,10,2,"div",6),c.Ub(9,"div",7),c.Ub(10,"mat-form-field",8),c.Ub(11,"mat-label"),c.Lc(12,"Einheit"),c.Tb(),c.Ub(13,"mat-select",9),c.Ub(14,"mat-select-trigger"),c.Jc(15,ot,1,1,"app-unit-render",10),c.Tb(),c.Ub(16,"mat-option"),c.Lc(17," Alle "),c.Tb(),c.Jc(18,at,2,2,"mat-option",11),c.Tb(),c.Tb(),c.Tb(),c.Ub(19,"div",7),c.Ub(20,"mat-form-field",8),c.Ub(21,"mat-label"),c.Lc(22,"Kata Ziel"),c.Tb(),c.Ub(23,"mat-select",12),c.Ub(24,"mat-select-trigger"),c.Jc(25,st,1,1,"img",13),c.Tb(),c.Ub(26,"mat-option"),c.Lc(27,"Alle"),c.Tb(),c.Ub(28,"mat-option",14),c.Lc(29,"Default"),c.Tb(),c.Jc(30,ct,2,2,"mat-option",11),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(31,"div",15),c.Pb(32,"span"),c.Ub(33,"div",16),c.Pb(34,"mat-slide-toggle",17),c.Jc(35,bt,3,0,"button",18),c.Jc(36,lt,3,0,"button",19),c.Ub(37,"button",20),c.fc("click",(function(){return e.exportWorkbench()})),c.Ub(38,"mat-icon"),c.Lc(39,"import_export"),c.Tb(),c.Tb(),c.Ub(40,"button",21),c.fc("click",(function(){c.Ac(t);const i=c.xc(48);return e.refresh(i)})),c.Ub(41,"mat-icon"),c.Lc(42,"refresh"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(43,"div",22),c.Jc(44,mt,2,1,"div",23),c.Jc(45,dt,2,0,"ng-container",24),c.Jc(46,Rt,31,5,"div",25),c.Ub(47,"mat-paginator",26,27),c.fc("page",(function(t){return e.pageUpdate(t)})),c.Tb(),c.Tb()}2&t&&(c.Bb(2),c.pc("formGroup",e.filter),c.Bb(3),c.pc("showClear",!0),c.Bb(2),c.pc("showClear",!0),c.Bb(1),c.pc("ngIf",(null==e.usedTypes?null:e.usedTypes.length)>0),c.Bb(7),c.pc("ngIf",e.filter.value.unit),c.Bb(3),c.pc("ngForOf",e.units),c.Bb(7),c.pc("ngIf",e.filter.value.cataTarget),c.Bb(5),c.pc("ngForOf",e.buildings),c.Bb(4),c.pc("formControl",e.removeControl),c.Bb(1),c.pc("ngIf",e.selection.hasValue()),c.Bb(1),c.pc("ngIf",e.selection.hasValue()),c.Bb(8),c.pc("ngIf",e.isLoadingResults),c.Bb(1),c.pc("ngIf",!e.isLoadingResults&&e.tasks&&0===e.tasks.tasks.length),c.Bb(1),c.pc("ngIf",e.isLoadingResults||e.tasks&&e.tasks.tasks.length>0),c.Bb(1),c.pc("length",e.tasks.count)("pageSize",10)("pageSizeOptions",c.sc(17,jt)))},directives:[T.x,T.p,T.i,w.a,T.o,T.g,n.m,F.b,F.f,x.a,x.c,P.n,n.l,Y.a,G.a,T.f,C.a,Z.a,p.a,S.a,W.b,q.j,q.c,q.e,q.b,q.g,q.i,q.d,K.a,q.a,Q.a,X.a,q.f,q.h],pipes:[tt.a],styles:["table[_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{padding:2px!important}.overview-container[_ngcontent-%COMP%]{position:relative;min-height:200px}.table-container[_ngcontent-%COMP%]{position:relative;overflow:auto}.loading-shade[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:56px;right:0;background:rgba(0,0,0,.15);z-index:1;display:flex;align-items:center;justify-content:center}tr.example-detail-row[_ngcontent-%COMP%]{height:0}.centerflex[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active, tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#636363}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex;justify-content:space-between}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}"],data:{animation:[Object(f.o)("detailExpand",[Object(f.l)("collapsed",Object(f.m)({height:"0px",minHeight:"0"})),Object(f.l)("expanded",Object(f.m)({height:"*"})),Object(f.n)("expanded <=> collapsed",Object(f.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();var $t=i("cJCv");let Et=(()=>{class t{constructor(t){this.command=t,this.control=new T.e("",T.v.required)}ngOnInit(){}submit(t){this.control.disable(),this.command.simpleTimer(t),setTimeout(()=>{this.control.enable()},2e3)}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(L.a))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-command-simple-timer"]],decls:12,vars:2,consts:[[1,"form-group","row"],["for","time",1,"label","col-sm-1","col-form-label"],[1,"col-sm-11"],[1,"example-full-width"],["autocomplete","off","autocapitalize","off","spellcheck","false","id","time","matInput","","placeholder","Zeit",1,"example-full-width",3,"formControl"],[1,"offset-sm-1","col-sm-11"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(c.Ub(0,"div",0),c.Ub(1,"label",1),c.Lc(2,"Zeit"),c.Tb(),c.Ub(3,"div",2),c.Ub(4,"mat-form-field",3),c.Pb(5,"input",4),c.Ub(6,"mat-hint"),c.Lc(7,"z.B. heute um 12:28:22:500"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(8,"div",0),c.Ub(9,"div",5),c.Ub(10,"button",6),c.fc("click",(function(){return e.submit(e.control.value)})),c.Lc(11," Timen "),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.Bb(5),c.pc("formControl",e.control),c.Bb(5),c.pc("disabled",e.control.invalid||e.control.disabled))},directives:[F.b,y.b,T.c,T.o,T.f,F.e,C.a],styles:[""]}),t})();var Nt=i("pLZG"),Vt=i("lJxs"),zt=i("BTe0"),Ht=i("MutI");function _t(t,e){if(1&t&&(c.Ub(0,"div",14),c.Ub(1,"div",2),c.Pb(2,"mat-progress-bar",15),c.Tb(),c.Tb()),2&t){const t=c.jc(2);c.Bb(2),c.pc("value",t.progress)}}function Yt(t,e){if(1&t&&(c.Ub(0,"mat-list-item"),c.Ub(1,"small"),c.Lc(2),c.Tb(),c.Ub(3,"span",17),c.Lc(4),c.Tb(),c.Tb()),2&t){const t=e.$implicit;c.Bb(2),c.Nc("",t.line," "),c.Bb(2),c.Nc(" ",t.error,"")}}function Gt(t,e){if(1&t&&(c.Ub(0,"div"),c.Ub(1,"p"),c.Lc(2),c.Tb(),c.Ub(3,"mat-list"),c.Jc(4,Yt,5,2,"mat-list-item",16),c.Tb(),c.Tb()),2&t){const t=c.jc(3);c.Bb(2),c.Nc("",t.result.error," Tasks konnten nicht importiert werden."),c.Bb(2),c.pc("ngForOf",t.result.errors)}}function Zt(t,e){if(1&t&&(c.Ub(0,"div",14),c.Ub(1,"div",2),c.Ub(2,"h1"),c.Lc(3,"Import abgeschlossen."),c.Tb(),c.Ub(4,"p"),c.Lc(5),c.Tb(),c.Jc(6,Gt,5,2,"div",7),c.Tb(),c.Tb()),2&t){const t=c.jc(2);c.Bb(5),c.Oc("",t.result.success," von ",t.result.tasks," Tasks erfolgreich importiert."),c.Bb(1),c.pc("ngIf",t.result.error>0)}}function Wt(t,e){if(1&t&&(c.Ub(0,"mat-card",12),c.Ub(1,"mat-card-content"),c.Jc(2,_t,3,1,"div",13),c.Jc(3,Zt,7,3,"div",13),c.Tb(),c.Tb()),2&t){const t=c.jc();c.Bb(2),c.pc("ngIf",t.importing),c.Bb(1),c.pc("ngIf",t.result)}}function qt(t,e){if(1&t&&c.Pb(0,"img",20),2&t){const t=c.jc(2);c.pc("src",t.imagebase+"buildings/"+t.catapultControl.value+".png",c.Cc)}}function Kt(t,e){if(1&t&&(c.Ub(0,"mat-select-trigger"),c.Ub(1,"div",18),c.Ub(2,"span"),c.Lc(3),c.kc(4,"titlecase"),c.Tb(),c.Jc(5,qt,1,1,"img",19),c.Tb(),c.Tb()),2&t){const t=c.jc();c.Bb(3),c.Mc(c.lc(4,2,t.catapultControl.value)),c.Bb(2),c.pc("ngIf",t.imagebase)}}function Qt(t,e){if(1&t&&c.Pb(0,"img",20),2&t){const t=c.jc().$implicit,e=c.jc();c.pc("src",e.imagebase+"buildings/"+t+".png",c.Cc)}}function Xt(t,e){if(1&t&&(c.Ub(0,"mat-option",21),c.Ub(1,"div",18),c.Ub(2,"span"),c.Lc(3),c.kc(4,"titlecase"),c.Tb(),c.Jc(5,Qt,1,1,"img",19),c.Tb(),c.Tb()),2&t){const t=e.$implicit,i=c.jc();c.pc("value",t),c.Bb(3),c.Mc(c.lc(4,3,t)),c.Bb(2),c.pc("ngIf",i.imagebase)}}function te(t,e){if(1&t&&(c.Ub(0,"mat-form-field"),c.Ub(1,"mat-label"),c.Lc(2,"MS"),c.Tb(),c.Pb(3,"input",22),c.Tb()),2&t){const t=c.jc();c.Bb(3),c.pc("formControl",t.msForm)}}const ee=[{path:"",component:d,children:[{path:"schedule",component:$t.a},{path:"timer",component:Et},{path:"import",component:(()=>{class t{constructor(t,e,i){this.command=t,this.web=e,this.toastr=i,this.unsub$=new a.b,this.importing=!1,this.progress=0,this.control=new T.e("",T.v.required),this.catapultControl=new T.e("///DEFAULT///",T.v.required),this.buildings=[],this.showMS=new T.e(!1),this.msForm=new T.e(0)}ngOnInit(){this.web.info().subscribe(t=>{this.imagebase=t.imageBase,this.buildings=t.buildings}),this.command.importWorkbenchStart().subscribe(t=>{t===this.id&&(this.importing=!0)}),this.command.importWorkbenchProgress().pipe(Object(Nt.a)(t=>t.id===this.id),Object(Vt.a)(t=>t.percentage)).subscribe(t=>{this.progress=t}),this.command.importWorkbenchFinish().pipe(Object(Nt.a)(t=>t.id===this.id)).subscribe(t=>{this.toastr.success("Import abgeschlossen.",void 0,{timeOut:7e3}),this.importing=!1,this.result=t})}submit(t,e){this.control.disable(),this.id=this.command.importWorkbench(t,e,!0===this.showMS.value?this.msForm.value:void 0),setTimeout(()=>{this.control.enable()},2e3)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(c.Ob(L.a),c.Ob(k.a),c.Ob(B.b))},t.\u0275cmp=c.Ib({type:t,selectors:[["app-command-import-wb"]],decls:28,vars:8,consts:[["class","mat-elevation-z6",4,"ngIf"],[1,"form-group","row"],[1,"col-xl-12"],[1,"full-width"],["rows","10","id","plan","matInput","","placeholder","Plan",1,"example-full-width",3,"formControl"],[1,"col-md-3"],[3,"formControl"],[4,"ngIf"],["value","///DEFAULT///"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm-11"],["type","submit","mat-raised-button","","color","primary",3,"disabled","click"],[1,"mat-elevation-z6"],["class","row",4,"ngIf"],[1,"row"],[2,"height","20px","border-radius","3px",3,"value"],[4,"ngFor","ngForOf"],[2,"color","red"],[1,"flex-between"],["matSuffix","","class","img-fluid",3,"src",4,"ngIf"],["matSuffix","",1,"img-fluid",3,"src"],[3,"value"],["matInput","","type","number","min","0","max","999",3,"formControl"]],template:function(t,e){1&t&&(c.Jc(0,Wt,4,2,"mat-card",0),c.Ub(1,"mat-card-content"),c.Ub(2,"div",1),c.Ub(3,"div",2),c.Ub(4,"mat-form-field",3),c.Pb(5,"textarea",4),c.Ub(6,"mat-hint"),c.Lc(7,"Befehle in der \xdcbersicht ausw\xe4hlen und mit STRG+C kopieren."),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Ub(8,"div",1),c.Ub(9,"div",5),c.Ub(10,"mat-form-field"),c.Ub(11,"mat-label"),c.Lc(12,"Katapult Ziel"),c.Tb(),c.Ub(13,"mat-select",6),c.Jc(14,Kt,6,4,"mat-select-trigger",7),c.Ub(15,"mat-option",8),c.Lc(16,"Default"),c.Tb(),c.Jc(17,Xt,6,5,"mat-option",9),c.Tb(),c.Tb(),c.Tb(),c.Ub(18,"div",5),c.Ub(19,"div"),c.Ub(20,"mat-checkbox",6),c.Lc(21,"MS \xfcberschreiben."),c.Tb(),c.Tb(),c.Ub(22,"div"),c.Jc(23,te,4,1,"mat-form-field",7),c.Tb(),c.Tb(),c.Tb(),c.Ub(24,"div",1),c.Ub(25,"div",10),c.Ub(26,"button",11),c.fc("click",(function(){return e.submit(e.control.value,e.catapultControl.value)})),c.Lc(27," Importieren "),c.Tb(),c.Tb(),c.Tb(),c.Tb()),2&t&&(c.pc("ngIf",e.importing||e.result),c.Bb(5),c.pc("formControl",e.control),c.Bb(8),c.pc("formControl",e.catapultControl),c.Bb(1),c.pc("ngIf","///DEFAULT///"!==e.catapultControl.value),c.Bb(3),c.pc("ngForOf",e.buildings),c.Bb(3),c.pc("formControl",e.showMS),c.Bb(3),c.pc("ngIf",!0===e.showMS.value),c.Bb(3),c.pc("disabled",e.control.invalid||e.control.disabled))},directives:[n.m,l.c,F.b,y.b,T.c,T.o,T.f,F.e,F.f,x.a,P.n,n.l,K.a,C.a,l.a,zt.a,Ht.a,Ht.b,x.c,F.g,T.s],pipes:[n.v],styles:[".full-width[_ngcontent-%COMP%]{width:100%}mat-divider[_ngcontent-%COMP%]{margin-bottom:15px}"]}),t})()},{path:"edit/:id",component:j},{path:"",pathMatch:"full",component:Jt}]}];let ie=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[o.f.forChild(ee)],o.f]}),t})();i("8LU1"),i("R1ws"),i("u47x");let ne=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},imports:[[P.t,P.k],P.k]}),t})();var oe=i("BLWB"),ae=i("1yaQ"),se=i("40+f"),ce=i("f0Cb"),be=i("o4Yh");let le=(()=>{class t{}return t.\u0275mod=c.Mb({type:t}),t.\u0275inj=c.Lb({factory:function(e){return new(e||t)},providers:[{provide:P.f,useValue:"de-DE"}],imports:[[n.c,ie,b.c,l.f,y.c,C.b,x.b,ne,T.t,p.b,q.l,oe.a,Z.b,O.c,ae.a,W.a,G.b,zt.b,se.a,ce.a,Ht.c,K.b,Y.b,g.f,be.b]]}),t})()}}]);