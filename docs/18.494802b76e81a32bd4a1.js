(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{MjV7:function(t,e,i){"use strict";i.r(e),i.d(e,"FarmModule",(function(){return St}));var a=i("ofXK"),n=i("tyNb"),r=i("XNiG"),s=i("1G5W"),b=i("fXoL"),o=i("M9ds");const l=function(t){return[t]};function c(t,e){if(1&t){const t=b.Vb();b.Ub(0,"span",2),b.fc("click",(function(){b.Ac(t);const i=e.$implicit;return b.jc().activeLink=i})),b.Lc(1),b.Tb()}if(2&t){const t=e.$implicit,i=b.jc();b.pc("active",i.activeLink===t)("routerLink",b.tc(3,l,t.link)),b.Bb(1),b.Nc(" ",t.title," ")}}let m=(()=>{class t{constructor(t){this.router=t,this.links=[{title:"Assistent",link:"/farm"},{title:"Routen",link:"/farm/routes"}],this.activeLink=this.links[0],this.unsub$=new r.b}ngOnInit(){this.setActive(),this.router.events.pipe(Object(s.a)(this.unsub$)).subscribe(t=>{this.setActive()})}setActive(){for(const t of this.links)this.router.isActive(t.link,!1)&&(this.activeLink=t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(n.c))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-farm"]],decls:3,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(t,e){1&t&&(b.Ub(0,"nav",0),b.Jc(1,c,2,5,"span",1),b.Tb(),b.Pb(2,"router-outlet")),2&t&&(b.Bb(1),b.pc("ngForOf",e.links))},directives:[o.b,a.l,n.g,o.a,n.d],styles:[""]}),t})();var u=i("iELJ"),d=i("3Pt+"),f=i("dXaO"),p=i("Q2Ze"),h=i("ZTz/"),v=i("FKr1"),g=i("mPVK"),T=i("NFeN"),U=i("ZFy/"),w=i("TIdL"),x=i("bTqV");let k=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.fb=e,this.farm=i,this.form=this.fb.group({farmGroup:"A",units:{},timerInterval:30,maxDistance:20}),this.nonFarmUnits=["militia","ram","catapult","snob"]}ngOnInit(){}submit(t){this.form.disable(),this.farm.addEntity(t.farmGroup,t.units,t.timerInterval,t.maxDistance).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(u.g),b.Ob(d.d),b.Ob(f.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-farm-task-add"]],decls:38,vars:3,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"w-100"],["formControlName","farmGroup"],["value","A"],["value","B"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],["for","maxDistance"],["id","maxDistance","formControlName","maxDistance","min","1","max","100","thumbLabel","true",1,"w-100"],["matTooltip","Leer lassen um Gruppe nicht zu \xe4ndern."],["formControlName","units",3,"excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"form",2),b.fc("ngSubmit",(function(){return e.submit(e.form.value)})),b.Ub(3,"div",3),b.Ub(4,"div",1),b.Ub(5,"mat-form-field",4),b.Ub(6,"mat-label"),b.Lc(7,"Gruppe"),b.Tb(),b.Ub(8,"mat-select",5),b.Ub(9,"mat-option",6),b.Lc(10,"A"),b.Tb(),b.Ub(11,"mat-option",7),b.Lc(12,"B"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(13,"div",3),b.Ub(14,"div",8),b.Ub(15,"label",9),b.Lc(16,"Interval (Minuten)"),b.Tb(),b.Tb(),b.Ub(17,"div",10),b.Pb(18,"mat-slider",11),b.Tb(),b.Tb(),b.Ub(19,"div",3),b.Ub(20,"div",8),b.Ub(21,"label",12),b.Lc(22,"Max Entfernung"),b.Tb(),b.Tb(),b.Ub(23,"div",10),b.Pb(24,"mat-slider",13),b.Tb(),b.Tb(),b.Ub(25,"div",3),b.Ub(26,"div",8),b.Ub(27,"label",12),b.Lc(28,"Einheiten "),b.Ub(29,"mat-icon",14),b.Lc(30,"info"),b.Tb(),b.Tb(),b.Tb(),b.Ub(31,"div",10),b.Pb(32,"app-units-holder-input",15),b.Tb(),b.Tb(),b.Ub(33,"div",3),b.Ub(34,"div",16),b.Pb(35,"span"),b.Ub(36,"button",17),b.Lc(37," Hinzuf\xfcgen "),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&t&&(b.Bb(2),b.pc("formGroup",e.form),b.Bb(30),b.pc("excludeUnits",e.nonFarmUnits),b.Bb(4),b.pc("disabled",!e.form.valid||e.form.disabled))},directives:[d.x,d.p,d.i,p.b,p.f,h.a,d.o,d.g,v.n,g.a,T.a,U.a,w.a,x.a],styles:[""]}),t})();var C=i("7Ixi"),L=i("e6WT"),I=i("OaSA"),R=i("irRR");function D(t,e){1&t&&(b.Ub(0,"th",33),b.Lc(1,"Dorf"),b.Tb())}function y(t,e){if(1&t&&(b.Ub(0,"td",34),b.Pb(1,"app-village-render",35),b.Tb()),2&t){const t=e.$implicit;b.Bb(1),b.pc("value",t)}}function P(t,e){1&t&&b.Pb(0,"th",33)}function B(t,e){if(1&t){const t=b.Vb();b.Ub(0,"td",34),b.Ub(1,"button",36),b.fc("click",(function(){b.Ac(t);const i=e.$implicit;return b.jc(2).removeVillage(i.id)})),b.Ub(2,"mat-icon"),b.Lc(3,"delete"),b.Tb(),b.Tb(),b.Tb()}}function O(t,e){1&t&&b.Pb(0,"tr",37)}function J(t,e){1&t&&b.Pb(0,"tr",38)}function S(t,e){if(1&t&&(b.Ub(0,"div",25),b.Ub(1,"table",26),b.Sb(2,27),b.Jc(3,D,2,0,"th",28),b.Jc(4,y,2,1,"td",29),b.Rb(),b.Sb(5,30),b.Jc(6,P,1,0,"th",28),b.Jc(7,B,4,0,"td",29),b.Rb(),b.Jc(8,O,1,0,"tr",31),b.Jc(9,J,1,0,"tr",32),b.Tb(),b.Tb()),2&t){const t=b.jc();b.Bb(1),b.pc("dataSource",t.data.villages),b.Bb(7),b.pc("matHeaderRowDef",t.displayedColumns),b.Bb(1),b.pc("matRowDefColumns",t.displayedColumns)}}let $=(()=>{class t{constructor(t,e,i,a){this.data=t,this.dialogRef=e,this.fb=i,this.farm=a,this.unsub$=new r.b,this.form=this.fb.group({farmGroup:"A",units:{},timerInterval:30,maxDistance:20}),this.villageForm=new d.e("",d.v.required),this.massVillageForm=new d.e("",d.v.required),this.nonFarmUnits=["militia","ram","catapult","snob"],this.displayedColumns=["village","delete"],this.form.setValue({farmGroup:t.farmGroup,units:t.units,timerInterval:t.timerInterval,maxDistance:t.maxDistance})}ngOnInit(){this.farm.villageAddEvent(this.unsub$).subscribe(t=>{t.id===this.data.id&&(this.data.villages=[...this.data.villages,...t.villages])}),this.farm.villageRemoveEvent(this.unsub$).subscribe(t=>{t.id===this.data.id&&(this.data.villages=this.data.villages.filter(e=>!t.villages.includes(e.id)))})}massAdd(){this.farm.massAddVillage(this.data.id,this.massVillageForm.value)}massRemove(){this.farm.massRemoveVillage(this.data.id,this.massVillageForm.value)}addVillage(){this.farm.addVillage(this.data.id,this.villageForm.value.id)}removeVillage(t){this.farm.removeVillage(this.data.id,t)}submit(t){this.form.disable(),this.farm.editEntity(this.data.id,t.farmGroup,t.units,t.timerInterval,t.maxDistance).subscribe(t=>{this.dialogRef.close(t)})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(u.a),b.Ob(u.g),b.Ob(d.d),b.Ob(f.a))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-farm-task-edit"]],decls:56,vars:10,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"w-100"],["formControlName","farmGroup"],["value","A"],["value","B"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],["for","maxDistance"],["id","maxDistance","formControlName","maxDistance","min","1","max","100","thumbLabel","true",1,"w-100"],["matTooltip","Leer lassen um Gruppe nicht zu \xe4ndern."],["formControlName","units",3,"excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"col-xl-6"],[1,"col-md-9"],[3,"formControl","onlyOwn"],["mat-raised-button","","color","primary",3,"disabled","click"],["placeholder","Massen Hinzuf\xfcgen/Entfernen","matInput","",3,"formControl"],["mat-raised-button","","color","primary",1,"mt-1",3,"disabled","click"],["class","col-xl-6 list",4,"ngIf"],[1,"col-xl-6","list"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","village"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["type","button","mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"form",2),b.fc("ngSubmit",(function(){return e.submit(e.form.value)})),b.Ub(3,"div",3),b.Ub(4,"div",1),b.Ub(5,"mat-form-field",4),b.Ub(6,"mat-label"),b.Lc(7,"Gruppe"),b.Tb(),b.Ub(8,"mat-select",5),b.Ub(9,"mat-option",6),b.Lc(10,"A"),b.Tb(),b.Ub(11,"mat-option",7),b.Lc(12,"B"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(13,"div",3),b.Ub(14,"div",8),b.Ub(15,"label",9),b.Lc(16,"Interval (Minuten)"),b.Tb(),b.Tb(),b.Ub(17,"div",10),b.Pb(18,"mat-slider",11),b.Tb(),b.Tb(),b.Ub(19,"div",3),b.Ub(20,"div",8),b.Ub(21,"label",12),b.Lc(22,"Max Entfernung"),b.Tb(),b.Tb(),b.Ub(23,"div",10),b.Pb(24,"mat-slider",13),b.Tb(),b.Tb(),b.Ub(25,"div",3),b.Ub(26,"div",8),b.Ub(27,"label",12),b.Lc(28,"Einheiten "),b.Ub(29,"mat-icon",14),b.Lc(30,"info"),b.Tb(),b.Tb(),b.Tb(),b.Ub(31,"div",10),b.Pb(32,"app-units-holder-input",15),b.Tb(),b.Tb(),b.Ub(33,"div",3),b.Ub(34,"div",16),b.Pb(35,"span"),b.Ub(36,"button",17),b.Lc(37," Bearbeiten "),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(38,"div",0),b.Ub(39,"div",18),b.Ub(40,"div",0),b.Ub(41,"div",19),b.Pb(42,"app-village-input",20),b.Tb(),b.Ub(43,"div",8),b.Ub(44,"button",21),b.fc("click",(function(){return e.addVillage()})),b.Lc(45," Dorf hinzuf\xfcgen. "),b.Tb(),b.Tb(),b.Tb(),b.Ub(46,"div",0),b.Ub(47,"div",19),b.Pb(48,"textarea",22),b.Tb(),b.Ub(49,"div",8),b.Ub(50,"button",21),b.fc("click",(function(){return e.massAdd()})),b.Lc(51," D\xf6rfer hinzuf\xfcgen. "),b.Tb(),b.Pb(52,"br"),b.Ub(53,"button",23),b.fc("click",(function(){return e.massRemove()})),b.Lc(54," D\xf6rfer entfernen. "),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Jc(55,S,10,3,"div",24),b.Tb()),2&t&&(b.Bb(2),b.pc("formGroup",e.form),b.Bb(30),b.pc("excludeUnits",e.nonFarmUnits),b.Bb(4),b.pc("disabled",!e.form.valid||e.form.disabled),b.Bb(6),b.pc("formControl",e.villageForm)("onlyOwn",!0),b.Bb(2),b.pc("disabled",e.villageForm.disabled||e.villageForm.invalid),b.Bb(4),b.pc("formControl",e.massVillageForm),b.Bb(2),b.pc("disabled",e.massVillageForm.disabled||e.massVillageForm.invalid),b.Bb(3),b.pc("disabled",e.massVillageForm.disabled||e.massVillageForm.invalid),b.Bb(2),b.pc("ngIf",e.data.villages.length>0))},directives:[d.x,d.p,d.i,p.b,p.f,h.a,d.o,d.g,v.n,g.a,T.a,U.a,w.a,x.a,C.a,d.f,L.b,d.c,a.m,I.j,I.c,I.e,I.b,I.g,I.i,I.d,I.a,R.a,I.f,I.h],styles:[".list[_ngcontent-%COMP%]{overflow-y:scroll;max-height:50%}"]}),t})();var F=i("PDjf"),E=i("jMqV"),V=i("hC39");function j(t,e){1&t&&b.Pb(0,"th",19)}function A(t,e){if(1&t&&(b.Ub(0,"td",20),b.Pb(1,"mat-slide-toggle",3),b.Tb()),2&t){const t=e.$implicit,i=b.jc(2);b.Bb(1),b.pc("formControl",i.slides[t.id])}}function N(t,e){1&t&&(b.Ub(0,"th",19),b.Lc(1,"Interval"),b.Tb())}function M(t,e){if(1&t&&(b.Ub(0,"td",20),b.Lc(1),b.Tb()),2&t){const t=e.$implicit;b.Bb(1),b.Nc(" ",t.timerInterval," Minuten ")}}function G(t,e){1&t&&(b.Ub(0,"th",19),b.Lc(1,"Max Entfernung"),b.Tb())}function H(t,e){if(1&t&&(b.Ub(0,"td",20),b.Lc(1),b.Tb()),2&t){const t=e.$implicit;b.Bb(1),b.Nc(" ",t.maxDistance," Felder ")}}function q(t,e){1&t&&(b.Ub(0,"th",19),b.Lc(1,"D\xf6rfer"),b.Tb())}function z(t,e){if(1&t&&(b.Ub(0,"td",20),b.Lc(1),b.Tb()),2&t){const t=e.$implicit;b.Bb(1),b.Nc(" ",t.villages.length," ")}}function Z(t,e){1&t&&(b.Ub(0,"th",19),b.Lc(1,"Einheiten"),b.Tb())}function K(t,e){if(1&t&&(b.Ub(0,"td",20),b.Lc(1),b.Pb(2,"app-units-render-min",21),b.Tb()),2&t){const t=e.$implicit;b.Bb(1),b.Nc(" Gruppe ",t.farmGroup,": "),b.Bb(1),b.pc("value",t.units)}}function _(t,e){if(1&t){const t=b.Vb();b.Ub(0,"th",19),b.Ub(1,"button",22),b.fc("click",(function(){return b.Ac(t),b.jc(2).add()})),b.Ub(2,"mat-icon"),b.Lc(3,"add"),b.Tb(),b.Tb(),b.Tb()}}function X(t,e){if(1&t){const t=b.Vb();b.Ub(0,"td",20),b.Ub(1,"button",23),b.fc("click",(function(){b.Ac(t);const i=e.$implicit;return b.jc(2).edit(i)})),b.Ub(2,"mat-icon"),b.Lc(3,"edit"),b.Tb(),b.Tb(),b.Ub(4,"button",24),b.fc("click",(function(){b.Ac(t);const i=e.$implicit;return b.jc(2).delete(i.id)})),b.Ub(5,"mat-icon"),b.Lc(6,"delete"),b.Tb(),b.Tb(),b.Tb()}}function W(t,e){1&t&&b.Pb(0,"tr",25)}function Q(t,e){1&t&&b.Pb(0,"tr",26)}function Y(t,e){if(1&t&&(b.Ub(0,"table",8),b.Sb(1,9),b.Jc(2,j,1,0,"th",10),b.Jc(3,A,2,1,"td",11),b.Rb(),b.Sb(4,12),b.Jc(5,N,2,0,"th",10),b.Jc(6,M,2,1,"td",11),b.Rb(),b.Sb(7,13),b.Jc(8,G,2,0,"th",10),b.Jc(9,H,2,1,"td",11),b.Rb(),b.Sb(10,14),b.Jc(11,q,2,0,"th",10),b.Jc(12,z,2,1,"td",11),b.Rb(),b.Sb(13,15),b.Jc(14,Z,2,0,"th",10),b.Jc(15,K,3,2,"td",11),b.Rb(),b.Sb(16,16),b.Jc(17,_,4,0,"th",10),b.Jc(18,X,7,0,"td",11),b.Rb(),b.Jc(19,W,1,0,"tr",17),b.Jc(20,Q,1,0,"tr",18),b.Tb()),2&t){const t=b.jc();b.pc("dataSource",t.tasks),b.Bb(19),b.pc("matHeaderRowDef",t.displayedColumns),b.Bb(1),b.pc("matRowDefColumns",t.displayedColumns)}}function tt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",0),b.Ub(1,"div",27),b.Pb(2,"span"),b.Ub(3,"span",28),b.Lc(4," Keine Tasks vorhanden."),b.Pb(5,"br"),b.Ub(6,"button",29),b.fc("click",(function(){return b.Ac(t),b.jc().add()})),b.Lc(7," Hinzuf\xfcgen. "),b.Tb(),b.Tb(),b.Pb(8,"span"),b.Tb(),b.Tb()}}let et=(()=>{class t{constructor(t,e){this.farm=t,this.dialog=e,this.unsub$=new r.b,this.slide=new d.e,this.max=new d.e,this.slides={},this.displayedColumns=["toggle","interval","maxDistance","villages","units","control"]}ngOnInit(){this.farm.list(this.unsub$).subscribe(t=>{this.tasks=t;for(const e of t)this.slides[e.id]=new d.e(e.enabled),this.slides[e.id].valueChanges.subscribe(t=>{this.farm.setTaskEnabled(e.id,t).subscribe()})}),this.farm.config(this.unsub$).subscribe(t=>{this.slide.setValue(t.enabled,{emitEvent:!1}),this.max.setValue(t.maxIncsPerVillage,{emitEvent:!1})}),this.slide.valueChanges.subscribe(t=>{this.farm.setEnabled(t)}),this.max.valueChanges.subscribe(t=>{this.farm.setMaxIncs(t)})}add(){this.dialog.open(k).afterClosed().subscribe(t=>{void 0!==t&&(this.tasks=[...this.tasks,t],this.slides[t.id]=new d.e(t.enabled),this.slides[t.id].valueChanges.subscribe(e=>{this.farm.setTaskEnabled(t.id,e).subscribe()}),this.dialog.open($,{data:t}))})}delete(t){this.farm.deleteEntity(t).subscribe(t=>{this.tasks=this.tasks.filter(e=>e.id!==t)})}edit(t){this.dialog.open($,{data:t}).afterClosed().subscribe(e=>{void 0!==e&&(this.tasks=this.tasks.map(i=>i.id===t.id?e:i))})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(f.a),b.Ob(u.b))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-farm-overview"]],decls:12,vars:4,consts:[[1,"row"],[1,"col-xl-12"],[1,"mb-3"],[3,"formControl"],[1,"ml-3"],["matInput","","type","number",3,"formControl"],["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["class","row",4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","toggle"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","interval"],["matColumnDef","maxDistance"],["matColumnDef","villages"],["matColumnDef","units"],["matColumnDef","control"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"mat-card",2),b.Pb(3,"mat-slide-toggle",3),b.Ub(4,"mat-form-field",4),b.Ub(5,"mat-label"),b.Lc(6,"Max Angriffe"),b.Tb(),b.Pb(7,"input",5),b.Ub(8,"mat-hint"),b.Lc(9,"Maximale Anzahl an Angriffen pro Babarendorf."),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Jc(10,Y,21,3,"table",6),b.Jc(11,tt,9,0,"div",7)),2&t&&(b.Bb(3),b.pc("formControl",e.slide),b.Bb(4),b.pc("formControl",e.max),b.Bb(3),b.pc("ngIf",e.tasks&&e.tasks.length>0),b.Bb(1),b.pc("ngIf",e.tasks&&0===e.tasks.length))},directives:[F.a,E.a,d.o,d.f,p.b,p.f,L.b,d.s,d.c,p.e,a.m,I.j,I.c,I.e,I.b,I.g,I.i,I.d,I.a,V.a,x.a,T.a,U.a,I.f,I.h],styles:[".mat-column-control[_ngcontent-%COMP%]{width:10%}.mat-column-toggle[_ngcontent-%COMP%]{width:7%}"]}),t})();var it=i("SxV6"),at=i("pLZG"),nt=i("lJxs");class rt{getName(){return"ListFarmRouteRequest"}}class st{constructor(t,e,i,a){this.source=t,this.target=e,this.troops=i,this.timerInterval=a}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.AddFarmRouteRequest"}}class bt{constructor(t){this.id=t}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.DeleteFarmRouteRequest"}}class ot{constructor(t,e,i,a,n){this.id=t,this.source=e,this.target=i,this.troops=a,this.timerInterval=n}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.EditFarmRouteRequest"}}class lt{constructor(t,e){this.id=t,this.enabled=e}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.FarmRouteSetEnabledRequest"}}var ct=i("7nMs");let mt=(()=>{class t{constructor(t){this.websocketService=t}list(t){return this.websocketService.observable("ListFarmRouteResponse",new rt).pipe(Object(s.a)(t))}addEntity(t,e,i,a){return this.websocketService.observable("AddFarmRouteResponse",new st(t,e,i,a)).pipe(Object(it.a)())}deleteEntity(t){return this.websocketService.observable("DeleteFarmRouteResponse",new bt(t)).pipe(Object(at.a)(e=>e.id===t),Object(it.a)(),Object(nt.a)(t=>t.id))}editEntity(t,e,i,a,n){return this.websocketService.observable("EditFarmRouteResponse",new ot(t,e,i,a,n)).pipe(Object(it.a)())}setTaskEnabled(t,e){return this.websocketService.observable("FarmRouteSetEnabledResponse",new lt(t,e)).pipe(Object(at.a)(e=>e.id===t),Object(it.a)())}}return t.\u0275fac=function(e){return new(e||t)(b.cc(ct.a))},t.\u0275prov=b.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ut=i("38Pe");let dt=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.fb=e,this.farm=i,this.form=this.fb.group({source:[void 0,d.v.required],target:[void 0,d.v.required],troops:{},timerInterval:[30,d.v.min(1)]})}ngOnInit(){}submit(t){this.form.disable(),this.farm.addEntity(t.source.id,t.target.id,t.troops,t.timerInterval).subscribe(t=>{console.log("got route from service:"),console.log(t),this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(u.g),b.Ob(d.d),b.Ob(mt))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-farm-route-add"]],decls:26,vars:2,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["label","Herkunft","formControlName","source"],["label","Ziel","formControlName","target"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],[1,"col-sm-2"],["formControlName","troops"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"form",2),b.fc("ngSubmit",(function(){return e.submit(e.form.value)})),b.Ub(3,"div",3),b.Ub(4,"div",1),b.Pb(5,"app-village-input",4),b.Tb(),b.Tb(),b.Ub(6,"div",3),b.Ub(7,"div",1),b.Pb(8,"app-village-input",5),b.Tb(),b.Tb(),b.Ub(9,"div",3),b.Ub(10,"div",6),b.Ub(11,"label",7),b.Lc(12,"Interval (Minuten)"),b.Tb(),b.Tb(),b.Ub(13,"div",8),b.Pb(14,"mat-slider",9),b.Tb(),b.Tb(),b.Ub(15,"div",3),b.Ub(16,"div",10),b.Ub(17,"label"),b.Lc(18," Einheiten "),b.Tb(),b.Tb(),b.Ub(19,"div",1),b.Pb(20,"app-units-input",11),b.Tb(),b.Tb(),b.Ub(21,"div",3),b.Ub(22,"div",12),b.Pb(23,"span"),b.Ub(24,"button",13),b.Lc(25," Hinzuf\xfcgen "),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&t&&(b.Bb(2),b.pc("formGroup",e.form),b.Bb(22),b.pc("disabled",!e.form.valid||e.form.disabled))},directives:[d.x,d.p,d.i,C.a,d.o,d.g,g.a,ut.a,x.a],styles:[""]}),t})(),ft=(()=>{class t{constructor(t,e,i,a){this.data=t,this.dialogRef=e,this.fb=i,this.farm=a,this.form=this.fb.group({source:[void 0,d.v.required],target:[void 0,d.v.required],troops:{},timerInterval:[30,d.v.min(1)]}),this.form.setValue({source:t.source,target:t.target,timerInterval:t.timerInterval,troops:t.troops})}ngOnInit(){}submit(t){this.form.disable(),this.farm.editEntity(this.data.id,t.source.id,t.target.id,t.troops,t.timerInterval).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(u.a),b.Ob(u.g),b.Ob(d.d),b.Ob(mt))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-farm-route-edit"]],decls:26,vars:2,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["label","Herkunft","formControlName","source"],["label","Ziel","formControlName","target"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],[1,"col-sm-2"],[1,"col-xl-10"],["formControlName","troops"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(b.Ub(0,"div",0),b.Ub(1,"div",1),b.Ub(2,"form",2),b.fc("ngSubmit",(function(){return e.submit(e.form.value)})),b.Ub(3,"div",3),b.Ub(4,"div",1),b.Pb(5,"app-village-input",4),b.Tb(),b.Tb(),b.Ub(6,"div",3),b.Ub(7,"div",1),b.Pb(8,"app-village-input",5),b.Tb(),b.Tb(),b.Ub(9,"div",3),b.Ub(10,"div",6),b.Ub(11,"label",7),b.Lc(12,"Interval (Minuten)"),b.Tb(),b.Tb(),b.Ub(13,"div",8),b.Pb(14,"mat-slider",9),b.Tb(),b.Tb(),b.Ub(15,"div",3),b.Ub(16,"div",10),b.Ub(17,"label"),b.Lc(18," Einheiten "),b.Tb(),b.Tb(),b.Ub(19,"div",11),b.Pb(20,"app-units-input",12),b.Tb(),b.Tb(),b.Ub(21,"div",3),b.Ub(22,"div",13),b.Pb(23,"span"),b.Ub(24,"button",14),b.Lc(25," Bearbeiten "),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb()),2&t&&(b.Bb(2),b.pc("formGroup",e.form),b.Bb(22),b.pc("disabled",!e.form.valid||e.form.disabled))},directives:[d.x,d.p,d.i,C.a,d.o,d.g,g.a,ut.a,x.a],styles:[""]}),t})();function pt(t,e){1&t&&b.Pb(0,"th",13)}function ht(t,e){if(1&t&&(b.Ub(0,"td",14),b.Pb(1,"mat-slide-toggle",15),b.Tb()),2&t){const t=e.$implicit,i=b.jc(2);b.Bb(1),b.pc("formControl",i.slides[t.id])}}function vt(t,e){1&t&&(b.Ub(0,"th",13),b.Lc(1,"Interval"),b.Tb())}function gt(t,e){if(1&t&&(b.Ub(0,"td",14),b.Lc(1),b.Tb()),2&t){const t=e.$implicit;b.Bb(1),b.Nc(" ",t.timerInterval," Minuten ")}}function Tt(t,e){1&t&&(b.Ub(0,"th",13),b.Lc(1,"Herkunft"),b.Tb())}function Ut(t,e){if(1&t&&(b.Ub(0,"td",14),b.Pb(1,"app-village-render",16),b.Tb()),2&t){const t=e.$implicit;b.Bb(1),b.pc("value",t.source)}}function wt(t,e){1&t&&(b.Ub(0,"th",13),b.Lc(1,"Ziel"),b.Tb())}function xt(t,e){if(1&t&&(b.Ub(0,"td",14),b.Pb(1,"app-village-render",16),b.Tb()),2&t){const t=e.$implicit;b.Bb(1),b.pc("value",t.target)}}function kt(t,e){1&t&&(b.Ub(0,"th",13),b.Lc(1,"Einheiten"),b.Tb())}function Ct(t,e){if(1&t&&(b.Ub(0,"td",14),b.Pb(1,"app-units-render-min",16),b.Tb()),2&t){const t=e.$implicit;b.Bb(1),b.pc("value",t.troops)}}function Lt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"th",13),b.Ub(1,"button",17),b.fc("click",(function(){return b.Ac(t),b.jc(2).add()})),b.Ub(2,"mat-icon"),b.Lc(3,"add"),b.Tb(),b.Tb(),b.Tb()}}function It(t,e){if(1&t){const t=b.Vb();b.Ub(0,"td",14),b.Ub(1,"button",18),b.fc("click",(function(){b.Ac(t);const i=e.$implicit;return b.jc(2).edit(i)})),b.Ub(2,"mat-icon"),b.Lc(3,"edit"),b.Tb(),b.Tb(),b.Ub(4,"button",19),b.fc("click",(function(){b.Ac(t);const i=e.$implicit;return b.jc(2).delete(i.id)})),b.Ub(5,"mat-icon"),b.Lc(6,"delete"),b.Tb(),b.Tb(),b.Tb()}}function Rt(t,e){1&t&&b.Pb(0,"tr",20)}function Dt(t,e){1&t&&b.Pb(0,"tr",21)}function yt(t,e){if(1&t&&(b.Ub(0,"table",2),b.Sb(1,3),b.Jc(2,pt,1,0,"th",4),b.Jc(3,ht,2,1,"td",5),b.Rb(),b.Sb(4,6),b.Jc(5,vt,2,0,"th",4),b.Jc(6,gt,2,1,"td",5),b.Rb(),b.Sb(7,7),b.Jc(8,Tt,2,0,"th",4),b.Jc(9,Ut,2,1,"td",5),b.Rb(),b.Sb(10,8),b.Jc(11,wt,2,0,"th",4),b.Jc(12,xt,2,1,"td",5),b.Rb(),b.Sb(13,9),b.Jc(14,kt,2,0,"th",4),b.Jc(15,Ct,2,1,"td",5),b.Rb(),b.Sb(16,10),b.Jc(17,Lt,4,0,"th",4),b.Jc(18,It,7,0,"td",5),b.Rb(),b.Jc(19,Rt,1,0,"tr",11),b.Jc(20,Dt,1,0,"tr",12),b.Tb()),2&t){const t=b.jc();b.pc("dataSource",t.routes),b.Bb(19),b.pc("matHeaderRowDef",t.displayedColumns),b.Bb(1),b.pc("matRowDefColumns",t.displayedColumns)}}function Pt(t,e){if(1&t){const t=b.Vb();b.Ub(0,"div",22),b.Ub(1,"div",23),b.Pb(2,"span"),b.Ub(3,"span",24),b.Lc(4," Keine Routen vorhanden."),b.Pb(5,"br"),b.Ub(6,"button",25),b.fc("click",(function(){return b.Ac(t),b.jc().add()})),b.Lc(7," Hinzuf\xfcgen. "),b.Tb(),b.Tb(),b.Pb(8,"span"),b.Tb(),b.Tb()}}const Bt=[{path:"",component:m,children:[{path:"routes",component:(()=>{class t{constructor(t,e){this.farm=t,this.dialog=e,this.unsub$=new r.b,this.slides={},this.displayedColumns=["toggle","interval","source","target","units","control"]}ngOnInit(){this.farm.list(this.unsub$).subscribe(t=>{this.routes=t;for(const e of t)this.slides[e.id]=new d.e(e.enabled),this.slides[e.id].valueChanges.subscribe(t=>{this.farm.setTaskEnabled(e.id,t).subscribe()})})}add(){this.dialog.open(dt).afterClosed().subscribe(t=>{void 0!==t&&(this.routes=[...this.routes,t],this.slides[t.id]=new d.e(t.enabled),this.slides[t.id].valueChanges.subscribe(e=>{this.farm.setTaskEnabled(t.id,e).subscribe()}))})}delete(t){this.farm.deleteEntity(t).subscribe(t=>{this.routes=this.routes.filter(e=>e.id!==t)})}edit(t){this.dialog.open(ft,{data:t}).afterClosed().subscribe(e=>{void 0!==e&&(this.routes=this.routes.map(i=>i.id===t.id?e:i))})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(b.Ob(mt),b.Ob(u.b))},t.\u0275cmp=b.Ib({type:t,selectors:[["app-farm-route"]],decls:2,vars:2,consts:[["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["class","row",4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","toggle"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","interval"],["matColumnDef","source"],["matColumnDef","target"],["matColumnDef","units"],["matColumnDef","control"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"formControl"],[3,"value"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],["mat-header-row",""],["mat-row",""],[1,"row"],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(b.Jc(0,yt,21,3,"table",0),b.Jc(1,Pt,9,0,"div",1)),2&t&&(b.pc("ngIf",e.routes&&e.routes.length>0),b.Bb(1),b.pc("ngIf",e.routes&&0===e.routes.length))},directives:[a.m,I.j,I.c,I.e,I.b,I.g,I.i,I.d,I.a,E.a,d.o,d.f,R.a,V.a,x.a,T.a,U.a,I.f,I.h],styles:[".mat-column-control[_ngcontent-%COMP%]{width:10%}.mat-column-toggle[_ngcontent-%COMP%]{width:7%}"]}),t})()},{path:"",pathMatch:"full",component:et}]}];let Ot=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[n.f.forChild(Bt)],n.f]}),t})();var Jt=i("BLWB");let St=(()=>{class t{}return t.\u0275mod=b.Mb({type:t}),t.\u0275inj=b.Lb({factory:function(e){return new(e||t)},imports:[[a.c,Ot,o.c,F.f,E.b,d.t,Jt.a,p.d,h.b,T.b,x.b,u.f,g.b,U.b,L.c,I.l]]}),t})()}}]);