(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"5za1":function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var i=n("1G5W"),a=n("lJxs"),s=n("SxV6"),c=n("pLZG");class r{constructor(e,t,n,i,a,s,c){this.id=Math.random(),this.max=e,this.first=t,this.origin=n,this.target=i,this.type=a,this.unit=s,this.cataTarget=c}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.CommandListRequest"}}class o{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.GetCommandEditTimesRequest"}}class b{constructor(e){this.time=e}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.SimpleTimerRequest"}}class l{constructor(e,t,n){this.id=Math.random(),this.plan=e,this.cataTarget=t,this.ms=n}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.ImportWorkbenchRequest"}}class m{constructor(e,t,n,i,a,s,c){this.source=e,this.target=t,this.slowestUnit=n,this.commandType=i.name,this.arrival=a,this.template=s,this.troops=c}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.AddCommandRequest"}}class u{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.DeleteCommandRequest"}}class d{constructor(e,t){this.id=e,this.source=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandSourceRequest"}}class p{constructor(e,t){this.id=e,this.target=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandTargetRequest"}}class h{constructor(e,t){this.id=e,this.slowestUnit=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditSlowestUnitRequest"}}class g{constructor(e,t){this.id=e,this.type=t.name}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandTypeRequest"}}class f{constructor(e,t){this.id=e,this.arrivalTime=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandArrivalTimeRequest"}}class v{constructor(e,t){this.id=e,this.sendTime=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandSendTimeRequest"}}class T{constructor(e,t,n){this.id=e,this.template=t,this.troops=n}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandTroopsRequest"}}class w{getName(){return"GetStandardTroopTemplateRequest"}}class k{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.unitengine.ws.packet.incoming.GetStandardTroopTemplateRequest"}}class U{constructor(e,t){this.name=e,this.troops=t}getName(){return"io.robertengel.dsbot.unitengine.ws.packet.incoming.AddStandardTroopTemplateRequest"}}class C{constructor(e,t,n){this.id=e,this.name=t,this.troops=n}getName(){return"io.robertengel.dsbot.unitengine.ws.packet.incoming.EditStandardTroopTemplateRequest"}}class O{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.unitengine.ws.packet.incoming.DeleteStandardTroopTemplateRequest"}}class L{constructor(e,t,n,i,a){this.origin=e,this.target=t,this.type=n,this.unit=i,this.cataTarget=a}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.WorkbenchExportRequest"}}class R{getName(){return"GetTimerLogicRequest"}}class S{constructor(e){this.timerLogic=e}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.SetTimerLogicRequest"}}class D{constructor(e,t,n,i,a){this.village=e,this.troops=t,this.second=n,this.msStart=i,this.msEnd=a}getName(){return"io.robertengel.dsbot.feature.tabber.ws.packet.incoming.CancelTabberRequest"}}class y{getName(){return"GetPlannedCancelTabsRequest"}}class P{constructor(e){this.id=e}getName(){return"io.robertengel.dsbot.feature.tabber.ws.packet.incoming.CancelPlannedTabRequest"}}class N{constructor(e,t){this.id=e,this.timerLogic=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.EditCommandTimerRequest"}}class I{constructor(e,t,n,i,a,s,c){this.sources=e,this.target=t,this.slowestUnit=n,this.commandType=i.name,this.arrival=a,this.template=s,this.troops=c}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.MultiAddCommandRequest"}}class B{constructor(e,t,n){this.ids=e,this.plus=t,this.unit=n}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandTimeAddRequest"}}class E{constructor(e,t,n){this.ids=e,this.min=t,this.max=n}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandMillisRandomRequest"}}class j{constructor(e,t){this.ids=e,this.ms=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandMillisSetRequest"}}class M{constructor(e,t){this.ids=e,this.timerLogic=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandTimerRequest"}}class ${constructor(e,t,n){this.ids=e,this.template=t,this.troops=n}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandTroopsRequest"}}class J{constructor(e,t){this.ids=e,this.type=t.name}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandTypeRequest"}}class x{constructor(e,t){this.ids=e,this.slowestUnit=t}getName(){return"io.robertengel.dsbot.feature.command.ws.packet.incoming.multi.MultiEditCommandUnitRequest"}}class q{getName(){return"CommandListUsedTypesRequest"}}var F=n("fXoL"),A=n("7nMs");let H=(()=>{class e{constructor(e){this.websocket=e}multiEditEvents(e){return this.websocket.observable("MultiEditCommandResponse").pipe(Object(i.a)(e))}addMillis(e,t,n){this.websocket.sendData(new B(e,t,n))}randomizeMillis(e,t,n){this.websocket.sendData(new E(e,t,n))}setMillis(e,t){this.websocket.sendData(new j(e,t))}multiEditTimer(e,t){this.websocket.sendData(new M(e,t))}multiEditTroops(e,t,n){this.websocket.sendData(new $(e,t,n))}multiEditType(e,t){this.websocket.sendData(new J(e,t))}multiEditUnit(e,t){this.websocket.sendData(new x(e,t))}setOverviewRemove(e){localStorage.setItem("tw.interface.command.overview.remove",String(e))}shouldOverviewRemove(){return"true"===localStorage.getItem("tw.interface.command.overview.remove")}cancelTab(e,t,n,i,a){this.websocket.sendData(new D(e,t,n,i,a))}getCancelTabs(){return this.websocket.observable("ListPlannedCancelTabsResponse",new y)}cancelPlannedCancelTab(e){this.websocket.sendData(new P(e))}addedPlansEvents(){return this.websocket.observable("AddedPlannedTabPacket")}cancelPlansEvents(){return this.websocket.observable("CanceledPlannedTabPacket").pipe(Object(a.a)(e=>e.id))}getTimerLogic(){return this.websocket.observable("TimerLogicResponse",new R)}setTimerLogic(e){this.websocket.sendData(new S(e))}importWorkbenchStart(){return this.websocket.observable("ImportWorkbenchStartEvent").pipe(Object(a.a)(e=>e.id))}importWorkbenchProgress(){return this.websocket.observable("ImportWorkbenchProgressEvent")}importWorkbenchFinish(){return this.websocket.observable("ImportWorkbenchFinishEvent")}getTroopTemplates(){return this.websocket.observable("StandardTroopTemplateListResponse",new w).pipe(Object(s.a)(),Object(a.a)(e=>e.templates))}getTroopTemplate(e){return this.websocket.observable("StandardTroopTemplateResponse",new k(e)).pipe(Object(c.a)(t=>t.id===e),Object(s.a)())}addTroopTemplate(e,t){return this.websocket.observable("StandardTroopTemplateResponse",new U(e,t)).pipe(Object(s.a)())}editTroopTemplate(e,t,n){return this.websocket.observable("StandardTroopTemplateResponse",new C(e,t,n)).pipe(Object(c.a)(t=>t.id===e),Object(s.a)())}deleteTroopTemplate(e){this.websocket.sendData(new O(e))}exportWorkbench(e,t,n,i,c){return this.websocket.observable("WorkbenchExportResponse",new L(e,t,n,i,c)).pipe(Object(s.a)(),Object(a.a)(e=>e.export))}addCommandEvents(){return this.websocket.observable("AddCommandEvent")}multiAddCommandEvents(){return this.websocket.observable("MultiAddCommandEvent")}editCommandsEvents(){return this.websocket.observable("EditCommandEvent")}removeCommandEvents(){return this.websocket.observable("RemoveCommandEvent").pipe(Object(a.a)(e=>e.id))}simpleTimer(e){this.websocket.sendData(new b(e))}importWorkbench(e,t,n){const i=new l(e,t,n);return this.websocket.sendData(i),i.id}getCommandTypes(){return this.websocket.observable("CommandListTypesResponse",new q).pipe(Object(s.a)())}getCommandList(e,t,n,i,a,o,b){const l=new r(e,t,n,i,a,o,b);return this.websocket.observable("CommandListResponse",l).pipe(Object(c.a)(e=>e.id===l.id),Object(s.a)())}getEditTimes(e){const t=new o(e);return this.websocket.observable("CommandEditTimesResponse",t).pipe(Object(c.a)(t=>t.id===e),Object(s.a)())}addCommand(e,t,n,i,a,s,c){this.websocket.sendData(new m(e,t,n,i,a,s,c))}addCommands(e,t,n,i,a,s,c){this.websocket.sendData(new I(e,t,n,i,a,s,c))}removeCommand(e){this.websocket.sendData(new u(e))}editSource(e,t){this.websocket.sendData(new d(e,t))}editTarget(e,t){this.websocket.sendData(new p(e,t))}editSlowestUnit(e,t){this.websocket.sendData(new h(e,t))}editCommandType(e,t){this.websocket.sendData(new g(e,t))}editArrival(e,t){this.websocket.sendData(new f(e,t))}editTimer(e,t){this.websocket.sendData(new N(e,t))}editSendTime(e,t){this.websocket.sendData(new v(e,t))}editTroops(e,t,n){this.websocket.sendData(new T(e,t,n))}}return e.\u0275fac=function(t){return new(t||e)(F.cc(A.a))},e.\u0275prov=F.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},jTwa:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("fXoL"),a=n("7nMs"),s=n("ofXK");function c(e,t){if(1&e&&i.Pb(0,"img",1),2&e){const e=i.jc();i.pc("src",e.imagebase+"unit/unit_"+e.value+".png",i.Cc)}}let r=(()=>{class e{constructor(e){this.web=e}ngOnInit(){this.web.infoObservable.subscribe(e=>{this.units=e.units,this.imagebase=e.imageBase})}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(a.a))},e.\u0275cmp=i.Ib({type:e,selectors:[["app-unit-render"]],inputs:{value:"value"},decls:1,vars:1,consts:[["class","img-fluid",3,"src",4,"ngIf"],[1,"img-fluid",3,"src"]],template:function(e,t){1&e&&i.Jc(0,c,1,1,"img",0),2&e&&i.pc("ngIf",t.imagebase)},directives:[s.m],styles:[""]}),e})()},sIr3:function(e,t,n){"use strict";n.r(t),n.d(t,"IncsModule",(function(){return Je}));var i=n("ofXK"),a=n("tyNb"),s=n("XNiG"),c=n("1G5W"),r=n("fXoL"),o=n("fer1"),b=n("M9ds");const l=function(e){return[e]};function m(e,t){if(1&e){const e=r.Vb();r.Ub(0,"span",3),r.fc("click",(function(){r.Ac(e);const n=t.$implicit;return r.jc().activeLink=n})),r.Lc(1),r.Tb()}if(2&e){const e=t.$implicit,n=r.jc();r.pc("active",n.activeLink===e)("routerLink",r.tc(3,l,e.link)),r.Bb(1),r.Nc(" ",e.title," ")}}let u=(()=>{class e{constructor(e,t){this.router=e,this.inc=t,this.links=[{title:"Home",link:"/incs"},{title:"Eigentruppen tabben",link:"/incs/cancel"}],this.activeLink=this.links[0],this.unsub$=new s.b}heatmap(e){this.inc.heatmap(e)}ngOnInit(){this.setActive(),this.router.events.pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.setActive()})}setActive(){for(const e of this.links)this.router.isActive(e.link,!1)&&(this.activeLink=e)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Ob(a.c),r.Ob(o.a))},e.\u0275cmp=r.Ib({type:e,selectors:[["app-incs"]],decls:7,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"click"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(e,t){1&e&&(r.Ub(0,"nav",0),r.Jc(1,m,2,5,"span",1),r.Ub(2,"span",2),r.fc("click",(function(){return t.heatmap("INCOMING")})),r.Lc(3," Heatmap Eintreffend "),r.Tb(),r.Ub(4,"span",2),r.fc("click",(function(){return t.heatmap("OUTGOING")})),r.Lc(5," Heatmap Ausgehend "),r.Tb(),r.Tb(),r.Pb(6,"router-outlet")),2&e&&(r.Bb(1),r.pc("ngForOf",t.links))},directives:[b.b,i.l,b.a,a.g,a.d],styles:[""]}),e})();var d=n("l5mm"),p=n("lJxs"),h=n("UXun"),g=n("Kj3r"),f=n("3Pt+"),v=n("7nMs"),T=n("0MNC"),w=n("PDjf"),k=n("5QHs"),U=n("Q2Ze"),C=n("ZTz/"),O=n("jTwa"),L=n("FKr1"),R=n("pu8Q"),S=n("OaSA"),D=n("irRR"),y=n("DSdR");function P(e,t){1&e&&r.Pb(0,"app-unit-render",8),2&e&&r.pc("value",t.$implicit)}function N(e,t){if(1&e&&(r.Ub(0,"mat-option",9),r.Pb(1,"app-unit-render",9),r.Tb()),2&e){const e=t.$implicit;r.pc("value",e),r.Bb(1),r.pc("value",e)}}function I(e,t){if(1&e&&(r.Ub(0,"mat-form-field",4),r.Ub(1,"mat-label"),r.Lc(2,"Einheit"),r.Tb(),r.Ub(3,"mat-select",5),r.Ub(4,"mat-select-trigger"),r.Jc(5,P,1,1,"app-unit-render",6),r.Tb(),r.Jc(6,N,2,2,"mat-option",7),r.Tb(),r.Tb()),2&e){const e=r.jc();r.Bb(3),r.pc("formControl",e.unitsForm),r.Bb(2),r.pc("ngForOf",e.unitsForm.value),r.Bb(1),r.pc("ngForOf",e.units)}}function B(e,t){1&e&&(r.Ub(0,"div",10),r.Ub(1,"div",11),r.Pb(2,"span"),r.Pb(3,"mat-spinner"),r.Pb(4,"span"),r.Tb(),r.Tb())}function E(e,t){1&e&&(r.Ub(0,"mat-header-cell"),r.Lc(1,"Name"),r.Tb())}function j(e,t){if(1&e&&(r.Ub(0,"mat-cell"),r.Ub(1,"span",24),r.Lc(2,"Name:"),r.Tb(),r.Ub(3,"a",25),r.Lc(4),r.Tb(),r.Tb()),2&e){const e=t.$implicit;r.Bb(3),r.pc("routerLink","/incs/"+e.id),r.Bb(1),r.Mc(e.name)}}function M(e,t){1&e&&r.Pb(0,"app-unit-render",8),2&e&&r.pc("value",t.$implicit)}function $(e,t){if(1&e&&(r.Ub(0,"mat-option",9),r.Pb(1,"app-unit-render",9),r.Tb()),2&e){const e=t.$implicit;r.pc("value",e),r.Bb(1),r.pc("value",e)}}function J(e,t){if(1&e&&(r.Ub(0,"mat-header-cell"),r.Ub(1,"mat-form-field",4),r.Ub(2,"mat-label"),r.Lc(3,"Einheit"),r.Tb(),r.Ub(4,"mat-select",5),r.Ub(5,"mat-select-trigger"),r.Jc(6,M,1,1,"app-unit-render",6),r.Tb(),r.Jc(7,$,2,2,"mat-option",7),r.Tb(),r.Tb(),r.Tb()),2&e){const e=r.jc(2);r.Bb(4),r.pc("formControl",e.unitsForm),r.Bb(2),r.pc("ngForOf",e.unitsForm.value),r.Bb(1),r.pc("ngForOf",e.units)}}function x(e,t){if(1&e&&(r.Ub(0,"mat-cell"),r.Ub(1,"span",24),r.Lc(2,"Einheit:"),r.Tb(),r.Pb(3,"app-unit-render",9),r.Tb()),2&e){const e=t.$implicit;r.Bb(3),r.pc("value",e.slowestUnit)}}function q(e,t){1&e&&(r.Ub(0,"mat-header-cell"),r.Lc(1,"Ziel"),r.Tb())}function F(e,t){if(1&e&&(r.Ub(0,"mat-cell"),r.Ub(1,"span",24),r.Lc(2,"Ziel:"),r.Tb(),r.Pb(3,"app-village-render",9),r.Tb()),2&e){const e=t.$implicit;r.Bb(3),r.pc("value",e.target)}}function A(e,t){1&e&&(r.Ub(0,"mat-header-cell"),r.Lc(1,"Herkunft"),r.Tb())}function H(e,t){if(1&e&&(r.Ub(0,"mat-cell"),r.Ub(1,"span",24),r.Lc(2,"Herkunft:"),r.Tb(),r.Pb(3,"app-village-render",9),r.Tb()),2&e){const e=t.$implicit;r.Bb(3),r.pc("value",e.origin)}}function z(e,t){1&e&&(r.Ub(0,"mat-header-cell"),r.Lc(1,"Spieler"),r.Tb())}function W(e,t){if(1&e&&(r.Ub(0,"mat-cell"),r.Ub(1,"span",24),r.Lc(2,"Spieler:"),r.Tb(),r.Lc(3),r.Tb()),2&e){const e=t.$implicit;r.Bb(3),r.Nc(" ",e.player.name," ")}}function G(e,t){1&e&&(r.Ub(0,"mat-header-cell"),r.Lc(1,"Ankunft"),r.Tb())}function V(e,t){if(1&e&&(r.Ub(0,"mat-cell"),r.Ub(1,"span",24),r.Lc(2,"Ankunft:"),r.Tb(),r.Lc(3),r.Ub(4,"small"),r.Lc(5),r.Tb(),r.Tb()),2&e){const e=t.$implicit;r.Bb(3),r.Nc(" ",e.arrival.display,""),r.Bb(2),r.Nc(":",e.arrival.ms,"")}}function Y(e,t){1&e&&(r.Ub(0,"mat-header-cell"),r.Lc(1,"Verbleibend"),r.Tb())}function _(e,t){if(1&e&&(r.Ub(0,"mat-cell"),r.Ub(1,"span",24),r.Lc(2,"Verbleibend:"),r.Tb(),r.Ub(3,"span"),r.Lc(4),r.kc(5,"hms"),r.Tb(),r.Tb()),2&e){const e=t.$implicit;r.Bb(3),r.Gb("red",e.remaining<300),r.Bb(1),r.Mc(r.lc(5,3,1e3*e.remaining))}}function K(e,t){1&e&&r.Pb(0,"mat-header-row")}function X(e,t){1&e&&r.Pb(0,"mat-row")}function Z(e,t){if(1&e&&(r.Ub(0,"mat-table",12),r.Sb(1,13),r.Jc(2,E,2,0,"mat-header-cell",14),r.Jc(3,j,5,2,"mat-cell",15),r.Rb(),r.Sb(4,16),r.Jc(5,J,8,3,"mat-header-cell",14),r.Jc(6,x,4,1,"mat-cell",15),r.Rb(),r.Sb(7,17),r.Jc(8,q,2,0,"mat-header-cell",14),r.Jc(9,F,4,1,"mat-cell",15),r.Rb(),r.Sb(10,18),r.Jc(11,A,2,0,"mat-header-cell",14),r.Jc(12,H,4,1,"mat-cell",15),r.Rb(),r.Sb(13,19),r.Jc(14,z,2,0,"mat-header-cell",14),r.Jc(15,W,4,1,"mat-cell",15),r.Rb(),r.Sb(16,20),r.Jc(17,G,2,0,"mat-header-cell",14),r.Jc(18,V,6,2,"mat-cell",15),r.Rb(),r.Sb(19,21),r.Jc(20,Y,2,0,"mat-header-cell",14),r.Jc(21,_,6,5,"mat-cell",15),r.Rb(),r.Jc(22,K,1,0,"mat-header-row",22),r.Jc(23,X,1,0,"mat-row",23),r.Tb()),2&e){const e=r.jc();r.pc("dataSource",e.incs),r.Bb(22),r.pc("matHeaderRowDef",e.displayedColumns),r.Bb(1),r.pc("matRowDefColumns",e.displayedColumns)}}const Q=function(){return[10,50,100,250]};let ee=(()=>{class e{constructor(e,t,n){this.web=e,this.incService=t,this.breakpointObserver=n,this.unsub$=new s.b,this.incs=[],this.size=10,this.unitsForm=new f.e([]),this.cancelled=!1,this.displayedColumns=["name","slowestUnit","target","origin","player","arrival","remaining"],this.isHandset$=this.breakpointObserver.observe("(max-width: 900px)").pipe(Object(p.a)(e=>e.matches),Object(h.a)()),this.loading=!1}ngOnInit(){this.web.info().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.units=e.units}),this.loading=!0,this.incService.getIncList(0,10,!1).subscribe(e=>{this.incs=e.incs,this.count=e.count,this.loading=!1}),Object(d.a)(1e3).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.incs.forEach((e,t,n)=>{n[t].remaining>0&&(n[t].remaining-=1)})}),this.unitsForm.valueChanges.pipe(Object(c.a)(this.unsub$),Object(g.a)(1e3)).subscribe(e=>{this.loading=!0,this.incService.getIncList(0,this.size,this.cancelled,e).subscribe(e=>{this.incs=e.incs,this.count=e.count,this.loading=!1})})}pageUpdate(e){this.size=e.pageSize,this.loading=!0,this.incService.getIncList(e.pageIndex*e.pageSize,e.pageSize,this.cancelled,this.unitsForm.value).subscribe(e=>{this.incs=e.incs,this.count=e.count,this.loading=!1})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Ob(v.a),r.Ob(o.a),r.Ob(T.a))},e.\u0275cmp=r.Ib({type:e,selectors:[["app-incs-overview"]],decls:6,vars:9,consts:[["appearance","fill",4,"ngIf"],["class","row",4,"ngIf"],["class","w-100",3,"dataSource",4,"ngIf"],[3,"length","pageSize","pageSizeOptions","page"],["appearance","fill"],["multiple","",3,"formControl"],["class","p-1",3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngFor","ngForOf"],[1,"p-1",3,"value"],[3,"value"],[1,"row"],[1,"col-md-12","flex-between"],[1,"w-100",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","slowestUnit"],["matColumnDef","target"],["matColumnDef","origin"],["matColumnDef","player"],["matColumnDef","arrival"],["matColumnDef","remaining"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"mobile-label"],[3,"routerLink"]],template:function(e,t){1&e&&(r.Ub(0,"mat-card"),r.Jc(1,I,7,3,"mat-form-field",0),r.kc(2,"async"),r.Jc(3,B,5,0,"div",1),r.Jc(4,Z,24,3,"mat-table",2),r.Ub(5,"mat-paginator",3),r.fc("page",(function(e){return t.pageUpdate(e)})),r.Tb(),r.Tb()),2&e&&(r.Bb(1),r.pc("ngIf",!0===r.lc(2,6,t.isHandset$)),r.Bb(2),r.pc("ngIf",t.loading),r.Bb(1),r.pc("ngIf",!t.loading),r.Bb(1),r.pc("length",t.count)("pageSize",10)("pageSizeOptions",r.sc(8,Q)))},directives:[w.a,i.m,k.a,U.b,U.f,C.a,f.o,f.f,C.c,i.l,O.a,L.n,R.b,S.j,S.c,S.e,S.b,S.g,S.i,S.d,S.a,a.e,D.a,S.f,S.h],pipes:[i.b,y.a],styles:["a[_ngcontent-%COMP%]{color:inherit}.red[_ngcontent-%COMP%]{color:red}.mat-header-cell[_ngcontent-%COMP%]{flex-direction:column;justify-content:center}.mat-cell[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mobile-label[_ngcontent-%COMP%]{display:none}@media (max-width:900px){.mobile-label[_ngcontent-%COMP%]{width:80px;display:inline-block;font-weight:700}mat-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{flex-direction:column;align-items:start;padding:8px 24px}}"]}),e})();var te=n("bTqV");function ne(e,t){1&e&&(r.Ub(0,"div",2),r.Ub(1,"div",3),r.Pb(2,"span"),r.Pb(3,"mat-spinner"),r.Pb(4,"span"),r.Tb(),r.Tb())}function ie(e,t){1&e&&(r.Sb(0),r.Lc(1," Konnte keinen Inc mit dieser ID finden. "),r.Rb())}function ae(e,t){if(1&e&&(r.Ub(0,"mat-option",9),r.Pb(1,"app-unit-render",9),r.Tb()),2&e){const e=t.$implicit;r.pc("value",e),r.Bb(1),r.pc("value",e)}}const se=function(){return{type:"SUPPORT"}},ce=function(e,t,n){return["/planner/command",e,t,n]},re=function(e,t){return{village:e,time:t}},oe=function(e){return["/incs/cancel",e]},be=function(){return{type:"ATTACK"}};function le(e,t){if(1&e&&(r.Ub(0,"mat-card-content"),r.Ub(1,"div",2),r.Ub(2,"div",4),r.Ub(3,"mat-card",5),r.Ub(4,"div",6),r.Ub(5,"div",7),r.Lc(6),r.Tb(),r.Ub(7,"div",7),r.Ub(8,"mat-select",8),r.Ub(9,"mat-select-trigger"),r.Pb(10,"app-unit-render",9),r.Tb(),r.Jc(11,ae,2,2,"mat-option",10),r.Tb(),r.Tb(),r.Ub(12,"div",11),r.Lc(13," Ziel: "),r.Pb(14,"app-village-render",9),r.Tb(),r.Ub(15,"div",11),r.Lc(16," Herkunft: "),r.Pb(17,"app-village-render",9),r.Tb(),r.Ub(18,"div",7),r.Lc(19),r.Tb(),r.Ub(20,"div",11),r.Lc(21),r.Ub(22,"small"),r.Lc(23),r.Tb(),r.Tb(),r.Ub(24,"div",11),r.Lc(25),r.Tb(),r.Ub(26,"div",7),r.Lc(27),r.kc(28,"hms"),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Ub(29,"div",12),r.Ub(30,"div",2),r.Ub(31,"div",13),r.Ub(32,"button",14),r.Lc(33," DEFF planen. "),r.Tb(),r.Tb(),r.Tb(),r.Ub(34,"div",2),r.Ub(35,"div",13),r.Ub(36,"button",15),r.Lc(37," Eigendeff tabben. "),r.Tb(),r.Tb(),r.Tb(),r.Ub(38,"div",2),r.Ub(39,"div",13),r.Ub(40,"button",16),r.Lc(41," Cleaner planen. "),r.Tb(),r.Tb(),r.Tb(),r.Ub(42,"div",2),r.Ub(43,"div",13),r.Ub(44,"button",16),r.Lc(45," Retime planen. "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&e){const e=r.jc();r.Bb(6),r.Nc(" ",e.inc.name," "),r.Bb(2),r.pc("formControl",e.unitForm),r.Bb(2),r.pc("value",e.unitForm.value),r.Bb(1),r.pc("ngForOf",e.units),r.Bb(3),r.pc("value",e.inc.target),r.Bb(3),r.pc("value",e.inc.origin),r.Bb(2),r.Nc(" Spieler: ",e.inc.player.name," "),r.Bb(2),r.Nc(" Ankunft: ",e.inc.arrival.display,""),r.Bb(2),r.Nc(":",e.inc.arrival.ms,""),r.Bb(2),r.Nc(" R\xfcckkehr: ",e.inc.return.display," "),r.Bb(2),r.Nc(" Verbleibend: ",r.lc(28,15,1e3*e.inc.remaining)," "),r.Bb(5),r.pc("routerLink",r.vc(18,ce,e.inc.target.id,e.inc.arrival.timestamp,r.sc(17,se))),r.Bb(4),r.pc("routerLink",r.tc(25,oe,r.uc(22,re,e.inc.target.id,e.inc.arrival.timestamp))),r.Bb(4),r.pc("routerLink",r.vc(28,ce,e.inc.target.id,e.inc.arrival.timestamp,r.sc(27,be))),r.Bb(4),r.pc("routerLink",r.vc(33,ce,e.inc.origin.id,e.inc.return.timestamp,r.sc(32,be)))}}let me=(()=>{class e{constructor(e,t,n){this.route=e,this.incService=t,this.web=n,this.unsub$=new s.b,this.routeChange$=new s.b,this.unitForm=new f.e,this.units=[],this.loading=!1}ngOnInit(){this.web.info().subscribe(e=>{this.units=e.units}),this.route.paramMap.subscribe(e=>{this.routeChange$.next(),this.loading=!0,this.incService.getInc(parseInt(e.get("id"),10)).subscribe(e=>{this.inc=e,this.unitForm.setValue(this.inc.slowestUnit),this.loading=!1}),this.incService.incUpdates(parseInt(e.get("id"),10)).pipe(Object(c.a)(this.routeChange$)).subscribe(e=>{this.inc=e,this.unitForm.setValue(this.inc.slowestUnit)})}),Object(d.a)(1e3).pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.inc&&this.inc.remaining--}),this.unitForm.valueChanges.pipe(Object(g.a)(500)).subscribe(e=>{this.inc&&e!==this.inc.slowestUnit&&this.incService.updateSlowest(this.inc.id,e)})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete(),this.routeChange$.next(),this.routeChange$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Ob(a.a),r.Ob(o.a),r.Ob(v.a))},e.\u0275cmp=r.Ib({type:e,selectors:[["app-incs-details"]],decls:4,vars:3,consts:[["class","row",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col-md-12","flex-between"],[1,"col-xl-9"],[1,"mat-elevation-z6","h-100"],[1,"row","align-items-center"],[1,"col-xl-1"],[3,"formControl"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"col-xl-2"],[1,"col-xl-3"],[1,"col-md-12"],["mat-raised-button","","color","accent",1,"w-100","mat-elevation-z6",3,"routerLink"],["mat-raised-button","","color","accent",1,"w-100","mat-elevation-z6","mt-2",3,"routerLink"],["mat-raised-button","","color","warn",1,"w-100","mat-elevation-z6","mt-2",3,"routerLink"]],template:function(e,t){1&e&&(r.Ub(0,"mat-card"),r.Jc(1,ne,5,0,"div",0),r.Jc(2,ie,2,0,"ng-container",1),r.Jc(3,le,46,37,"mat-card-content",1),r.Tb()),2&e&&(r.Bb(1),r.pc("ngIf",t.loading),r.Bb(1),r.pc("ngIf",!t.inc&&!t.loading),r.Bb(1),r.pc("ngIf",t.inc))},directives:[w.a,i.m,R.b,w.c,C.a,f.o,f.f,C.c,O.a,i.l,D.a,te.a,a.d,L.n],pipes:[y.a],styles:[""]}),e})();var ue=n("wd/R"),de=n("PqYM"),pe=n("5za1"),he=n("YWTT"),ge=n("7Ixi"),fe=n("e6WT"),ve=n("TN/R"),Te=n("38Pe");let we=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.commandService=t,this.route=n,this.villageService=i,this.form=this.fb.group({village:[null],troops:{},date:ue(),time:ue().format("HH:mm:ss"),start:0,end:999})}ngOnInit(){this.route.paramMap.subscribe(e=>{e.has("village")&&this.villageService.byId(parseInt(e.get("village"),10)).subscribe(e=>{this.form.patchValue({village:e})}),e.has("time")&&this.form.patchValue({date:ue(parseInt(e.get("time"),10)),time:ue(parseInt(e.get("time"),10)).format("HH:mm:ss")})})}submit(e){if(this.form.disable(),Object(de.a)(1500).subscribe(()=>{this.form.enable()}),null===e.troops)return;const t=ue(e.date.format("DD.MM.YYYY")+" "+e.time,"DD.MM.YYYY HH:mm:ss");this.commandService.cancelTab(e.village.id,e.troops,t.valueOf(),e.start,e.end)}}return e.\u0275fac=function(t){return new(t||e)(r.Ob(f.d),r.Ob(pe.a),r.Ob(a.a),r.Ob(he.a))},e.\u0275cmp=r.Ib({type:e,selectors:[["app-incs-cancel-tab-schedule"]],decls:36,vars:5,consts:[[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"col"],["label","Dorf","formControlName","village"],["matInput","","placeholder","Pick Date","formControlName","date",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["matInput","","maxlength","8","formControlName","time"],["type","number","matInput","","min","0","max","999","formControlName","start"],["type","number","matInput","","min","0","max","999","formControlName","end"],["formControlName","troops",1,"full-width",3,"hideCataTarget"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(e,t){if(1&e&&(r.Ub(0,"mat-card"),r.Ub(1,"form",0),r.fc("ngSubmit",(function(){return t.submit(t.form.value)})),r.Ub(2,"div",1),r.Ub(3,"div",2),r.Pb(4,"app-village-input",3),r.Tb(),r.Tb(),r.Ub(5,"div",1),r.Ub(6,"div",2),r.Ub(7,"mat-form-field"),r.Ub(8,"mat-label"),r.Lc(9,"Ankunft"),r.Tb(),r.Pb(10,"input",4),r.Pb(11,"mat-datepicker-toggle",5),r.Pb(12,"mat-datepicker",null,6),r.Tb(),r.Tb(),r.Ub(14,"div",2),r.Ub(15,"mat-form-field"),r.Ub(16,"mat-label"),r.Lc(17,"Ankunftszeit"),r.Tb(),r.Pb(18,"input",7),r.Tb(),r.Tb(),r.Ub(19,"div",2),r.Ub(20,"mat-form-field"),r.Ub(21,"mat-label"),r.Lc(22,"Min MS"),r.Tb(),r.Pb(23,"input",8),r.Tb(),r.Tb(),r.Ub(24,"div",2),r.Ub(25,"mat-form-field"),r.Ub(26,"mat-label"),r.Lc(27,"Max MS"),r.Tb(),r.Pb(28,"input",9),r.Tb(),r.Tb(),r.Tb(),r.Ub(29,"div",1),r.Ub(30,"div",2),r.Pb(31,"app-units-input",10),r.Tb(),r.Tb(),r.Ub(32,"div",1),r.Ub(33,"div",2),r.Ub(34,"button",11),r.Lc(35," Hinzuf\xfcgen "),r.Tb(),r.Tb(),r.Tb(),r.Tb(),r.Tb()),2&e){const e=r.xc(13);r.Bb(1),r.pc("formGroup",t.form),r.Bb(9),r.pc("matDatepicker",e),r.Bb(1),r.pc("for",e),r.Bb(20),r.pc("hideCataTarget",!0),r.Bb(3),r.pc("disabled",!t.form.valid||t.form.disabled)}},directives:[w.a,f.x,f.p,f.i,ge.a,f.o,f.g,U.b,U.f,fe.b,f.c,ve.b,ve.d,U.g,ve.a,f.k,f.s,Te.a,te.a],styles:[""]}),e})();var ke=n("NFeN");function Ue(e,t){1&e&&(r.Ub(0,"th",10),r.Lc(1," Dorf"),r.Tb())}function Ce(e,t){if(1&e&&(r.Ub(0,"td",11),r.Pb(1,"app-village-render",12),r.Tb()),2&e){const e=t.$implicit;r.Bb(1),r.pc("value",e.village)}}function Oe(e,t){1&e&&(r.Ub(0,"th",10),r.Lc(1," Zeit"),r.Tb())}function Le(e,t){if(1&e&&(r.Ub(0,"td",11),r.Lc(1),r.Tb()),2&e){const e=t.$implicit;r.Bb(1),r.Nc(" ",e.time.display," ")}}function Re(e,t){1&e&&(r.Ub(0,"th",10),r.Lc(1," MS Interval"),r.Tb())}function Se(e,t){if(1&e&&(r.Ub(0,"td",11),r.Lc(1),r.Tb()),2&e){const e=t.$implicit;r.Bb(1),r.Oc(" ",e.startMs,"-",e.endMs," ")}}function De(e,t){1&e&&r.Pb(0,"th",10)}function ye(e,t){if(1&e){const e=r.Vb();r.Ub(0,"td",11),r.Ub(1,"button",13),r.fc("click",(function(){r.Ac(e);const n=t.$implicit;return r.jc(2).cancel(n.id)})),r.Ub(2,"mat-icon"),r.Lc(3,"delete"),r.Tb(),r.Tb(),r.Tb()}}function Pe(e,t){1&e&&r.Pb(0,"tr",14)}function Ne(e,t){1&e&&r.Pb(0,"tr",15)}function Ie(e,t){if(1&e&&(r.Ub(0,"mat-card"),r.Ub(1,"table",1),r.Sb(2,2),r.Jc(3,Ue,2,0,"th",3),r.Jc(4,Ce,2,1,"td",4),r.Rb(),r.Sb(5,5),r.Jc(6,Oe,2,0,"th",3),r.Jc(7,Le,2,1,"td",4),r.Rb(),r.Sb(8,6),r.Jc(9,Re,2,0,"th",3),r.Jc(10,Se,2,2,"td",4),r.Rb(),r.Sb(11,7),r.Jc(12,De,1,0,"th",3),r.Jc(13,ye,4,0,"td",4),r.Rb(),r.Jc(14,Pe,1,0,"tr",8),r.Jc(15,Ne,1,0,"tr",9),r.Tb(),r.Tb()),2&e){const e=r.jc();r.Bb(1),r.pc("dataSource",e.plans),r.Bb(13),r.pc("matHeaderRowDef",e.displayedColumns),r.Bb(1),r.pc("matRowDefColumns",e.displayedColumns)}}let Be=(()=>{class e{constructor(e){this.command=e,this.unsub$=new s.b,this.displayedColumns=["village","time","ms","cancel"]}ngOnInit(){this.command.getCancelTabs().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.plans=e}),this.command.cancelPlansEvents().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.plans=this.plans.filter(t=>t.id!==e)}),this.command.addedPlansEvents().pipe(Object(c.a)(this.unsub$)).subscribe(e=>{this.plans=[...this.plans,e]})}cancel(e){this.command.cancelPlannedCancelTab(e)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return e.\u0275fac=function(t){return new(t||e)(r.Ob(pe.a))},e.\u0275cmp=r.Ib({type:e,selectors:[["app-incs-cancel-tab-list"]],decls:1,vars:1,consts:[[4,"ngIf"],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","village"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","time"],["matColumnDef","ms"],["matColumnDef","cancel"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&r.Jc(0,Ie,16,3,"mat-card",0),2&e&&r.pc("ngIf",t.plans.length>0)},directives:[i.m,w.a,S.j,S.c,S.e,S.b,S.g,S.i,S.d,S.a,D.a,te.a,ke.a,S.f,S.h],styles:[""]}),e})();const Ee=[{path:"",component:u,children:[{path:"cancel",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Ib({type:e,selectors:[["app-incs-cancel-tab"]],decls:5,vars:0,consts:[[1,"row"],[1,"col-xl-9"],[1,"col-xl-3"]],template:function(e,t){1&e&&(r.Ub(0,"div",0),r.Ub(1,"div",1),r.Pb(2,"app-incs-cancel-tab-schedule"),r.Tb(),r.Ub(3,"div",2),r.Pb(4,"app-incs-cancel-tab-list"),r.Tb(),r.Tb())},directives:[we,Be],styles:[""]}),e})()},{path:":id",component:me},{path:"",pathMatch:"full",component:ee}]}];let je=(()=>{class e{}return e.\u0275mod=r.Mb({type:e}),e.\u0275inj=r.Lb({factory:function(t){return new(t||e)},imports:[[a.f.forChild(Ee)],a.f]}),e})();var Me=n("BLWB"),$e=n("1yaQ");let Je=(()=>{class e{}return e.\u0275mod=r.Mb({type:e}),e.\u0275inj=r.Lb({factory:function(t){return new(t||e)},providers:[{provide:L.f,useValue:"de-DE"}],imports:[[i.c,je,b.c,w.f,Me.a,S.l,te.b,ke.b,k.b,U.d,C.b,f.t,R.a,ve.c,$e.a,fe.c]]}),e})()}}]);