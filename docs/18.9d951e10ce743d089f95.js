(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{MjV7:function(t,e,i){"use strict";i.r(e),i.d(e,"FarmModule",(function(){return ne}));var r=i("ofXK"),a=i("tyNb"),s=i("XNiG"),o=i("1G5W"),n=i("fXoL"),c=i("M9ds");const b=function(t){return[t]};function l(t,e){if(1&t){const t=n.Vb();n.Ub(0,"span",2),n.fc("click",(function(){n.Ac(t);const i=e.$implicit;return n.jc().activeLink=i})),n.Lc(1),n.Tb()}if(2&t){const t=e.$implicit,i=n.jc();n.pc("active",i.activeLink===t)("routerLink",n.tc(3,b,t.link)),n.Bb(1),n.Nc(" ",t.title," ")}}let d=(()=>{class t{constructor(t){this.router=t,this.links=[{title:"Assistent",link:"/farm"},{title:"Routen",link:"/farm/routes"}],this.activeLink=this.links[0],this.unsub$=new s.b}ngOnInit(){this.setActive(),this.router.events.pipe(Object(o.a)(this.unsub$)).subscribe(t=>{this.setActive()})}setActive(){for(const t of this.links)this.router.isActive(t.link,!1)&&(this.activeLink=t)}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(a.c))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-farm"]],decls:3,vars:1,consts:[["mat-tab-nav-bar",""],["mat-tab-link","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","",3,"active","routerLink","click"]],template:function(t,e){1&t&&(n.Ub(0,"nav",0),n.Jc(1,l,2,5,"span",1),n.Tb(),n.Pb(2,"router-outlet")),2&t&&(n.Bb(1),n.pc("ngForOf",e.links))},directives:[c.b,r.l,a.g,c.a,a.d],styles:[""]}),t})();var m=i("iELJ"),u=i("3Pt+"),h=i("dXaO"),f=i("Q2Ze"),p=i("ZTz/"),v=i("FKr1"),g=i("mPVK"),w=i("NFeN"),T=i("ZFy/"),U=i("TIdL"),S=i("bTqV");let O=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.fb=e,this.farm=i,this.form=this.fb.group({farmGroup:"A",units:{},timerInterval:30,maxDistance:20}),this.nonFarmUnits=["militia","ram","catapult","snob"]}ngOnInit(){}submit(t){this.form.disable(),this.farm.addEntity(t.farmGroup,t.units,t.timerInterval,t.maxDistance).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(m.g),n.Ob(u.d),n.Ob(h.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-farm-task-add"]],decls:38,vars:3,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"w-100"],["formControlName","farmGroup"],["value","A"],["value","B"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],["for","maxDistance"],["id","maxDistance","formControlName","maxDistance","min","1","max","100","thumbLabel","true",1,"w-100"],["matTooltip","Leer lassen um Gruppe nicht zu \xe4ndern."],["formControlName","units",3,"excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Ub(1,"div",1),n.Ub(2,"form",2),n.fc("ngSubmit",(function(){return e.submit(e.form.value)})),n.Ub(3,"div",3),n.Ub(4,"div",1),n.Ub(5,"mat-form-field",4),n.Ub(6,"mat-label"),n.Lc(7,"Gruppe"),n.Tb(),n.Ub(8,"mat-select",5),n.Ub(9,"mat-option",6),n.Lc(10,"A"),n.Tb(),n.Ub(11,"mat-option",7),n.Lc(12,"B"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(13,"div",3),n.Ub(14,"div",8),n.Ub(15,"label",9),n.Lc(16,"Interval (Minuten)"),n.Tb(),n.Tb(),n.Ub(17,"div",10),n.Pb(18,"mat-slider",11),n.Tb(),n.Tb(),n.Ub(19,"div",3),n.Ub(20,"div",8),n.Ub(21,"label",12),n.Lc(22,"Max Entfernung"),n.Tb(),n.Tb(),n.Ub(23,"div",10),n.Pb(24,"mat-slider",13),n.Tb(),n.Tb(),n.Ub(25,"div",3),n.Ub(26,"div",8),n.Ub(27,"label",12),n.Lc(28,"Einheiten "),n.Ub(29,"mat-icon",14),n.Lc(30,"info"),n.Tb(),n.Tb(),n.Tb(),n.Ub(31,"div",10),n.Pb(32,"app-units-holder-input",15),n.Tb(),n.Tb(),n.Ub(33,"div",3),n.Ub(34,"div",16),n.Pb(35,"span"),n.Ub(36,"button",17),n.Lc(37," Hinzuf\xfcgen "),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Bb(2),n.pc("formGroup",e.form),n.Bb(30),n.pc("excludeUnits",e.nonFarmUnits),n.Bb(4),n.pc("disabled",!e.form.valid||e.form.disabled))},directives:[u.x,u.p,u.i,f.b,f.f,p.a,u.o,u.g,v.n,g.a,w.a,T.a,U.a,S.a],styles:[""]}),t})();var C=i("7Ixi"),x=i("e6WT"),_=i("OaSA"),j=i("irRR");function D(t,e){1&t&&(n.Ub(0,"th",33),n.Lc(1,"Dorf"),n.Tb())}function k(t,e){if(1&t&&(n.Ub(0,"td",34),n.Pb(1,"app-village-render",35),n.Tb()),2&t){const t=e.$implicit;n.Bb(1),n.pc("value",t)}}function y(t,e){1&t&&n.Pb(0,"th",33)}function I(t,e){if(1&t){const t=n.Vb();n.Ub(0,"td",34),n.Ub(1,"button",36),n.fc("click",(function(){n.Ac(t);const i=e.$implicit;return n.jc(2).removeVillage(i.id)})),n.Ub(2,"mat-icon"),n.Lc(3,"delete"),n.Tb(),n.Tb(),n.Tb()}}function R(t,e){1&t&&n.Pb(0,"tr",37)}function L(t,e){1&t&&n.Pb(0,"tr",38)}function P(t,e){if(1&t&&(n.Ub(0,"div",25),n.Ub(1,"table",26),n.Sb(2,27),n.Jc(3,D,2,0,"th",28),n.Jc(4,k,2,1,"td",29),n.Rb(),n.Sb(5,30),n.Jc(6,y,1,0,"th",28),n.Jc(7,I,4,0,"td",29),n.Rb(),n.Jc(8,R,1,0,"tr",31),n.Jc(9,L,1,0,"tr",32),n.Tb(),n.Tb()),2&t){const t=n.jc();n.Bb(1),n.pc("dataSource",t.data.villages),n.Bb(7),n.pc("matHeaderRowDef",t.displayedColumns),n.Bb(1),n.pc("matRowDefColumns",t.displayedColumns)}}let A=(()=>{class t{constructor(t,e,i,r){this.data=t,this.dialogRef=e,this.fb=i,this.farm=r,this.unsub$=new s.b,this.form=this.fb.group({farmGroup:"A",units:{},timerInterval:30,maxDistance:20}),this.villageForm=new u.e("",u.v.required),this.massVillageForm=new u.e("",u.v.required),this.nonFarmUnits=["militia","ram","catapult","snob"],this.displayedColumns=["village","delete"],this.form.setValue({farmGroup:t.farmGroup,units:t.units,timerInterval:t.timerInterval,maxDistance:t.maxDistance})}ngOnInit(){this.farm.villageAddEvent(this.unsub$).subscribe(t=>{t.id===this.data.id&&(this.data.villages=[...this.data.villages,...t.villages])}),this.farm.villageRemoveEvent(this.unsub$).subscribe(t=>{t.id===this.data.id&&(this.data.villages=this.data.villages.filter(e=>!t.villages.includes(e.id)))})}massAdd(){this.farm.massAddVillage(this.data.id,this.massVillageForm.value)}massRemove(){this.farm.massRemoveVillage(this.data.id,this.massVillageForm.value)}addVillage(){this.farm.addVillage(this.data.id,this.villageForm.value.id)}removeVillage(t){this.farm.removeVillage(this.data.id,t)}submit(t){this.form.disable(),this.farm.editEntity(this.data.id,t.farmGroup,t.units,t.timerInterval,t.maxDistance).subscribe(t=>{this.dialogRef.close(t)})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(m.a),n.Ob(m.g),n.Ob(u.d),n.Ob(h.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-farm-task-edit"]],decls:56,vars:10,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],[1,"w-100"],["formControlName","farmGroup"],["value","A"],["value","B"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],["for","maxDistance"],["id","maxDistance","formControlName","maxDistance","min","1","max","100","thumbLabel","true",1,"w-100"],["matTooltip","Leer lassen um Gruppe nicht zu \xe4ndern."],["formControlName","units",3,"excludeUnits"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[1,"col-xl-6"],[1,"col-md-9"],[3,"formControl","onlyOwn"],["mat-raised-button","","color","primary",3,"disabled","click"],["placeholder","Massen Hinzuf\xfcgen/Entfernen","matInput","",3,"formControl"],["mat-raised-button","","color","primary",1,"mt-1",3,"disabled","click"],["class","col-xl-6 list",4,"ngIf"],[1,"col-xl-6","list"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","village"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["type","button","mat-mini-fab","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Ub(1,"div",1),n.Ub(2,"form",2),n.fc("ngSubmit",(function(){return e.submit(e.form.value)})),n.Ub(3,"div",3),n.Ub(4,"div",1),n.Ub(5,"mat-form-field",4),n.Ub(6,"mat-label"),n.Lc(7,"Gruppe"),n.Tb(),n.Ub(8,"mat-select",5),n.Ub(9,"mat-option",6),n.Lc(10,"A"),n.Tb(),n.Ub(11,"mat-option",7),n.Lc(12,"B"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(13,"div",3),n.Ub(14,"div",8),n.Ub(15,"label",9),n.Lc(16,"Interval (Minuten)"),n.Tb(),n.Tb(),n.Ub(17,"div",10),n.Pb(18,"mat-slider",11),n.Tb(),n.Tb(),n.Ub(19,"div",3),n.Ub(20,"div",8),n.Ub(21,"label",12),n.Lc(22,"Max Entfernung"),n.Tb(),n.Tb(),n.Ub(23,"div",10),n.Pb(24,"mat-slider",13),n.Tb(),n.Tb(),n.Ub(25,"div",3),n.Ub(26,"div",8),n.Ub(27,"label",12),n.Lc(28,"Einheiten "),n.Ub(29,"mat-icon",14),n.Lc(30,"info"),n.Tb(),n.Tb(),n.Tb(),n.Ub(31,"div",10),n.Pb(32,"app-units-holder-input",15),n.Tb(),n.Tb(),n.Ub(33,"div",3),n.Ub(34,"div",16),n.Pb(35,"span"),n.Ub(36,"button",17),n.Lc(37," Bearbeiten "),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Ub(38,"div",0),n.Ub(39,"div",18),n.Ub(40,"div",0),n.Ub(41,"div",19),n.Pb(42,"app-village-input",20),n.Tb(),n.Ub(43,"div",8),n.Ub(44,"button",21),n.fc("click",(function(){return e.addVillage()})),n.Lc(45," Dorf hinzuf\xfcgen. "),n.Tb(),n.Tb(),n.Tb(),n.Ub(46,"div",0),n.Ub(47,"div",19),n.Pb(48,"textarea",22),n.Tb(),n.Ub(49,"div",8),n.Ub(50,"button",21),n.fc("click",(function(){return e.massAdd()})),n.Lc(51," D\xf6rfer hinzuf\xfcgen. "),n.Tb(),n.Pb(52,"br"),n.Ub(53,"button",23),n.fc("click",(function(){return e.massRemove()})),n.Lc(54," D\xf6rfer entfernen. "),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Jc(55,P,10,3,"div",24),n.Tb()),2&t&&(n.Bb(2),n.pc("formGroup",e.form),n.Bb(30),n.pc("excludeUnits",e.nonFarmUnits),n.Bb(4),n.pc("disabled",!e.form.valid||e.form.disabled),n.Bb(6),n.pc("formControl",e.villageForm)("onlyOwn",!0),n.Bb(2),n.pc("disabled",e.villageForm.disabled||e.villageForm.invalid),n.Bb(4),n.pc("formControl",e.massVillageForm),n.Bb(2),n.pc("disabled",e.massVillageForm.disabled||e.massVillageForm.invalid),n.Bb(3),n.pc("disabled",e.massVillageForm.disabled||e.massVillageForm.invalid),n.Bb(2),n.pc("ngIf",e.data.villages.length>0))},directives:[u.x,u.p,u.i,f.b,f.f,p.a,u.o,u.g,v.n,g.a,w.a,T.a,U.a,S.a,C.a,u.f,x.b,u.c,r.m,_.j,_.c,_.e,_.b,_.g,_.i,_.d,_.a,j.a,_.f,_.h],styles:[".list[_ngcontent-%COMP%]{overflow-y:scroll;max-height:50%}"]}),t})();var B=i("PDjf"),V=i("jMqV"),J=i("hC39");function $(t,e){1&t&&n.Pb(0,"th",19)}function E(t,e){if(1&t&&(n.Ub(0,"td",20),n.Pb(1,"mat-slide-toggle",3),n.Tb()),2&t){const t=e.$implicit,i=n.jc(2);n.Bb(1),n.pc("formControl",i.slides[t.id])}}function F(t,e){1&t&&(n.Ub(0,"th",19),n.Lc(1,"Interval"),n.Tb())}function M(t,e){if(1&t&&(n.Ub(0,"td",20),n.Lc(1),n.Tb()),2&t){const t=e.$implicit;n.Bb(1),n.Nc(" ",t.timerInterval," Minuten ")}}function N(t,e){1&t&&(n.Ub(0,"th",19),n.Lc(1,"Max Entfernung"),n.Tb())}function G(t,e){if(1&t&&(n.Ub(0,"td",20),n.Lc(1),n.Tb()),2&t){const t=e.$implicit;n.Bb(1),n.Nc(" ",t.maxDistance," Felder ")}}function H(t,e){1&t&&(n.Ub(0,"th",19),n.Lc(1,"D\xf6rfer"),n.Tb())}function q(t,e){if(1&t&&(n.Ub(0,"td",20),n.Lc(1),n.Tb()),2&t){const t=e.$implicit;n.Bb(1),n.Nc(" ",t.villages.length," ")}}function z(t,e){1&t&&(n.Ub(0,"th",19),n.Lc(1,"Einheiten"),n.Tb())}function Y(t,e){if(1&t&&(n.Ub(0,"td",20),n.Lc(1),n.Pb(2,"app-units-render-min",21),n.Tb()),2&t){const t=e.$implicit;n.Bb(1),n.Nc(" Gruppe ",t.farmGroup,": "),n.Bb(1),n.pc("value",t.units)}}function K(t,e){if(1&t){const t=n.Vb();n.Ub(0,"th",19),n.Ub(1,"button",22),n.fc("click",(function(){return n.Ac(t),n.jc(2).add()})),n.Ub(2,"mat-icon"),n.Lc(3,"add"),n.Tb(),n.Tb(),n.Tb()}}function Z(t,e){if(1&t){const t=n.Vb();n.Ub(0,"td",20),n.Ub(1,"button",23),n.fc("click",(function(){n.Ac(t);const i=e.$implicit;return n.jc(2).edit(i)})),n.Ub(2,"mat-icon"),n.Lc(3,"edit"),n.Tb(),n.Tb(),n.Ub(4,"button",24),n.fc("click",(function(){n.Ac(t);const i=e.$implicit;return n.jc(2).delete(i.id)})),n.Ub(5,"mat-icon"),n.Lc(6,"delete"),n.Tb(),n.Tb(),n.Tb()}}function W(t,e){1&t&&n.Pb(0,"tr",25)}function X(t,e){1&t&&n.Pb(0,"tr",26)}function Q(t,e){if(1&t&&(n.Ub(0,"table",8),n.Sb(1,9),n.Jc(2,$,1,0,"th",10),n.Jc(3,E,2,1,"td",11),n.Rb(),n.Sb(4,12),n.Jc(5,F,2,0,"th",10),n.Jc(6,M,2,1,"td",11),n.Rb(),n.Sb(7,13),n.Jc(8,N,2,0,"th",10),n.Jc(9,G,2,1,"td",11),n.Rb(),n.Sb(10,14),n.Jc(11,H,2,0,"th",10),n.Jc(12,q,2,1,"td",11),n.Rb(),n.Sb(13,15),n.Jc(14,z,2,0,"th",10),n.Jc(15,Y,3,2,"td",11),n.Rb(),n.Sb(16,16),n.Jc(17,K,4,0,"th",10),n.Jc(18,Z,7,0,"td",11),n.Rb(),n.Jc(19,W,1,0,"tr",17),n.Jc(20,X,1,0,"tr",18),n.Tb()),2&t){const t=n.jc();n.pc("dataSource",t.tasks),n.Bb(19),n.pc("matHeaderRowDef",t.displayedColumns),n.Bb(1),n.pc("matRowDefColumns",t.displayedColumns)}}function tt(t,e){if(1&t){const t=n.Vb();n.Ub(0,"div",0),n.Ub(1,"div",27),n.Pb(2,"span"),n.Ub(3,"span",28),n.Lc(4," Keine Tasks vorhanden."),n.Pb(5,"br"),n.Ub(6,"button",29),n.fc("click",(function(){return n.Ac(t),n.jc().add()})),n.Lc(7," Hinzuf\xfcgen. "),n.Tb(),n.Tb(),n.Pb(8,"span"),n.Tb(),n.Tb()}}let et=(()=>{class t{constructor(t,e){this.farm=t,this.dialog=e,this.unsub$=new s.b,this.slide=new u.e,this.max=new u.e,this.slides={},this.displayedColumns=["toggle","interval","maxDistance","villages","units","control"]}ngOnInit(){this.farm.list(this.unsub$).subscribe(t=>{this.tasks=t;for(const e of t)this.slides[e.id]=new u.e(e.enabled),this.slides[e.id].valueChanges.subscribe(t=>{this.farm.setTaskEnabled(e.id,t).subscribe()})}),this.farm.config(this.unsub$).subscribe(t=>{this.slide.setValue(t.enabled,{emitEvent:!1}),this.max.setValue(t.maxIncsPerVillage,{emitEvent:!1})}),this.slide.valueChanges.subscribe(t=>{this.farm.setEnabled(t)}),this.max.valueChanges.subscribe(t=>{this.farm.setMaxIncs(t)})}add(){this.dialog.open(O).afterClosed().subscribe(t=>{void 0!==t&&(this.tasks=[...this.tasks,t],this.slides[t.id]=new u.e(t.enabled),this.slides[t.id].valueChanges.subscribe(e=>{this.farm.setTaskEnabled(t.id,e).subscribe()}),this.dialog.open(A,{data:t}))})}delete(t){this.farm.deleteEntity(t).subscribe(t=>{this.tasks=this.tasks.filter(e=>e.id!==t)})}edit(t){this.dialog.open(A,{data:t}).afterClosed().subscribe(e=>{void 0!==e&&(this.tasks=this.tasks.map(i=>i.id===t.id?e:i))})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(h.a),n.Ob(m.b))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-farm-overview"]],decls:12,vars:4,consts:[[1,"row"],[1,"col-xl-12"],[1,"mb-3"],[3,"formControl"],[1,"ml-3"],["matInput","","type","number",3,"formControl"],["mat-table","","class","w-100",3,"dataSource",4,"ngIf"],["class","row",4,"ngIf"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","toggle"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","interval"],["matColumnDef","maxDistance"],["matColumnDef","villages"],["matColumnDef","units"],["matColumnDef","control"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[3,"value"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Ub(1,"div",1),n.Ub(2,"mat-card",2),n.Pb(3,"mat-slide-toggle",3),n.Ub(4,"mat-form-field",4),n.Ub(5,"mat-label"),n.Lc(6,"Max Angriffe"),n.Tb(),n.Pb(7,"input",5),n.Ub(8,"mat-hint"),n.Lc(9,"Maximale Anzahl an Angriffen pro Babarendorf."),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Jc(10,Q,21,3,"table",6),n.Jc(11,tt,9,0,"div",7)),2&t&&(n.Bb(3),n.pc("formControl",e.slide),n.Bb(4),n.pc("formControl",e.max),n.Bb(3),n.pc("ngIf",e.tasks&&e.tasks.length>0),n.Bb(1),n.pc("ngIf",e.tasks&&0===e.tasks.length))},directives:[B.a,V.a,u.o,u.f,f.b,f.f,x.b,u.s,u.c,f.e,r.m,_.j,_.c,_.e,_.b,_.g,_.i,_.d,_.a,J.a,S.a,w.a,T.a,_.f,_.h],styles:[".mat-column-control[_ngcontent-%COMP%]{width:10%}.mat-column-toggle[_ngcontent-%COMP%]{width:7%}"]}),t})();var it=i("SxV6"),rt=i("pLZG"),at=i("lJxs");class st{getName(){return"ListFarmRouteRequest"}}class ot{constructor(t,e,i,r){this.source=t,this.target=e,this.troops=i,this.timerInterval=r}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.AddFarmRouteRequest"}}class nt{constructor(t){this.id=t}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.DeleteFarmRouteRequest"}}class ct{constructor(t,e,i,r,a){this.id=t,this.source=e,this.target=i,this.troops=r,this.timerInterval=a}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.EditFarmRouteRequest"}}class bt{constructor(t,e){this.id=t,this.enabled=e}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.FarmRouteSetEnabledRequest"}}class lt{getName(){return"FarmRouteConfigRequest"}}class dt{constructor(t){this.autoDisable=t}getName(){return"io.robertengel.dsbot.feature.farm.route.ws.packet.incoming.SetFarmRouteAutoDisableRequest"}}var mt=i("7nMs");let ut=(()=>{class t{constructor(t){this.websocketService=t}config(t){return this.websocketService.observable("FarmRouteConfigResponse",new lt).pipe(Object(o.a)(t))}setAutoDisable(t){this.websocketService.sendData(new dt(t))}list(t){return this.websocketService.observable("ListFarmRouteResponse",new st).pipe(Object(o.a)(t))}addEntity(t,e,i,r){return this.websocketService.observable("AddFarmRouteResponse",new ot(t,e,i,r)).pipe(Object(it.a)())}deleteEntity(t){return this.websocketService.observable("DeleteFarmRouteResponse",new nt(t)).pipe(Object(rt.a)(e=>e.id===t),Object(it.a)(),Object(at.a)(t=>t.id))}editEntity(t,e,i,r,a){return this.websocketService.observable("EditFarmRouteResponse",new ct(t,e,i,r,a)).pipe(Object(it.a)())}setTaskEnabled(t,e){return this.websocketService.observable("FarmRouteSetEnabledResponse",new bt(t,e)).pipe(Object(rt.a)(e=>e.id===t),Object(it.a)())}}return t.\u0275fac=function(e){return new(e||t)(n.cc(mt.a))},t.\u0275prov=n.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ht=i("38Pe");let ft=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.fb=e,this.farm=i,this.form=this.fb.group({source:[void 0,u.v.required],target:[void 0,u.v.required],troops:{},timerInterval:[30,u.v.min(1)]})}ngOnInit(){}submit(t){this.form.disable(),this.farm.addEntity(t.source.id,t.target.id,t.troops,t.timerInterval).subscribe(t=>{console.log("got route from service:"),console.log(t),this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(m.g),n.Ob(u.d),n.Ob(ut))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-farm-route-add"]],decls:26,vars:2,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["label","Herkunft","formControlName","source"],["label","Ziel","formControlName","target"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],[1,"col-sm-2"],["formControlName","troops"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Ub(1,"div",1),n.Ub(2,"form",2),n.fc("ngSubmit",(function(){return e.submit(e.form.value)})),n.Ub(3,"div",3),n.Ub(4,"div",1),n.Pb(5,"app-village-input",4),n.Tb(),n.Tb(),n.Ub(6,"div",3),n.Ub(7,"div",1),n.Pb(8,"app-village-input",5),n.Tb(),n.Tb(),n.Ub(9,"div",3),n.Ub(10,"div",6),n.Ub(11,"label",7),n.Lc(12,"Interval (Minuten)"),n.Tb(),n.Tb(),n.Ub(13,"div",8),n.Pb(14,"mat-slider",9),n.Tb(),n.Tb(),n.Ub(15,"div",3),n.Ub(16,"div",10),n.Ub(17,"label"),n.Lc(18," Einheiten "),n.Tb(),n.Tb(),n.Ub(19,"div",1),n.Pb(20,"app-units-input",11),n.Tb(),n.Tb(),n.Ub(21,"div",3),n.Ub(22,"div",12),n.Pb(23,"span"),n.Ub(24,"button",13),n.Lc(25," Hinzuf\xfcgen "),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Bb(2),n.pc("formGroup",e.form),n.Bb(22),n.pc("disabled",!e.form.valid||e.form.disabled))},directives:[u.x,u.p,u.i,C.a,u.o,u.g,g.a,ht.a,S.a],styles:[""]}),t})(),pt=(()=>{class t{constructor(t,e,i,r){this.data=t,this.dialogRef=e,this.fb=i,this.farm=r,this.form=this.fb.group({source:[void 0,u.v.required],target:[void 0,u.v.required],troops:{},timerInterval:[30,u.v.min(1)]}),this.form.setValue({source:t.source,target:t.target,timerInterval:t.timerInterval,troops:t.troops})}ngOnInit(){}submit(t){this.form.disable(),this.farm.editEntity(this.data.id,t.source.id,t.target.id,t.troops,t.timerInterval).subscribe(t=>{this.dialogRef.close(t)})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(m.a),n.Ob(m.g),n.Ob(u.d),n.Ob(ut))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-farm-route-edit"]],decls:26,vars:2,consts:[[1,"row"],[1,"col-xl-12"],[3,"formGroup","ngSubmit"],[1,"form-group","row"],["label","Herkunft","formControlName","source"],["label","Ziel","formControlName","target"],[1,"col-xl-3"],["for","timerInterval"],[1,"col-xl-9"],["id","timerInterval","formControlName","timerInterval","min","1","max","120","thumbLabel","true",1,"w-100"],[1,"col-sm-2"],[1,"col-xl-10"],["formControlName","troops"],[1,"col-xl-12","flex-between"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Ub(1,"div",1),n.Ub(2,"form",2),n.fc("ngSubmit",(function(){return e.submit(e.form.value)})),n.Ub(3,"div",3),n.Ub(4,"div",1),n.Pb(5,"app-village-input",4),n.Tb(),n.Tb(),n.Ub(6,"div",3),n.Ub(7,"div",1),n.Pb(8,"app-village-input",5),n.Tb(),n.Tb(),n.Ub(9,"div",3),n.Ub(10,"div",6),n.Ub(11,"label",7),n.Lc(12,"Interval (Minuten)"),n.Tb(),n.Tb(),n.Ub(13,"div",8),n.Pb(14,"mat-slider",9),n.Tb(),n.Tb(),n.Ub(15,"div",3),n.Ub(16,"div",10),n.Ub(17,"label"),n.Lc(18," Einheiten "),n.Tb(),n.Tb(),n.Ub(19,"div",11),n.Pb(20,"app-units-input",12),n.Tb(),n.Tb(),n.Ub(21,"div",3),n.Ub(22,"div",13),n.Pb(23,"span"),n.Ub(24,"button",14),n.Lc(25," Bearbeiten "),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Tb()),2&t&&(n.Bb(2),n.pc("formGroup",e.form),n.Bb(22),n.pc("disabled",!e.form.valid||e.form.disabled))},directives:[u.x,u.p,u.i,C.a,u.o,u.g,g.a,ht.a,S.a],styles:[""]}),t})();var vt=i("8LU1"),gt=i("FtGj"),wt=i("VRyK"),Tt=i("R0Ic"),Ut=i("u47x");const St=["mat-sort-header",""];function Ot(t,e){if(1&t){const t=n.Vb();n.Ub(0,"div",3),n.fc("@arrowPosition.start",(function(){return n.Ac(t),n.jc()._disableViewStateAnimation=!0}))("@arrowPosition.done",(function(){return n.Ac(t),n.jc()._disableViewStateAnimation=!1})),n.Pb(1,"div",4),n.Ub(2,"div",5),n.Pb(3,"div",6),n.Pb(4,"div",7),n.Pb(5,"div",8),n.Tb(),n.Tb()}if(2&t){const t=n.jc();n.pc("@arrowOpacity",t._getArrowViewState())("@arrowPosition",t._getArrowViewState())("@allowChildren",t._getArrowDirectionState()),n.Bb(2),n.pc("@indicator",t._getArrowDirectionState()),n.Bb(1),n.pc("@leftPointer",t._getArrowDirectionState()),n.Bb(1),n.pc("@rightPointer",t._getArrowDirectionState())}}const Ct=["*"];class xt{}const _t=Object(v.B)(Object(v.z)(xt));let jt=(()=>{class t extends _t{constructor(){super(...arguments),this.sortables=new Map,this._stateChanges=new s.b,this.start="asc",this._direction="",this.sortChange=new n.o}get direction(){return this._direction}set direction(t){this._direction=t}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=Object(vt.c)(t)}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let e=function(t,e){let i=["asc","desc"];return"desc"==t&&i.reverse(),e||i.push(""),i}(t.start||this.start,null!=t.disableClear?t.disableClear:this.disableClear),i=e.indexOf(this.direction)+1;return i>=e.length&&(i=0),e[i]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return t.\u0275fac=function(e){return Dt(e||t)},t.\u0275dir=n.Jb({type:t,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"],active:["matSortActive","active"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[n.yb,n.zb]}),t})();const Dt=n.Wb(jt),kt=v.b.ENTERING+" "+v.a.STANDARD_CURVE,yt={indicator:Object(Tt.o)("indicator",[Object(Tt.l)("active-asc, asc",Object(Tt.m)({transform:"translateY(0px)"})),Object(Tt.l)("active-desc, desc",Object(Tt.m)({transform:"translateY(10px)"})),Object(Tt.n)("active-asc <=> active-desc",Object(Tt.e)(kt))]),leftPointer:Object(Tt.o)("leftPointer",[Object(Tt.l)("active-asc, asc",Object(Tt.m)({transform:"rotate(-45deg)"})),Object(Tt.l)("active-desc, desc",Object(Tt.m)({transform:"rotate(45deg)"})),Object(Tt.n)("active-asc <=> active-desc",Object(Tt.e)(kt))]),rightPointer:Object(Tt.o)("rightPointer",[Object(Tt.l)("active-asc, asc",Object(Tt.m)({transform:"rotate(45deg)"})),Object(Tt.l)("active-desc, desc",Object(Tt.m)({transform:"rotate(-45deg)"})),Object(Tt.n)("active-asc <=> active-desc",Object(Tt.e)(kt))]),arrowOpacity:Object(Tt.o)("arrowOpacity",[Object(Tt.l)("desc-to-active, asc-to-active, active",Object(Tt.m)({opacity:1})),Object(Tt.l)("desc-to-hint, asc-to-hint, hint",Object(Tt.m)({opacity:.54})),Object(Tt.l)("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",Object(Tt.m)({opacity:0})),Object(Tt.n)("* => asc, * => desc, * => active, * => hint, * => void",Object(Tt.e)("0ms")),Object(Tt.n)("* <=> *",Object(Tt.e)(kt))]),arrowPosition:Object(Tt.o)("arrowPosition",[Object(Tt.n)("* => desc-to-hint, * => desc-to-active",Object(Tt.e)(kt,Object(Tt.h)([Object(Tt.m)({transform:"translateY(-25%)"}),Object(Tt.m)({transform:"translateY(0)"})]))),Object(Tt.n)("* => hint-to-desc, * => active-to-desc",Object(Tt.e)(kt,Object(Tt.h)([Object(Tt.m)({transform:"translateY(0)"}),Object(Tt.m)({transform:"translateY(25%)"})]))),Object(Tt.n)("* => asc-to-hint, * => asc-to-active",Object(Tt.e)(kt,Object(Tt.h)([Object(Tt.m)({transform:"translateY(25%)"}),Object(Tt.m)({transform:"translateY(0)"})]))),Object(Tt.n)("* => hint-to-asc, * => active-to-asc",Object(Tt.e)(kt,Object(Tt.h)([Object(Tt.m)({transform:"translateY(0)"}),Object(Tt.m)({transform:"translateY(-25%)"})]))),Object(Tt.l)("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",Object(Tt.m)({transform:"translateY(0)"})),Object(Tt.l)("hint-to-desc, active-to-desc, desc",Object(Tt.m)({transform:"translateY(-25%)"})),Object(Tt.l)("hint-to-asc, active-to-asc, asc",Object(Tt.m)({transform:"translateY(25%)"}))]),allowChildren:Object(Tt.o)("allowChildren",[Object(Tt.n)("* <=> *",[Object(Tt.i)("@*",Object(Tt.f)(),{optional:!0})])])};let It=(()=>{class t{constructor(){this.changes=new s.b,this.sortButtonLabel=t=>"Change sorting for "+t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(n.Kb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const Rt={provide:It,deps:[[new n.C,new n.L,It]],useFactory:function(t){return t||new It}};class Lt{}const Pt=Object(v.z)(Lt);let At=(()=>{class t extends Pt{constructor(t,e,i,r,a,s){super(),this._intl=t,this._sort=i,this._columnDef=r,this._focusMonitor=a,this._elementRef=s,this._showIndicatorHint=!1,this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._rerenderSubscription=Object(wt.a)(i.sortChange,i._stateChanges,t.changes).subscribe(()=>{this._isSorted()&&this._updateArrowDirection(),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),e.markForCheck()})}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=Object(vt.c)(t)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>this._setIndicatorHintVisible(!!t))}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(t){this._isDisabled()&&t||(this._showIndicatorHint=t,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(t){this._viewState=t,this._disableViewStateAnimation&&(this._viewState={toState:t.toState})}_toggleOnInteraction(){this._sort.sort(this),"hint"!==this._viewState.toState&&"active"!==this._viewState.toState||(this._disableViewStateAnimation=!0);const t=this._isSorted()?{fromState:this._arrowDirection,toState:"active"}:{fromState:"active",toState:this._arrowDirection};this._setAnimationTransitionState(t),this._showIndicatorHint=!1}_handleClick(){this._isDisabled()||this._toggleOnInteraction()}_handleKeydown(t){this._isDisabled()||t.keyCode!==gt.n&&t.keyCode!==gt.f||(t.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const t=this._viewState.fromState;return(t?t+"-to-":"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(It),n.Ob(n.h),n.Ob(jt,8),n.Ob("MAT_SORT_HEADER_COLUMN_DEF",8),n.Ob(Ut.h),n.Ob(n.l))},t.\u0275cmp=n.Ib({type:t,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(t,e){1&t&&n.fc("click",(function(){return e._handleClick()}))("keydown",(function(t){return e._handleKeydown(t)}))("mouseenter",(function(){return e._setIndicatorHintVisible(!0)}))("mouseleave",(function(){return e._setIndicatorHintVisible(!1)})),2&t&&(n.Cb("aria-sort",e._getAriaSortAttribute()),n.Gb("mat-sort-header-disabled",e._isDisabled()))},inputs:{disabled:"disabled",arrowPosition:"arrowPosition",disableClear:"disableClear",id:["mat-sort-header","id"],start:"start"},exportAs:["matSortHeader"],features:[n.yb],attrs:St,ngContentSelectors:Ct,decls:4,vars:6,consts:[["role","button",1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(t,e){1&t&&(n.oc(),n.Ub(0,"div",0),n.Ub(1,"div",1),n.nc(2),n.Tb(),n.Jc(3,Ot,6,6,"div",2),n.Tb()),2&t&&(n.Gb("mat-sort-header-sorted",e._isSorted())("mat-sort-header-position-before","before"==e.arrowPosition),n.Cb("tabindex",e._isDisabled()?null:0),n.Bb(3),n.pc("ngIf",e._renderArrow()))},directives:[r.m],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}\n"],encapsulation:2,data:{animation:[yt.indicator,yt.leftPointer,yt.rightPointer,yt.arrowOpacity,yt.arrowPosition,yt.allowChildren]},changeDetection:0}),t})(),Bt=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},providers:[Rt],imports:[[r.c]]}),t})();var Vt=i("0EQZ"),Jt=i("2Vo4"),$t=i("nYR2");class Et extends Vt.b{constructor(t){super(),this.farm=t,this.unsub$=new s.b,this.routeSubject=new Jt.a([]),this.loadingSubject=new Jt.a(!1),this.routes=[],this.loading$=this.loadingSubject.asObservable(),this.routes$=this.routeSubject.asObservable(),this.loadingSubject.next(!0),this.farm.list(this.unsub$).pipe(Object($t.a)(()=>this.loadingSubject.next(!1))).subscribe(t=>{this.routes=t,this.routeSubject.next(t)})}static distance(t){return Math.sqrt(Math.pow(t.target.x-t.source.x,2)+Math.pow(t.target.y-t.source.y,2))}setSort(t){this.sort=t,this.performSort()}performSort(){var t,e;this.sort&&(null===(e=null===(t=this.sort)||void 0===t?void 0:t.direction)||void 0===e?void 0:e.length)>0&&("distance"===this.sort.active&&(this.routes=this.routes.sort((t,e)=>Et.distance(t)-Et.distance(e))),"interval"===this.sort.active&&(this.routes=this.routes.sort((t,e)=>t.timerInterval-e.timerInterval)),"desc"===this.sort.direction&&(this.routes=this.routes.reverse())),this.routeSubject.next(this.routes)}add(t){this.routes=[...this.routes,t],this.performSort()}edit(t){this.routes=this.routes.map(e=>e.id===t.id?t:e),this.performSort()}remove(t){this.routes=this.routes.filter(e=>e.id!==t),this.performSort()}connect(t){return this.routeSubject.asObservable()}disconnect(t){this.routeSubject.complete(),this.loadingSubject.complete(),this.unsub$.next(),this.unsub$.complete()}}function Ft(t,e){1&t&&n.Pb(0,"th",18)}function Mt(t,e){if(1&t&&(n.Ub(0,"td",19),n.Pb(1,"mat-slide-toggle",20),n.Tb()),2&t){const t=e.$implicit,i=n.jc();n.Bb(1),n.pc("formControl",i.slides[t.id])}}function Nt(t,e){1&t&&(n.Ub(0,"th",21),n.Lc(1,"Entfernung"),n.Tb())}function Gt(t,e){if(1&t&&(n.Ub(0,"td",19),n.Lc(1),n.Tb()),2&t){const t=e.$implicit,i=n.jc();n.Bb(1),n.Nc(" ",i.distance(t).toFixed(2)," ")}}function Ht(t,e){1&t&&(n.Ub(0,"th",21),n.Lc(1,"Interval"),n.Tb())}function qt(t,e){if(1&t&&(n.Ub(0,"td",19),n.Lc(1),n.Tb()),2&t){const t=e.$implicit;n.Bb(1),n.Nc(" ",t.timerInterval," Minuten ")}}function zt(t,e){1&t&&(n.Ub(0,"th",18),n.Lc(1,"Herkunft"),n.Tb())}function Yt(t,e){if(1&t&&(n.Ub(0,"td",19),n.Pb(1,"app-village-render",22),n.Tb()),2&t){const t=e.$implicit;n.Bb(1),n.pc("value",t.source)}}function Kt(t,e){1&t&&(n.Ub(0,"th",18),n.Lc(1,"Ziel"),n.Tb())}function Zt(t,e){if(1&t&&(n.Ub(0,"td",19),n.Pb(1,"app-village-render",22),n.Tb()),2&t){const t=e.$implicit;n.Bb(1),n.pc("value",t.target)}}function Wt(t,e){1&t&&(n.Ub(0,"th",18),n.Lc(1,"Einheiten"),n.Tb())}function Xt(t,e){if(1&t&&(n.Ub(0,"td",19),n.Pb(1,"app-units-render-min",22),n.Tb()),2&t){const t=e.$implicit;n.Bb(1),n.pc("value",t.troops)}}function Qt(t,e){if(1&t){const t=n.Vb();n.Ub(0,"th",18),n.Ub(1,"button",23),n.fc("click",(function(){return n.Ac(t),n.jc().add()})),n.Ub(2,"mat-icon"),n.Lc(3,"add"),n.Tb(),n.Tb(),n.Tb()}}function te(t,e){if(1&t){const t=n.Vb();n.Ub(0,"td",19),n.Ub(1,"button",24),n.fc("click",(function(){n.Ac(t);const i=e.$implicit;return n.jc().edit(i)})),n.Ub(2,"mat-icon"),n.Lc(3,"edit"),n.Tb(),n.Tb(),n.Ub(4,"button",25),n.fc("click",(function(){n.Ac(t);const i=e.$implicit;return n.jc().delete(i.id)})),n.Ub(5,"mat-icon"),n.Lc(6,"delete"),n.Tb(),n.Tb(),n.Tb()}}function ee(t,e){1&t&&n.Pb(0,"tr",26)}function ie(t,e){1&t&&n.Pb(0,"tr",27)}function re(t,e){if(1&t){const t=n.Vb();n.Ub(0,"div",0),n.Ub(1,"div",28),n.Pb(2,"span"),n.Ub(3,"span",29),n.Lc(4," Keine Routen vorhanden."),n.Pb(5,"br"),n.Ub(6,"button",30),n.fc("click",(function(){return n.Ac(t),n.jc().add()})),n.Lc(7," Hinzuf\xfcgen. "),n.Tb(),n.Tb(),n.Pb(8,"span"),n.Tb(),n.Tb()}}const ae=[{path:"",component:d,children:[{path:"routes",component:(()=>{class t{constructor(t,e){this.farm=t,this.dialog=e,this.unsub$=new s.b,this.slides={},this.autoDisableSlide=new u.e(!1),this.displayedColumns=["toggle","distance","interval","source","target","units","control"]}ngOnInit(){this.dataSource=new Et(this.farm),this.farm.config(this.unsub$).subscribe(t=>{this.config=t,this.autoDisableSlide.setValue(t.autoDisable,{emitEvent:!1})}),this.autoDisableSlide.valueChanges.subscribe(t=>{this.farm.setAutoDisable(t)}),this.dataSource.routes$.subscribe(t=>{for(const e of t)this.slides[e.id]=new u.e(e.enabled),this.slides[e.id].valueChanges.subscribe(t=>{e.enabled=t,this.farm.setTaskEnabled(e.id,t).subscribe()})})}distance(t){return Math.sqrt(Math.pow(t.target.x-t.source.x,2)+Math.pow(t.target.y-t.source.y,2))}add(){this.dialog.open(ft).afterClosed().subscribe(t=>{void 0!==t&&(this.dataSource.add(t),this.slides[t.id]=new u.e(t.enabled),this.slides[t.id].valueChanges.subscribe(e=>{this.farm.setTaskEnabled(t.id,e).subscribe()}))})}delete(t){this.farm.deleteEntity(t).subscribe(t=>{this.dataSource.remove(t)})}edit(t){this.dialog.open(pt,{data:t}).afterClosed().subscribe(t=>{void 0!==t&&this.dataSource.edit(t)})}ngOnDestroy(){this.unsub$.next(),this.unsub$.complete()}ngAfterViewInit(){this.sort.sortChange.subscribe(t=>{this.dataSource.setSort(t)})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(ut),n.Ob(m.b))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-farm-route"]],viewQuery:function(t,e){var i;1&t&&n.Rc(jt,!0),2&t&&n.wc(i=n.gc())&&(e.sort=i.first)},decls:29,vars:5,consts:[[1,"row"],[1,"col-xl-12"],[1,"mb-3"],["matTooltip","Routen auf D\xf6rfer mit rotem/gelbem Bericht deaktivieren.",3,"formControl"],["matSort","","mat-table","","matSortDisableClear","",1,"w-100",3,"dataSource"],["matColumnDef","toggle"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","distance"],["mat-sort-header","","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","interval"],["matColumnDef","source"],["matColumnDef","target"],["matColumnDef","units"],["matColumnDef","control"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","row",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],[3,"formControl"],["mat-sort-header","","mat-header-cell",""],[3,"value"],["mat-mini-fab","","color","primary",3,"click"],["mat-mini-fab","",1,"mr-2",3,"click"],["mat-mini-fab","","matTooltip","Unwiderruflich l\xf6schen.",3,"click"],["mat-header-row",""],["mat-row",""],[1,"col-xl-12","flex-between"],[1,"text-center"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(n.Ub(0,"div",0),n.Ub(1,"div",1),n.Ub(2,"mat-card",2),n.Pb(3,"mat-slide-toggle",3),n.Tb(),n.Tb(),n.Tb(),n.Ub(4,"table",4),n.Sb(5,5),n.Jc(6,Ft,1,0,"th",6),n.Jc(7,Mt,2,1,"td",7),n.Rb(),n.Sb(8,8),n.Jc(9,Nt,2,0,"th",9),n.Jc(10,Gt,2,1,"td",7),n.Rb(),n.Sb(11,10),n.Jc(12,Ht,2,0,"th",9),n.Jc(13,qt,2,1,"td",7),n.Rb(),n.Sb(14,11),n.Jc(15,zt,2,0,"th",6),n.Jc(16,Yt,2,1,"td",7),n.Rb(),n.Sb(17,12),n.Jc(18,Kt,2,0,"th",6),n.Jc(19,Zt,2,1,"td",7),n.Rb(),n.Sb(20,13),n.Jc(21,Wt,2,0,"th",6),n.Jc(22,Xt,2,1,"td",7),n.Rb(),n.Sb(23,14),n.Jc(24,Qt,4,0,"th",6),n.Jc(25,te,7,0,"td",7),n.Rb(),n.Jc(26,ee,1,0,"tr",15),n.Jc(27,ie,1,0,"tr",16),n.Tb(),n.Jc(28,re,9,0,"div",17)),2&t&&(n.Bb(3),n.pc("formControl",e.autoDisableSlide),n.Bb(1),n.pc("dataSource",e.dataSource),n.Bb(22),n.pc("matHeaderRowDef",e.displayedColumns),n.Bb(1),n.pc("matRowDefColumns",e.displayedColumns),n.Bb(1),n.pc("ngIf",0===e.dataSource.routes.length))},directives:[B.a,V.a,T.a,u.o,u.f,_.j,jt,_.c,_.e,_.b,_.g,_.i,r.m,_.d,_.a,At,j.a,J.a,S.a,w.a,_.f,_.h],styles:[".mat-column-control[_ngcontent-%COMP%]{width:10%}.mat-column-toggle[_ngcontent-%COMP%]{width:7%}"]}),t})()},{path:"",pathMatch:"full",component:et}]}];let se=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[a.f.forChild(ae)],a.f]}),t})();var oe=i("BLWB");let ne=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[r.c,se,c.c,B.f,V.b,u.t,oe.a,f.d,p.b,w.b,S.b,m.f,g.b,T.b,x.c,_.l,Bt]]}),t})()}}]);